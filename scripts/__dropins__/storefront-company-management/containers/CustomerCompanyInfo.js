/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as o,jsxs as i}from"@dropins/tools/preact-jsx-runtime.js";import{useState as c,useEffect as m}from"@dropins/tools/preact-hooks.js";import{events as f}from"@dropins/tools/event-bus.js";import{g as p}from"../chunks/getCustomerCompany.js";import{Card as d,Skeleton as h,SkeletonRow as s}from"@dropins/tools/components.js";import{classes as u}from"@dropins/tools/lib.js";import{useText as y}from"@dropins/tools/i18n.js";import"../chunks/validateCompanyEmail.js";import"@dropins/tools/fetch-graphql.js";const g=({customerCompanyInfo:e,loading:a,className:t})=>{const r=y({companyName:"Company.shared.fields.companyName",jobTitle:"Company.shared.fields.jobTitle",workPhoneNumber:"Company.shared.fields.workPhoneNumber",userRole:"Company.shared.fields.userRole"});return a?o(d,{variant:"secondary",className:u(["customer-company-info-card",t]),children:o("div",{className:"customer-company-info-card__content",children:i(h,{"data-testid":"customerCompanyInfoSkeletonLoader",children:[o(s,{variant:"heading",size:"xlarge",fullWidth:!1,lines:1}),o(s,{variant:"heading",size:"xlarge",fullWidth:!0,lines:1}),o(s,{variant:"heading",size:"xlarge",fullWidth:!0,lines:1}),o(s,{variant:"heading",size:"xlarge",fullWidth:!0,lines:1})]})})}):e?o(d,{variant:"secondary",className:u(["customer-company-info-card",t]),children:i("div",{className:"customer-company-info-card__content",children:[i("p",{children:[r.companyName,": ",e.companyName]}),e.jobTitle&&i("p",{children:[r.jobTitle,": ",e.jobTitle]}),e.workPhoneNumber&&i("p",{children:[r.workPhoneNumber,": ",e.workPhoneNumber]}),e.userRole&&i("p",{children:[r.userRole,": ",e.userRole]})]})}):null},N=()=>{const[e,a]=c(null),[t,r]=c(!0),l=async()=>{try{r(!0);const n=await p();a(n)}catch(n){console.error("Failed to fetch customer company info:",n),a(null)}finally{r(!1)}};return m(()=>{l()},[]),m(()=>{const n=f.on("companyContext/changed",l,{eager:!0});return()=>{n==null||n.off()}},[]),{companyInfo:e,loading:t}},P=({className:e})=>{const{companyInfo:a,loading:t}=N();return o(g,{customerCompanyInfo:a,loading:t,className:e})};export{P as CustomerCompanyInfo};
//# sourceMappingURL=CustomerCompanyInfo.js.map
