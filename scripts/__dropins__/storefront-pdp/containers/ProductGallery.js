/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as A,jsxs as z}from"@dropins/tools/preact-jsx-runtime.js";import{useState as O,useEffect as J,useMemo as w}from"@dropins/tools/preact-compat.js";import{Slot as R}from"@dropins/tools/lib.js";import{Image as Z}from"@dropins/tools/components.js";import{events as K}from"@dropins/tools/event-bus.js";import{g as U}from"../chunks/getFetchedProductData.js";import{Z as V,C as j,O as W}from"../chunks/Zoom.js";/* empty css             */import{useText as X}from"@dropins/tools/i18n.js";import"@dropins/tools/preact.js";const Y=({initialData:v=null,controls:G="dots",loop:I=!0,peak:k=!1,gap:H=null,arrows:N=!0,arrowsOnMainImage:Q=!1,zoom:h=!1,imageParams:t,thumbnailParams:o,children:$,slots:l,...F})=>{var x,y,T,_,S,D;const c=X("PDP.Product.Image.label").label,[e,q]=O(v),[f,C]=O(null);J(()=>{const n=K.on("pdp/data",q);return()=>{n==null||n.off()}},[]);const g=w(()=>({data:e}),[e]),B=w(()=>{var n;return((n=e==null?void 0:e.images)==null?void 0:n.map(({label:p,url:r},i)=>{const d=({...u})=>{var M;const E={title:p,src:r,alt:c==null?void 0:c.replace("{product}",p).replace("{key}",String(i+1)).replace("{total}",String((M=e==null?void 0:e.images)==null?void 0:M.length)),width:(t==null?void 0:t.width)??960,height:(t==null?void 0:t.height)??1191,params:t??{width:960},loading:i===0?"eager":"lazy",...u};return A(R,{name:"CarouselMainImage",slot:l==null?void 0:l.CarouselMainImage,context:{...g,defaultImageProps:E},children:A(Z,{...E})})};return h?A(V,{closeButton:typeof h=="object"?h.closeButton:!1,children:A(d,{})},r):A(d,{onClick:()=>C(i)},r)}))??A("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",className:"pdp-product-gallery__images__placeholder",width:(t==null?void 0:t.width)??960,height:(t==null?void 0:t.height)??1191,"aria-hidden":!0},"pleaceholder")},[c,e==null?void 0:e.images,t,h,g,l==null?void 0:l.CarouselMainImage]),s=w(()=>{var n;return((n=e==null?void 0:e.images)==null?void 0:n.map(({label:p,url:r},i)=>{var u;const d={title:p,src:r,alt:c==null?void 0:c.replace("{product}",p).replace("{key}",String(i+1)).replace("{total}",String((u=e==null?void 0:e.images)==null?void 0:u.length)),width:(o==null?void 0:o.width)??200,height:(o==null?void 0:o.height)??248,params:o??{width:200},loading:"lazy"};return A(R,{name:"CarouselThumbnail",slotTag:"span",contentTag:"span",slot:l==null?void 0:l.CarouselThumbnail,context:{...g,defaultImageProps:d},children:A(Z,{...d})},r)}))??A("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",className:"pdp-product-gallery__thumbnail__placeholder",width:(o==null?void 0:o.width)??200,height:(o==null?void 0:o.height)??248,"aria-hidden":!0},"pleaceholder")},[c,e==null?void 0:e.images,o,g,l==null?void 0:l.CarouselThumbnail]);return e?z("div",{...F,children:[A(j,{arrows:!!((x=e==null?void 0:e.images)!=null&&x.length)&&N,arrowsOnMainImage:Q,controls:(y=e==null?void 0:e.images)!=null&&y.length?G:void 0,loop:I&&!!((T=e.images)!=null&&T.length),peak:!!((_=e==null?void 0:e.images)!=null&&_.length)&&k,gap:H,defaultIndex:f||0,thumbnails:s,children:B}),f===null?null:A(W,{onClose:()=>C(null),centered:!0,children:A(j,{arrows:!!((S=e==null?void 0:e.images)!=null&&S.length),width:"100%",height:"100%",defaultIndex:f,loop:I&&!!((D=e.images)!=null&&D.length),controls:"dots",isZoomed:!0,children:B})})]}):null};Y.getInitialData=U;export{Y as ProductGallery,Y as default};
