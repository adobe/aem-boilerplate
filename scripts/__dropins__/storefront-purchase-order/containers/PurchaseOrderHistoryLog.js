/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as e,jsxs as n}from"@dropins/tools/preact-jsx-runtime.js";import{classes as g}from"@dropins/tools/lib.js";import{Button as p,Card as y,Skeleton as L,SkeletonRow as u}from"@dropins/tools/components.js";import"@dropins/tools/event-bus.js";import"../chunks/PurchaseOrderHistoryLogContent.js";import{P as f}from"../chunks/PurchaseOrdersHeader.js";import{useState as v}from"@dropins/tools/preact-hooks.js";import{u as w}from"../chunks/usePurchaseOrderData.js";import{Fragment as x}from"@dropins/tools/preact.js";import{f as _}from"../chunks/formatDate.js";import{useText as m,Text as h}from"@dropins/tools/i18n.js";const P=({historyLogRecords:r=[],visibleRecordsLimit:o})=>{const[a,c]=v(o),t=r.length>a,i=r.length<=o,d=m({showMoreLabel:"PurchaseOrders.historyLog.ariaLabel.showMore",showLessLabel:"PurchaseOrders.historyLog.ariaLabel.showLess"});return r.length?n("div",{className:"b2b-purchase-order-history-log-content",children:[e("ul",{className:"b2b-purchase-order-history-log-content__list",role:"list",children:r.slice(0,a).map((s,l)=>{const b=Math.min(a,r.length);return n(x,{children:[n("li",{className:"b2b-purchase-order-history-log-content__item",children:[e("div",{className:"b2b-purchase-order-history-log-content__title",children:e(h,{id:`PurchaseOrders.historyLog.status.${s.activity}`,fields:{date:_(s.createdAt)}})}),e("div",{className:"b2b-purchase-order-history-log-content__description",children:s.message})]}),l<b-1&&e("hr",{className:"b2b-purchase-order-history-log-content__divider"})]},s.uid)})}),!i&&e("div",{className:"b2b-purchase-order-history-log-content__actions",children:e(p,{variant:"secondary","aria-expanded":!t,"aria-label":t?d.showMoreLabel:d.showLessLabel,onClick:()=>{c(t?r.length:o)},children:e(h,{id:`PurchaseOrders.historyLog.buttons.${t?"viewMore":"viewLess"}`})})})]}):e("div",{className:"b2b-purchase-order-history-log-content",children:e(h,{id:"PurchaseOrders.historyLog.emptyText"})})},D=({withHeader:r=!0,withWrapper:o=!0,visibleRecordsLimit:a=5,className:c})=>{const{poDataLoading:t,purchaseOrderData:i}=w(),d=m({headerText:"PurchaseOrders.historyLog.headerText"}),s=(i==null?void 0:i.historyLog)||[],l=t?n(L,{rowGap:"medium","data-testid":"comment-list-loader",children:[e(u,{size:"small",variant:"row",fullWidth:!0,lines:1,style:{maxWidth:300}}),e(u,{size:"medium",variant:"row",fullWidth:!0,lines:1})]}):e(P,{historyLogRecords:s,visibleRecordsLimit:a});return n("div",{className:g(["b2b-purchase-order-history-log",c]),"data-testid":"order-history-log-container",children:[r?e(f,{headerText:d.headerText}):null,o?e(y,{variant:"secondary","data-testid":"orderHistoryLogCard",children:l}):l]})};export{D as PurchaseOrderHistoryLog,D as default};
//# sourceMappingURL=PurchaseOrderHistoryLog.js.map
