/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as t,jsxs as d,Fragment as Ue}from"@dropins/tools/preact-jsx-runtime.js";import*as ke from"@dropins/tools/preact-compat.js";import{useState as c,useRef as de,useEffect as _,useCallback as s,useMemo as f,createPortal as P}from"@dropins/tools/preact-compat.js";import{classes as m,VComponent as h,Slot as g}from"@dropins/tools/lib.js";import{f as Pe}from"../chunks/dateUtils.js";/* empty css                                     */import{Picker as Ma,Skeleton as ha,SkeletonRow as F,Modal as Na,Input as qa,TextArea as ze,Button as Y,InLineAlert as y}from"@dropins/tools/components.js";import{events as E}from"@dropins/tools/event-bus.js";import"@dropins/tools/preact.js";import"@dropins/tools/preact-hooks.js";import{I as Qa,C as J}from"../chunks/ItemsQuoted.js";/* empty css                        *//* empty css                                  */import{T as va}from"../chunks/TabbedContent.js";/* empty css                          */import{useText as We}from"@dropins/tools/i18n.js";import{S as Ta}from"../chunks/ShippingAddressDisplay.js";import{Q as Sa}from"../chunks/QuoteHistoryLog3.js";import{g as Ca,r as _a,c as ya,a as Ia,s as La,d as wa}from"../chunks/renameNegotiableQuote.js";import"../chunks/state.js";import{Q as Ea}from"../chunks/QuoteCommentsList3.js";import{a as U,S as K}from"../chunks/WarningFilled.js";import"../chunks/QuotePricesSummary.js";import"../chunks/removeNegotiableQuoteItems.js";import"../chunks/transform-quote.js";import"@dropins/tools/fetch-graphql.js";import"../chunks/NegotiableQuoteFragment.js";import"../chunks/QuoteHistoryLog.js";import"../chunks/transform-quote-template.js";import"../chunks/NegotiableQuoteTemplateFragment.js";import"../chunks/QuoteCommentsList.js";const xa=p=>ke.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-edit-2",...p},ke.createElement("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})),Ra=({className:p,dropdownPlaceholder:a,dropdownOptions:l,dropdownValue:N,handleDropdownChange:v,buttons:e,...u})=>{const q=l&&l.length>0,T=e&&e.length>0,S=(l==null?void 0:l.map(M=>({text:M.label,value:M.value})))||[];return S.unshift({text:a||"",value:""}),t("div",{className:"quote-management-actions-bar__container","data-testid":"actions-bar-container",children:d("div",{className:m(["quote-management-actions-bar",p]),"data-testid":"actions-bar",...u,children:[q&&t(Ma,{name:"dropdown",id:"dropdown",handleSelect:v,className:"quote-management-actions-bar__dropdown","data-testid":"dropdown",options:S,value:N||""},`actions-bar-picker-${N||"empty"}`),T&&t("div",{className:"quote-management-actions-bar__buttons","data-testid":"buttons-container",children:e==null?void 0:e.map((M,C)=>t(h,{node:M,className:m(["quote-management-actions-bar__button"])},C))})]})})},Ha=({className:p,loading:a,quoteName:l,quoteStatus:N,banner:v,details:e,actionBar:u,quoteContent:q,shippingInformationTitle:T,shippingInformation:S,quoteCommentsTitle:M,quoteComments:C,footer:b,...I})=>a?t(Fa,{}):d("div",{...I,className:m(["quote-management-manage-negotiable-quote",p]),children:[d("div",{className:m(["quote-management-manage-negotiable-quote__header"]),children:[l&&t(h,{node:l,className:m(["quote-management-manage-negotiable-quote__quote-name"])}),N&&t(h,{node:N,className:m(["quote-management-manage-negotiable-quote__quote-status"])})]}),v&&t(h,{node:v,className:m(["quote-management-manage-negotiable-quote__banner"])}),e&&t(h,{node:e,className:m(["quote-management-manage-negotiable-quote__details"])}),u&&t(h,{node:u,className:m(["quote-management-manage-negotiable-quote__action-bar"])}),q&&t(h,{node:q,className:m(["quote-management-manage-negotiable-quote__quote-content"])}),d("div",{"data-testid":"quote-shipping-information-container",className:m(["quote-management-manage-negotiable-quote__shipping-information-container"]),children:[T&&t(h,{node:T,className:m(["quote-management-manage-negotiable-quote__shipping-information-title"])}),S&&t(h,{node:S,className:m(["quote-management-manage-negotiable-quote__shipping-information"])})]}),d("div",{"data-testid":"quote-comments-container",className:m(["quote-management-manage-negotiable-quote__quote-comments-container"]),children:[M&&t(h,{node:M,className:m(["quote-management-manage-negotiable-quote__quote-comments-title"])}),C&&t(h,{node:C,className:m(["quote-management-manage-negotiable-quote__quote-comments"])})]}),t(h,{node:b,className:m(["quote-management-manage-negotiable-quote__footer"])})]}),Fa=()=>d(ha,{"data-testid":"manage-negotiable-quote-skeleton",children:[t(F,{variant:"heading",fullWidth:!0,size:"large"}),t(F,{variant:"row",fullWidth:!1,size:"small"}),t(F,{variant:"row",fullWidth:!1,size:"small"}),t(F,{variant:"row",fullWidth:!0}),t(F,{variant:"row",fullWidth:!0,size:"xlarge",lines:2}),t(F,{variant:"row",fullWidth:!1,size:"small"})]}),Da=({className:p,open:a,quoteName:l,renameReason:N,quoteNameError:v,errorBanner:e,successBanner:u,showCloseButton:q=!0,onQuoteNameChange:T,onRenameReasonChange:S,onSave:M,onClose:C})=>{const b=We({title:"NegotiableQuote.Manage.rename.title",quoteNameLabel:"NegotiableQuote.Manage.rename.quoteNameLabel",reasonLabel:"NegotiableQuote.Manage.rename.reasonLabel",renameButton:"NegotiableQuote.Manage.rename.renameButton",cancelButton:"NegotiableQuote.Manage.rename.cancelButton"});return a?d(Na,{open:a,size:"medium",title:t(Ue,{children:b.title}),onClose:C,clickToDismiss:!0,escapeToDismiss:!0,showCloseButton:q,className:m(["quote-management-rename-quote-modal",p]),"data-testid":"rename-quote-modal",children:[e&&t("div",{className:m(["quote-management-rename-quote-modal__error-banner"]),"data-testid":"rename-quote-modal-error-banner",children:e}),u&&t("div",{className:m(["quote-management-rename-quote-modal__success-banner"]),"data-testid":"rename-quote-modal-success-banner",children:u}),d("div",{className:m(["quote-management-rename-quote-modal__content"]),children:[d("div",{children:[t(qa,{name:"quoteName",type:"text",value:l,onInput:I=>T(I.target.value),floatingLabel:b.quoteNameLabel,required:!0,error:!!v}),v&&t("span",{className:m(["quote-management-rename-quote-modal__error-text"]),children:v})]}),t(ze,{name:"quoteComment",value:N,onInput:I=>S(I.target.value),label:b.reasonLabel,rows:3})]}),d("div",{className:m(["quote-management-rename-quote-modal__actions"]),children:[t(Y,{variant:"secondary",size:"medium",onClick:C,className:m(["quote-management-rename-quote-modal__cancel-button"]),children:b.cancelButton}),t(Y,{variant:"primary",size:"medium",onClick:M,className:m(["quote-management-rename-quote-modal__save-button"]),children:b.renameButton})]})]}):null},ft=({onActionsDropdownChange:p,slots:a,onActionsButtonClick:l,onSendForReview:N,...v})=>{const[e,u]=c(void 0),[q,T]=c(!0),[S,M]=c(!1),[C,b]=c(null),[I,z]=c(!1),[L,ue]=c(""),[D,Z]=c(!1),[ge,A]=c(!1),[be,ee]=c(!1),[fe,x]=c(""),[pe,B]=c(""),[Me,he]=c(!1),[Ne,qe]=c(!1),[Qe,W]=c(""),[ve,O]=c(""),[Te,ae]=c(!1),[V,j]=c(""),[te,$]=c(""),[ne,k]=c(""),[Oe,R]=c(""),[oe,G]=c(""),[re,Se]=c(new Set),Ce=de(re),ie=de(null),[H,le]=c(""),X=de(H),[_e,ye]=c(!1);_(()=>{Ce.current=re},[re]),_(()=>{X.current=H},[H]);const o=We({createdLabel:"NegotiableQuote.Manage.createdLabel",salesRepLabel:"NegotiableQuote.Manage.salesRepLabel",expiresLabel:"NegotiableQuote.Manage.expiresLabel",actionsLabel:"NegotiableQuote.Manage.actionsLabel",remove:"NegotiableQuote.Manage.actions.remove",close:"NegotiableQuote.Manage.actionButtons.close",delete:"NegotiableQuote.Manage.actionButtons.delete",print:"NegotiableQuote.Manage.actionButtons.print",createTemplate:"NegotiableQuote.Manage.actionButtons.createTemplate",createCopy:"NegotiableQuote.Manage.actionButtons.createCopy",shippingInformationTitle:"NegotiableQuote.Manage.shippingInformation.title",quoteCommentsTitle:"NegotiableQuote.Manage.quoteComments.title",quoteCommentsPlaceholder:"NegotiableQuote.Manage.quoteComments.placeholder",sendForReview:"NegotiableQuote.Manage.actionButtons.sendForReview",bannerTitle:"NegotiableQuote.Manage.bannerTitle",statusSubmitted:"NegotiableQuote.Manage.bannerStatusMessages.submitted",statusPending:"NegotiableQuote.Manage.bannerStatusMessages.pending",statusExpired:"NegotiableQuote.Manage.bannerStatusMessages.expired",errorFallback:"NegotiableQuote.Manage.confirmationModal.delete.errorFallback",closeSuccessMessage:"NegotiableQuote.Manage.confirmationModal.close.successDescription",closeModalTitle:"NegotiableQuote.Manage.actionButtons.close",closeModalMessage:"NegotiableQuote.Manage.confirmationModal.close.message",closeModalCancel:"NegotiableQuote.Manage.confirmationModal.cancel",closeModalConfirm:"NegotiableQuote.Manage.confirmationModal.close.confirm",closeModalConfirmLoading:"NegotiableQuote.Manage.confirmationModal.close.confirmLoading",closeModalSuccessHeading:"NegotiableQuote.Manage.confirmationModal.close.successHeading",createTemplateModalTitle:"NegotiableQuote.Manage.actionButtons.createTemplate",createTemplateModalMessage:"NegotiableQuote.Manage.confirmationModal.createTemplate.message",createTemplateModalCancel:"NegotiableQuote.Manage.confirmationModal.cancel",createTemplateModalConfirm:"NegotiableQuote.Manage.confirmationModal.createTemplate.confirm",createTemplateModalConfirmLoading:"NegotiableQuote.Manage.confirmationModal.createTemplate.confirmLoading",createTemplateModalSuccessHeading:"NegotiableQuote.Manage.confirmationModal.createTemplate.successHeading",createTemplateSuccessMessage:"NegotiableQuote.Manage.confirmationModal.createTemplate.successDescription",createTemplateModalErrorHeading:"NegotiableQuote.Manage.confirmationModal.createTemplate.errorHeading",createTemplateErrorFallback:"NegotiableQuote.Manage.confirmationModal.createTemplate.errorFallback",renameErrorHeading:"NegotiableQuote.Manage.rename.errorHeading",renameQuoteNameRequired:"NegotiableQuote.Manage.rename.quoteNameRequired",renameErrorDefault:"NegotiableQuote.Manage.rename.errorDefault",renameSuccessHeading:"NegotiableQuote.Manage.rename.successHeading",renameSuccessMessage:"NegotiableQuote.Manage.rename.successMessage",confirmationModalCancel:"NegotiableQuote.Manage.confirmationModal.cancel",confirmationModalDeleteTitle:"NegotiableQuote.Manage.confirmationModal.delete.title",confirmationModalDeleteMessage:"NegotiableQuote.Manage.confirmationModal.delete.message",confirmationModalDeleteConfirm:"NegotiableQuote.Manage.confirmationModal.delete.confirm",confirmationModalDeleteErrorHeading:"NegotiableQuote.Manage.confirmationModal.delete.errorHeading",confirmationModalDeleteErrorFallback:"NegotiableQuote.Manage.confirmationModal.delete.errorFallback",noItemsSelectedModalTitle:"NegotiableQuote.Manage.confirmationModal.noItemsSelected.title",noItemsSelectedModalMessage:"NegotiableQuote.Manage.confirmationModal.noItemsSelected.message",noItemsSelectedModalConfirm:"NegotiableQuote.Manage.confirmationModal.noItemsSelected.confirm",confirmationModalDeleteSuccessHeading:"NegotiableQuote.Manage.confirmationModal.delete.successHeading",confirmationModalDeleteSuccessDescription:"NegotiableQuote.Manage.confirmationModal.delete.successDescription"});_(()=>{const n=E.on("quote-management/quote-data",r=>{const{quote:i}=r;i&&(u(i),T(!1))},{eager:!0});return()=>n==null?void 0:n.off()},[]),_(()=>{const n=E.on("quote-management/shipping-address-set",r=>{const{quote:i}=r;i&&u(i)},{eager:!0});return()=>n==null?void 0:n.off()},[]),_(()=>{const n=E.on("quote-management/quote-sent-for-review",r=>{const{quote:i}=r;u(i),ue(""),Z(!1)},{eager:!0});return()=>n==null?void 0:n.off()},[]),_(()=>{const n=E.on("quote-management/quote-items-removed",r=>{const{quote:i,removedItemUids:Q}=r;i&&u(i),Q&&Se(w=>{const Be=new Set(w);return Q.forEach(pa=>Be.delete(pa)),Be})},{eager:!0});return()=>n==null?void 0:n.off()},[]);const Ie=s((n,r)=>{Se(i=>{const Q=new Set(i);return r?Q.add(n.uid):Q.delete(n.uid),Q})},[]),Le=s(n=>{const r=n.target.value,i=Ce.current;if(r==="remove"){if(le(r),X.current=r,i.size===0)ye(!0);else if(e&&ie.current){const Q=e.items.filter(w=>i.has(w.uid));ie.current(Q)}}p==null||p(n)},[p,e]),we=s(()=>{ye(!1),le(""),X.current=""},[]);_(()=>{const n=E.on("quote-management/negotiable-quote-closed",async r=>{ee(!1),B(""),x(o.closeSuccessMessage),u(i=>{var Q;return i!=null&&i.uid&&((Q=r.closedQuoteUids)!=null&&Q.includes(i.uid))&&Ca(i.uid).then(w=>{u(w)}).catch(w=>{console.warn("Failed to refresh quote data after closure:",w)}),i}),setTimeout(()=>{A(!1),x("")},2e3)},{eager:!0});return()=>n==null?void 0:n.off()},[o.closeSuccessMessage]),_(()=>{const n=E.on("quote-management/negotiable-quote-close-error",r=>{console.log("Close error event received:",r),ee(!1),x("");const i=r.error.message||o.errorFallback;B(i)},{eager:!0});return()=>n==null?void 0:n.off()},[o.errorFallback]),_(()=>{const n=E.on("quote-management/quote-renamed",r=>{const{quote:i}=r;u(i),k(""),R(""),G(o.renameSuccessMessage),setTimeout(()=>{ae(!1),j(""),$(""),G("")},2e3)},{eager:!0});return()=>n==null?void 0:n.off()},[o.renameSuccessMessage]);const Ee=s(()=>{j((e==null?void 0:e.name)||""),$(""),k(""),R(""),G(""),ae(!0)},[e]),Ve=s(()=>{ae(!1),j(""),$(""),k(""),R(""),G("")},[]),je=s(n=>{j(n),n.trim()&&R("")},[]),$e=s(async()=>{if(!V.trim()){R(o.renameQuoteNameRequired);return}try{k(""),R(""),await _a({quoteUid:e.uid,quoteName:V,quoteComment:te.trim()||void 0})}catch(n){k(n.message||o.renameErrorDefault)}},[e,V,te,o.renameQuoteNameRequired,o.renameErrorDefault]),Ge=f(()=>{const n=e&&(e.lockedForEditing===!0||e.lockedForEditing===void 0&&(e.status==="SUBMITTED"||e.status==="PENDING"||e.status==="ORDERED"||e.status==="CLOSED"));return t(g,{name:"QuoteName",slot:a==null?void 0:a.QuoteName,context:{quoteName:e==null?void 0:e.name,quoteData:e},children:d("div",{className:"quote-management-manage-negotiable-quote__quote-name-wrapper",children:[t("h1",{"data-testid":"quote-name",className:"quote-management-manage-negotiable-quote__quote-name-title",children:e==null?void 0:e.name}),t("button",{onClick:Ee,disabled:n,"data-testid":"rename-quote-button",className:"quote-management-manage-negotiable-quote__rename-button","aria-label":"Rename quote",children:t(xa,{})})]})})},[a==null?void 0:a.QuoteName,e,Ee]),Xe=f(()=>t(g,{name:"QuoteStatus",slot:a==null?void 0:a.QuoteStatus,context:{quoteStatus:e==null?void 0:e.status,quoteData:e},children:t("div",{"data-testid":"quote-status",children:e==null?void 0:e.status})}),[a==null?void 0:a.QuoteStatus,e]),xe=s(n=>{switch(n){case"SUBMITTED":return o.statusSubmitted;case"PENDING":return o.statusPending;case"EXPIRED":return o.statusExpired;default:return null}},[o])(e==null?void 0:e.status),Re=xe&&t(y,{type:"warning",variant:"secondary",icon:t(U,{}),heading:o.bannerTitle,description:xe}),Je=Re&&t(g,{name:"Banner","data-testid":"banner",slot:a==null?void 0:a.Banner,context:{quoteData:e},children:Re}),Ke=f(()=>{if(!e)return;const n=e.expirationDate?Pe(e.expirationDate,"short"):void 0;return d(g,{name:"Details",slot:a==null?void 0:a.Details,context:{quoteData:e},children:[d("div",{className:"quote-management-manage-negotiable-quote__detail",children:[t("span",{className:"quote-management-manage-negotiable-quote__detail-title","data-testid":"created-label",children:o.createdLabel}),d("span",{className:"quote-management-manage-negotiable-quote__detail-content","data-testid":"created-value",children:[Pe(e.createdAt,"short")," (",e.buyer.firstname," ",e.buyer.lastname,")"]})]}),d("div",{className:"quote-management-manage-negotiable-quote__detail",children:[t("span",{className:"quote-management-manage-negotiable-quote__detail-title","data-testid":"sales-rep-label",children:o.salesRepLabel}),t("span",{className:"quote-management-manage-negotiable-quote__detail-content","data-testid":"sales-rep-value",children:e.salesRepName})]}),d("div",{className:"quote-management-manage-negotiable-quote__detail",children:[t("span",{className:"quote-management-manage-negotiable-quote__detail-title","data-testid":"expires-label",children:o.expiresLabel}),t("span",{className:"quote-management-manage-negotiable-quote__detail-content","data-testid":"expires-value",children:n})]})]})},[a==null?void 0:a.Details,o,e]),He=f(()=>[{label:o.close,value:"close",disabled:!(e!=null&&e.canClose)},{label:o.delete,value:"delete",disabled:!(e!=null&&e.canDelete)},{label:o.print,value:"print"},{label:o.createTemplate,value:"createTemplate"},{label:o.createCopy,value:"createCopy"}],[o,e==null?void 0:e.canDelete,e==null?void 0:e.canClose]),Ye=f(()=>{const n=r=>{switch(r){case"close":A(!0),B(""),x(""),l==null||l(r);break;case"delete":M(!0),l==null||l(r);break;case"print":l==null||l(r);break;case"createTemplate":he(!0),O(""),W(""),l==null||l(r);break;case"createCopy":l==null||l(r);break}};return t(g,{name:"ActionBar",slot:a==null?void 0:a.ActionBar,context:{quoteData:e,actionsBarDropdownValue:H},children:t(Ra,{dropdownPlaceholder:o.actionsLabel,dropdownOptions:[{label:o.remove,value:"remove"}],dropdownValue:H,handleDropdownChange:Le,buttons:He.map(r=>t(Y,{variant:"tertiary",onClick:()=>n(r.value),"data-testid":`actions-bar-${r.value}-button`,"data-action":r.value,disabled:r.disabled,children:r.label},r.value))})})},[He,o,a==null?void 0:a.ActionBar,e,Le,l,H]),Ze=f(()=>t(g,{name:"QuoteContent",slot:a==null?void 0:a.QuoteContent,context:{quoteData:e},children:t(va,{tabs:new Map([["items-quoted","Items Quoted"],["comments","Comments"],["history-log","History Log"]]),tabsContent:new Map([["items-quoted",t(g,{name:"ItemsQuotedTab",slot:a==null?void 0:a.ItemsQuotedTab,context:{quoteData:e},children:t(Qa,{quoteData:e,onItemCheckboxChange:Ie,onRemoveItemsRef:n=>{ie.current=n},onRemoveModalStateChange:n=>{!n&&X.current==="remove"&&le("")}})},"items-quoted")],["comments",t(g,{name:"CommentsTab",slot:a==null?void 0:a.CommentsTab,context:{quoteData:e},children:t(Ea,{quoteData:e})},"comments")],["history-log",t(g,{name:"HistoryLogTab",slot:a==null?void 0:a.HistoryLogTab,context:{quoteData:e},children:t(Sa,{quoteData:e})},"history-log")]])})}),[a==null?void 0:a.QuoteContent,a==null?void 0:a.HistoryLogTab,a==null?void 0:a.CommentsTab,a==null?void 0:a.ItemsQuotedTab,e,Ie]),Ae=f(()=>t(g,{name:"ShippingInformationTitle",slot:a==null?void 0:a.ShippingInformationTitle,context:{quoteData:e},children:t("h2",{children:o.shippingInformationTitle})}),[a==null?void 0:a.ShippingInformationTitle,e,o]),ea=f(()=>t(g,{name:"ShippingInformation",slot:a==null?void 0:a.ShippingInformation,context:{quoteData:e,loading:q,setLoading:T},children:t(Ta,{quoteData:e,loading:q,"data-testid":"manage-quote-shipping-address"})}),[a==null?void 0:a.ShippingInformation,e,q,T]),aa=f(()=>t(g,{name:"QuoteCommentsTitle",slot:a==null?void 0:a.QuoteCommentsTitle,context:{quoteData:e},children:t("h2",{children:o.quoteCommentsTitle})}),[a==null?void 0:a.QuoteCommentsTitle,o,e]),ta=f(()=>t(g,{name:"QuoteComments",slot:a==null?void 0:a.QuoteComments,context:{quoteData:e},children:t(ze,{name:"quoteComments",placeholder:o.quoteCommentsPlaceholder,rows:3,value:L,onInput:n=>{ue(n.target.value)},disabled:!(e!=null&&e.canSendForReview)||D})}),[a==null?void 0:a.QuoteComments,o,e,L,D]),na=s(async()=>{if(e!=null&&e.uid){ee(!0),B(""),x("");try{await ya({quoteUids:[e.uid]})}catch(n){console.error("Failed to close quote:",n)}}},[e]),oa=s(()=>{A(!1),B(""),x("")},[]),ra=s(async()=>{if(e!=null&&e.uid){qe(!0),O(""),W("");try{await Ia(e.uid),W(o.createTemplateSuccessMessage)}catch(n){console.error("Failed to create quote template:",n);const r=n instanceof Error?n.message:o.createTemplateErrorFallback;O(r)}finally{qe(!1)}}},[e,o.createTemplateSuccessMessage,o.createTemplateErrorFallback]),ia=s(()=>{he(!1),O(""),W("")},[]),Fe=s(async()=>{if(N){N({quoteData:e,comment:L.trim()||void 0});return}Z(!0);try{await La({quoteUid:e.uid,comment:L.trim()||void 0})}catch(n){console.error("Failed to send quote for review:",n),Z(!1)}},[e,N,L]),la=f(()=>t(g,{name:"Footer",slot:a==null?void 0:a.Footer,context:{quoteData:e,comment:L,isSubmitting:D},children:t(Y,{variant:"primary",onClick:Fe,"data-testid":"send-for-review-button",disabled:!(e!=null&&e.canSendForReview)||D,children:o.sendForReview})}),[a==null?void 0:a.Footer,o,e,L,D,Fe]),ma=f(()=>ne?t(y,{type:"error",variant:"primary",icon:t(U,{color:"var(--color-error)"}),heading:o.renameErrorHeading,description:ne}):void 0,[ne,o.renameErrorHeading]),ca=f(()=>oe?t(y,{type:"success",variant:"primary",icon:t(K,{}),heading:o.renameSuccessHeading,description:oe}):void 0,[oe,o.renameSuccessHeading]),me=s(n=>n.errors&&Array.isArray(n.errors)&&n.errors.length>0?n.errors[0].message||o.confirmationModalDeleteErrorFallback:(n==null?void 0:n.message)||o.confirmationModalDeleteErrorFallback,[o.confirmationModalDeleteErrorFallback]),sa=s(()=>{M(!1),b(null),z(!1)},[]),da=s(async()=>{if(e!=null&&e.uid){b(null),z(!1);try{const{operationResults:n}=await wa(e.uid),r=n.find(i=>i.__typename==="DeleteNegotiableQuoteOperationFailure");if(r){const i=me(r);b(i);return}z(!0)}catch(n){const r=me(n);b(r)}}},[e,me]),ua=s(()=>{b(null)},[]),ga=s(()=>{z(!1)},[]),ba=C?t(y,{type:"error",variant:"primary",icon:t(U,{}),heading:o.confirmationModalDeleteErrorHeading,description:C,onDismiss:ua,"data-testid":"confirmation-modal-error-banner"}):null,De=(I?t(y,{type:"success",variant:"primary",icon:t(K,{}),heading:o.confirmationModalDeleteSuccessHeading,description:o.confirmationModalDeleteSuccessDescription,onDismiss:ga,"data-testid":"confirmation-modal-success-banner"}):null)||ba,fa={...v,loading:q,quoteName:Ge,quoteStatus:Xe,banner:Je||void 0,details:Ke,actionBar:Ye,quoteContent:Ze,shippingInformationTitle:Ae,shippingInformation:ea,quoteCommentsTitle:aa,quoteComments:ta,footer:la};let ce=null;fe?ce=t(y,{type:"success",variant:"primary",icon:t(K,{}),heading:o.closeModalSuccessHeading,description:fe,"data-testid":"close-quote-success-banner"}):pe&&(ce=t(y,{type:"error",variant:"primary",icon:t(U,{}),heading:o.confirmationModalDeleteErrorHeading,description:pe,"data-testid":"close-quote-error-banner"}));let se=null;return Qe?se=t(y,{type:"success",variant:"primary",icon:t(K,{}),heading:o.createTemplateModalSuccessHeading,description:Qe,"data-testid":"create-template-success-banner"}):ve&&(se=t(y,{type:"error",variant:"primary",icon:t(U,{}),heading:o.createTemplateModalErrorHeading,description:ve,"data-testid":"create-template-error-banner"})),d(Ue,{children:[t(Ha,{...fa}),Te&&P(t(Da,{open:Te,quoteName:V,renameReason:te,quoteNameError:Oe,errorBanner:ma,successBanner:ca,onQuoteNameChange:je,onRenameReasonChange:$,onSave:$e,onClose:Ve}),document.body),S&&P(t(J,{open:S,title:o.confirmationModalDeleteTitle,message:o.confirmationModalDeleteMessage,cancelLabel:o.confirmationModalCancel,confirmLabel:o.confirmationModalDeleteConfirm,onCancel:sa,onConfirm:da,showCloseButton:!De,confirmationBanner:De}),document.body),ge&&P(t(J,{open:ge,title:o.closeModalTitle,message:o.closeModalMessage,cancelLabel:o.closeModalCancel,confirmLabel:be?o.closeModalConfirmLoading:o.closeModalConfirm,onCancel:oa,onConfirm:be?void 0:na,showCloseButton:!0,confirmationBanner:ce,"data-testid":"close-quote-confirmation-modal"}),document.body),Me&&P(t(J,{open:Me,title:o.createTemplateModalTitle,message:o.createTemplateModalMessage,cancelLabel:o.createTemplateModalCancel,confirmLabel:Ne?o.createTemplateModalConfirmLoading:o.createTemplateModalConfirm,onCancel:ia,onConfirm:Ne?void 0:ra,showCloseButton:!0,confirmationBanner:se,"data-testid":"create-template-confirmation-modal"}),document.body),_e&&P(t(J,{open:_e,title:o.noItemsSelectedModalTitle,message:o.noItemsSelectedModalMessage,confirmLabel:o.noItemsSelectedModalConfirm,onConfirm:we,onClose:we,showCloseButton:!0,"data-testid":"no-items-selected-modal"}),document.body)]})};export{ft as ManageNegotiableQuote,ft as default};
//# sourceMappingURL=ManageNegotiableQuote.js.map
