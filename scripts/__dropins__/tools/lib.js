/*! Copyright 2025 Adobe
All Rights Reserved. */
import{S as M}from"./chunks/vcomponent.js";import{R as ee,V as re,c as oe,g as te}from"./chunks/vcomponent.js";import{d as E}from"./chunks/cjs.js";import{d as se,a as ie,i as le}from"./chunks/deviceUtils.js";import{C as ae,I as ce,i as ue}from"./chunks/initializer.js";import{IntlContext as k}from"./i18n.js";import{x as P,A as R,h as _,T as L,E as v,q as f,_ as V,y as D}from"./chunks/icons/Add.js";import{g as fe,s as pe}from"./chunks/image-params-keymap.js";import{g as Se,s as me}from"./chunks/locale-config.js";import{g as ye}from"./chunks/get-path-value.js";import"./preact-jsx-runtime.js";import"./signals.js";const U=r=>{const o=new FormData(r);return Object.fromEntries(o)},A=r=>{const o=new FormData(r),s=Object.fromEntries(o);return Object.entries(s).reduce((n,[d])=>{const c=r.elements[d];return c!=null&&c.validationMessage?{...n,[d]:c.validationMessage}:{...n}},{})},F={arrayMerge:(r,o,s)=>{const l=r.slice();return o.forEach((n,d)=>{typeof l[d]>"u"?l[d]=s.cloneUnlessOtherwiseSpecified(n,s):s.isMergeableObject(n)?l[d]=E(r[d],n,s):r.indexOf(n)===-1&&l.push(n)}),l}};function W(r,o){return o?E(r,o,F):r}const H=r=>r.replace("_","-");function q(r,o={},s,l,n,d="div"){const c=P(M),p=R(null),m=R("pending"),h=R([]),[y,I]=_({children:[l]}),[b,$]=_({}),C=L(()=>({get:t=>b[t],set:(t,e)=>{$({...C,[t]:e})}}),[b]),{intl:B}=P(k);o.dictionary=B.dictionary,o._setProps=t=>{I(e=>{const i=typeof t=="function"?t(e):t;if(n){const a=v(n(e),{key:"render"}),S=e.children.findIndex(g=>(g==null?void 0:g.key)==="render");e.children[S]=a}return i})};const u=f(t=>{typeof t=="function"?h.current.push(t):console.warn("Skipped: Invalid _registerMethod",t)},[]);o._registerMethod=u;const w=f(t=>V(d,{"data-slot-html-element":t.tagName.toLowerCase(),ref:e=>{e==null||e.appendChild(t)}},null),[d]);o._htmlElementToVNode=w,o.getSlotElement=f(t=>{var i,a;const e=(i=p.current)==null?void 0:i.querySelector(`[data-slot-key="${t}"]`);if(N(`ðŸŸ¦ "${r}" Slot getSlotElement: ${t}`,(a=p.current)==null?void 0:a.cloneNode(!0),e==null?void 0:e.cloneNode(!0)),!!e)return{appendChild:S=>{e.appendChild(S)},prependChild:S=>{e.insertBefore(S,e.firstChild)},appendSibling:S=>{const g=e.parentNode;g==null||g.insertBefore(S,e.nextSibling)},prependSibling:S=>{const g=e.parentNode;g==null||g.insertBefore(S,e)}}},[r]),o.onRender=f(t=>{h.current.push(t)},[]),o.onChange=o.onRender,o.replaceWith=f(t=>{u(e=>{const i=w(t);e._setProps({children:[i]})})},[w,u]),o.appendChild=f(t=>{u(e=>{const i=w(t);e._setProps(a=>({...a,children:[...a.children,i]}))})},[w,u]),o.prependChild=f(t=>{u(e=>{const i=w(t);e._setProps(a=>({...a,children:[i,...a.children]}))})},[w,u]),o.appendSibling=f(t=>{u(()=>{var i,a;const e=(i=p.current)==null?void 0:i.parentNode;e==null||e.insertBefore(t,((a=p.current)==null?void 0:a.nextSibling)??null)})},[u]),o.prependSibling=f(t=>{u(()=>{var i;const e=(i=p.current)==null?void 0:i.parentNode;e==null||e.insertBefore(t,p.current)})},[u]);const O=f(async()=>{if(m.current==="loading")return;m.current="loading",N(`ðŸŸ¨ "${r}" Slot Rendered`);const t=n?v(n(y),{key:"render"}):null;I({children:[t??l]}),h.current.forEach(e=>{e(o,C)}),m.current="ready"},[l,o,r,y,n,C]),j=f(async()=>{if(s)try{m.current="loading",N(`ðŸŸ© "${r}" Slot Initialized`),await s(o,p.current)}catch(t){console.error(`Error in "${s.name}" Slot callback`,t)}finally{m.current="ready",await O()}},[s,o,O,r]);return D(()=>{j().finally(()=>{c&&c.value.has(r)&&(c.value.delete(r),c.value=new Set(c.value))})},[]),D(()=>{O()},[JSON.stringify(o),JSON.stringify(b)]),[p,y]}function X({name:r,lazy:o=!1,context:s,slot:l,children:n,render:d,slotTag:c="div",contentTag:p="div",...m}){const h=P(M),[y,I]=q(r,s,l,n,d,p);return L(()=>{if(!r)return console.warn('Slot "name" is required');h&&o===!1&&(h.value.add(r),h.value=new Set(h.value))},[r,o,h]),V(c,{...m,ref:y,"data-slot":r},I.children)}window.DROPINS=window.DROPINS||{};window.DROPINS.showSlots=async r=>{window.sessionStorage.setItem("dropin-debugger--show-slots",r.toString()),document.body.classList.toggle("dropin-debugger--show-slots",r)};let N=()=>{};window.DROPINS.logSlots=async r=>{window.sessionStorage.setItem("dropin-debugger--log-slots",r.toString()),N=r?(...o)=>console.log(...o):()=>{}};window.DROPINS.showSlots(window.sessionStorage.getItem("dropin-debugger--show-slots")==="true");window.DROPINS.logSlots(window.sessionStorage.getItem("dropin-debugger--log-slots")==="true");function Y(r){const o=document.cookie.split(";");let s;return o.forEach(l=>{const[n,d]=l.trim().split("=");n===r&&(s=decodeURIComponent(d))}),s}export{ae as Config,ce as Initializer,ee as Render,X as Slot,M as SlotQueueContext,re as VComponent,oe as classes,se as debounce,E as deepmerge,te as generateSrcset,Y as getCookie,A as getFormErrors,U as getFormValues,Se as getGlobalLocale,fe as getImageParamsKeyMap,ye as getPathValue,ue as initializers,ie as isIOSMobileDevice,le as isNumber,W as merge,me as setGlobalLocale,pe as setImageParamsKeyMap,H as toLanguageTag,q as useSlot};
//# sourceMappingURL=lib.js.map
