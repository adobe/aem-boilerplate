/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as i,jsxs as o,Fragment as F}from"@dropins/tools/preact-jsx-runtime.js";import{useState as f,useCallback as A,useEffect as B,useMemo as E,Fragment as R}from"@dropins/tools/preact-compat.js";import{classes as I,Slot as V,VComponent as Y}from"@dropins/tools/lib.js";import{IllustratedMessage as q,Button as G,Icon as J,SkeletonRow as K,Skeleton as O}from"@dropins/tools/components.js";import{W as Q}from"../chunks/WishlistItem.js";import{events as H}from"@dropins/tools/event-bus.js";import{s as $}from"../chunks/removeProductsFromWishlist.js";import{useText as z,Text as j}from"@dropins/tools/i18n.js";import{W as U}from"../chunks/WishlistAlert.js";import{S as X}from"../chunks/Heart.js";import"../chunks/Trash.js";import"@dropins/tools/fetch-graphql.js";import"../chunks/HeartFilled.js";const Z=({className:r,children:t,ctaLinkURL:e,...m})=>{const h=z({emptyWishlist:"Wishlist.EmptyWishlist.heading",message:"Wishlist.EmptyWishlist.message",cta:"Wishlist.EmptyWishlist.cta"});return i("div",{...m,className:I(["wishlist-empty-wishlist",r]),children:i(q,{className:I(["wishlist-empty-wishlist__wrapper",r]),"data-testid":"wishlist-empty-wishlist",heading:h.emptyWishlist,icon:i(J,{className:"wishlist-empty-wishlist__icon",source:X}),message:i("p",{children:h.message}),action:e?i(G,{"data-testid":"wishlist-empty-wishlist-button",size:"medium",variant:"primary",type:"submit",href:e,children:h.cta},"routeHome"):void 0})})},b=()=>i(K,{children:`
      <svg
          width="100%"
          height="100%"
          viewBox="0 0 288 658"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          preserveAspectRatio="xMinYMin meet"
        >
        <rect x="6" y="24" width="282px" height="480" rx="8" fill="#E8E8E8" />
        <rect x="6" y="522" width="280" height="22" rx="4" fill="#E8E8E8" />
        <rect x="6" y="556" width="132" height="22" rx="4" fill="#E8E8E8" />
        <rect x="6" y="592" width="280" height="48" rx="24" fill="#D9D9D9" />
      </svg>
    `}),C=()=>o(O,{"data-testid":"wishlist-loader",children:[i(b,{}),i(b,{}),i(b,{})]}),mi=({routeEmptyWishlistCTA:r,routeToWishlist:t,moveProdToCart:e,routeProdDetailPage:m,getProductData:h,getRefinedProduct:_,slots:W,...x})=>{const[g,S]=f(null),[y,n]=f($.authenticated),[k,p]=f($.isLoading),v=l=>n(l),[w,c]=f(null),N=A(l=>{const{action:d,item:a}=l;c(i(U,{action:d,item:a,routeToWishlist:t}))},[t]);return B(()=>{const l=H.on("authenticated",v),d=H.on("wishlist/alert",s=>N(s)),a=H.on("wishlist/data",s=>{S(s),p(!1)},{eager:!0});return()=>{l==null||l.off(),a==null||a.off(),d==null||d.off()}},[N]),i(T,{...x,wishlistData:g,wishlistAlert:w,routeEmptyWishlistCTA:r,moveProdToCart:e,getProductData:h,getRefinedProduct:_,isLoggedIn:y,isLoading:k,routeProdDetailPage:m,slots:W})},T=({className:r,wishlistData:t,wishlistAlert:e,isLoggedIn:m,isLoading:h,moveProdToCart:_,getProductData:W,getRefinedProduct:x,routeEmptyWishlistCTA:g,onLoginClick:S,routeProdDetailPage:y,slots:n,...k})=>{const[p,v]=f(e),w=z({wishlistHeading:"Wishlist.Wishlist.heading",wishlistLoadingHeading:"Wishlist.Wishlist.loading"}),c=E(()=>{var s;return((s=t==null?void 0:t.items)==null?void 0:s.length)>0?t.items.map(u=>i(Q,{item:u,getProductData:W,getRefinedProduct:x,moveProdToCart:_,routeProdDetailPage:y,imageNode:n!=null&&n.image?({defaultImageProps:L})=>i(V,{name:"image",slot:n.image,context:{defaultImageProps:L,item:u}}):void 0},u.id)):null},[t,_,W,x,y,n==null?void 0:n.image]);B(()=>{if(e){v(e);const s=setTimeout(()=>{v(null)},5e3);return()=>clearTimeout(s)}},[e]);const N=E(()=>p?i(Y,{node:p,className:"wishlist-wishlist__alert"}):null,[p]),l=()=>o(F,{children:[i("div",{className:"wishlist-wishlist__heading","data-testid":"wishlist-heading-wrapper",children:i("h1",{className:"wishlist-wishlist__heading-text","data-testid":"loader-wishlist-heading",children:w.wishlistLoadingHeading})}),i(C,{})]}),d=()=>c?o(F,{children:[a,i("div",{className:"wishlist-wishlist__content",children:c})]}):i("div",{className:I(["wishlist-wishlist__content","wishlist-wishlist__content--empty"]),children:o("div",{children:[i(Z,{"data-testid":"empty-wishlist",ctaLinkURL:g==null?void 0:g()}),!m&&i(P,{onLoginClick:S})]})}),a=E(()=>{var s;return c?i("div",{className:"wishlist-wishlist__heading","data-testid":"wishlist-heading-wrapper",children:i("h1",{className:"wishlist-wishlist__heading-text","data-testid":"default-wishlist-heading",children:(s=w.wishlistHeading)==null?void 0:s.split(" {count}").map((u,L)=>{var M;return o(R,{children:[u,L===0&&i("span",{className:"wishlist-wishlist__heading-count","data-testid":"wishlist-heading-count",children:`${t==null?void 0:t.items_count} products`})]},((M=t==null?void 0:t.id)==null?void 0:M.toString())+L)})})}):null},[w,c,t]);return o("div",{...k,className:I(["wishlist-wishlist",r]),children:[N,h?l():d()]})},P=({onLoginClick:r})=>o("div",{className:"wishlist-login__sign-in",children:[i("a",{"data-testid":"log-in-link",className:"wishlist-login__link",href:"",rel:"noreferrer",onClick:r,role:"button",children:i(j,{id:"Wishlist.Login.logIn"})}),i(j,{id:"Wishlist.Login.sync"})]});export{mi as Wishlist,mi as default};
//# sourceMappingURL=Wishlist.js.map
