/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as a,jsxs as g,Fragment as U}from"@dropins/tools/preact-jsx-runtime.js";import{classes as Q,Slot as ye}from"@dropins/tools/lib.js";import{Card as q,Button as K,Field as M,Input as F,Picker as ue,Header as ge,InLineAlert as ve,ProgressSpinner as Ae,Skeleton as Ce,SkeletonRow as G}from"@dropins/tools/components.js";import{useState as T,useEffect as B,useMemo as Y,useRef as J,useCallback as R}from"@dropins/tools/preact-hooks.js";import{events as pe}from"@dropins/tools/event-bus.js";import{g as he,v as Ne,a as _e,u as Ee}from"../chunks/getCountries.js";import{useText as W}from"@dropins/tools/i18n.js";import*as V from"@dropins/tools/preact-compat.js";import"@dropins/tools/fetch-graphql.js";const be=({company:t,slots:e,showEditForm:l,handleShowEditForm:u})=>{const o=W({editButton:"Company.shared.buttons.edit",noDataMessage:"Company.CompanyProfile.companyProfileCard.noDataMessage",companyName:"Company.shared.fields.companyName",email:"Company.shared.fields.email",legalName:"Company.shared.fields.legalName",vatTaxId:"Company.shared.fields.vatTaxId",resellerId:"Company.shared.fields.resellerId",legalAddress:"Company.shared.fields.legalAddress",contacts:"Company.CompanyProfile.companyProfileCard.contacts",companyAdministrator:"Company.CompanyProfile.companyProfileCard.companyAdministrator",salesRepresentative:"Company.CompanyProfile.companyProfileCard.salesRepresentative",paymentInformation:"Company.CompanyProfile.companyProfileCard.paymentInformation",shippingInformation:"Company.CompanyProfile.companyProfileCard.shippingInformation",availablePaymentMethods:"Company.CompanyProfile.companyProfileCard.availablePaymentMethods",availableShippingMethods:"Company.CompanyProfile.companyProfileCard.availableShippingMethods",noPaymentMethods:"Company.CompanyProfile.companyProfileCard.noPaymentMethods",noShippingMethods:"Company.CompanyProfile.companyProfileCard.noShippingMethods"});if(!t)return a(q,{variant:"secondary",className:"account-company-profile-card",children:a("div",{className:"account-company-profile-card__wrapper",children:a("div",{className:"account-company-profile-card__content",children:a("div",{className:"account-company-profile-card__no-data",children:a("p",{children:o.noDataMessage})})})})});const n=t.permissionsFlags||{canViewAccount:!0,canViewAddress:!0,canViewContacts:!0,canViewPaymentInformation:!0,canViewShippingInformation:!0},r=[n.canViewAccount?{name:"name",label:o.companyName,value:t.name||""}:null,n.canViewAccount?{name:"email",label:o.email,value:t.email||""}:null,n.canViewAccount?{name:"legalName",label:o.legalName,value:t.legalName||""}:null,n.canViewAccount?{name:"vatTaxId",label:o.vatTaxId,value:t.vatTaxId||""}:null,n.canViewAccount?{name:"resellerId",label:o.resellerId,value:t.resellerId||""}:null].filter(Boolean);return a(q,{variant:"secondary",className:Q(["account-company-profile-card",["account-company-profile-card-short",l]]),children:g("div",{className:"account-company-profile-card__wrapper",children:[a("div",{className:"account-company-profile-card__actions",children:(t.canEditAccount||t.canEditAddress)&&a(K,{type:"button",variant:"tertiary",onClick:u,children:o.editButton})}),a("div",{className:"account-company-profile-card__content",children:(()=>{var y,s;const C=g(U,{children:[r.map((i,p)=>{if(!i.value)return null;const v=i.label?`${i.label}: ${i.value}`:i.value;return a("p",{"data-testid":`${i.name}_${p}`,children:v},`${i.name}_${p}`)}),n.canViewAddress&&t.legalAddress&&g("div",{className:"company-legal-address",children:[a("p",{children:g("strong",{children:[o.legalAddress,":"]})}),(y=t.legalAddress.street)==null?void 0:y.map((i,p)=>a("p",{children:i},p)),g("p",{children:[t.legalAddress.city,", ",(s=t.legalAddress.region)==null?void 0:s.region," ",t.legalAddress.postcode]}),a("p",{children:t.legalAddress.countryCode}),t.legalAddress.telephone&&g("p",{children:["Phone: ",t.legalAddress.telephone]})]}),n.canViewContacts&&(t.companyAdmin||t.salesRepresentative)&&g("div",{className:"company-contacts",children:[a("p",{children:g("strong",{children:[o.contacts,":"]})}),t.companyAdmin&&g("div",{className:"company-contact",children:[a("p",{children:g("strong",{children:[o.companyAdministrator,":"]})}),g("p",{children:[t.companyAdmin.firstname," ",t.companyAdmin.lastname]}),t.companyAdmin.jobTitle&&a("p",{children:t.companyAdmin.jobTitle}),a("p",{children:t.companyAdmin.email})]}),t.salesRepresentative&&g("div",{className:"company-contact",children:[a("p",{children:g("strong",{children:[o.salesRepresentative,":"]})}),g("p",{children:[t.salesRepresentative.firstname," ",t.salesRepresentative.lastname]}),a("p",{children:t.salesRepresentative.email})]})]}),n.canViewPaymentInformation&&g("div",{className:"company-payment-methods",children:[a("p",{children:g("strong",{children:[o.paymentInformation,":"]})}),t.availablePaymentMethods&&t.availablePaymentMethods.length>0?g(U,{children:[a("p",{children:g("strong",{children:[o.availablePaymentMethods,":"]})}),a("ul",{className:"payment-methods-list",children:t.availablePaymentMethods.map((i,p)=>a("li",{children:i.title},`payment_${p}`))})]}):a("div",{className:"message message-notice notice",children:a("div",{children:o.noPaymentMethods})})]}),n.canViewShippingInformation&&g("div",{className:"company-shipping-methods",children:[a("p",{children:g("strong",{children:[o.shippingInformation,":"]})}),t.availableShippingMethods&&t.availableShippingMethods.length>0?g(U,{children:[a("p",{children:g("strong",{children:[o.availableShippingMethods,":"]})}),a("ul",{className:"shipping-methods-list",children:t.availableShippingMethods.map((i,p)=>a("li",{children:i.title},`shipping_${p}`))})]}):a("div",{className:"message message-notice notice",children:a("div",{children:o.noShippingMethods})})]})]});return e!=null&&e.CompanyData?a(ye,{name:"CompanyData",slot:e.CompanyData,context:{companyData:r,Default:C}}):C})()})]})})},we=t=>{const[e,l]=T(null),[u,o]=T(!0);B(()=>{let s=!0;return he().then(({availableCountries:i,countriesWithRequiredRegion:p,optionalZipCountries:v})=>{s&&(l({availableCountries:i,countriesWithRequiredRegion:p,optionalZipCountries:v}),o(!1))}).catch(()=>{s&&o(!1)}),()=>{s=!1}},[]);const n=Y(()=>(e==null?void 0:e.availableCountries)||[],[e]),r=Y(()=>{if(!t||!e)return[];const s=e.availableCountries.find(i=>i.value===t);return!(s!=null&&s.availableRegions)||s.availableRegions.length===0?[]:s.availableRegions.map(i=>({text:i.name,value:`${i.code},${i.id}`}))},[t,e]),C=Y(()=>!t||!e?!1:e.countriesWithRequiredRegion.includes(t),[t,e]),y=Y(()=>r.length>0,[r]);return{countryOptions:n,regionOptions:r,isRegionRequired:C,hasRegionOptions:y,loadingCountries:u}},Ie=({loading:t,value:e,errors:l,touched:u,onChange:o,onBlur:n,namePrefix:r="",fieldPathPrefix:C=""})=>{const y=W({companyName:"Company.shared.fields.companyName",email:"Company.shared.fields.email",legalName:"Company.shared.fields.legalName",vatTaxId:"Company.shared.fields.vatTaxId",resellerId:"Company.shared.fields.resellerId"}),s=r?`${r}_`:"",i=p=>C?`${C}.${p}`:p;return g("div",{className:"account-edit-company-profile-form__group",children:[a(M,{label:y.companyName,required:!0,className:"account-edit-company-profile-form__field",error:u.name&&l.name?l.name:void 0,children:a(F,{name:`${s}name`,type:"text",value:e.name,onValue:o(i("name")),onBlur:()=>n(i("name")),disabled:!!t,variant:"primary",size:"medium"})}),a(M,{label:y.email,required:!0,className:"account-edit-company-profile-form__field",error:u.email&&l.email?l.email:void 0,children:a(F,{name:`${s}email`,type:"email",value:e.email,onValue:o(i("email")),onBlur:()=>n(i("email")),disabled:!!t,variant:"primary",size:"medium"})}),a(M,{label:y.legalName,className:"account-edit-company-profile-form__field",children:a(F,{name:`${s}legalName`,type:"text",value:e.legalName,onValue:o(i("legalName")),disabled:!!t,variant:"primary",size:"medium"})}),a(M,{label:y.vatTaxId,className:"account-edit-company-profile-form__field",children:a(F,{name:`${s}vatTaxId`,type:"text",value:e.vatTaxId,onValue:o(i("vatTaxId")),disabled:!!t,variant:"primary",size:"medium"})}),a(M,{label:y.resellerId,className:"account-edit-company-profile-form__field",children:a(F,{name:`${s}resellerId`,type:"text",value:e.resellerId,onValue:o(i("resellerId")),disabled:!!t,variant:"primary",size:"medium"})})]})},xe=({loading:t,loadingCountries:e,value:l,errors:u,touched:o,onChange:n,onBlur:r,countryOptions:C,regionOptions:y,isRegionRequired:s,hasRegionOptions:i,namePrefix:p="legalAddress",fieldPathPrefix:v="legalAddress",requiredConfig:A})=>{var z;const w=W({legalAddress:"Company.shared.fields.legalAddress",streetAddress:"Company.shared.fields.streetAddress",city:"Company.shared.fields.city",country:"Company.shared.fields.country",stateProvince:"Company.shared.fields.stateProvince",zipPostalCode:"Company.shared.fields.zipPostalCode",phoneNumber:"Company.shared.fields.phoneNumber"}),P={street:`${p}_street`,street2:`${p}_street2`,city:`${p}_city`,countryCode:`${p}_countryCode`,region:`${p}_region`,postcode:`${p}_postcode`,telephone:`${p}_telephone`},m={street:`${v}.street`,street2:`${v}.street2`,city:`${v}.city`,countryCode:`${v}.countryCode`,region:`${v}.region`,regionCode:`${v}.regionCode`,postcode:`${v}.postcode`,telephone:`${v}.telephone`},x={street:(A==null?void 0:A.street)??!0,city:(A==null?void 0:A.city)??!0,postcode:(A==null?void 0:A.postcode)??!0,telephone:(A==null?void 0:A.telephone)??!0};return g("div",{className:"account-edit-company-profile-form__section",children:[a("h3",{className:"account-edit-company-profile-form__section-title",children:w.legalAddress}),a(M,{label:w.streetAddress,required:x.street,className:"account-edit-company-profile-form__field",error:o[m.street]&&u[m.street]?u[m.street]:void 0,children:a(F,{name:P.street,type:"text",value:l.street,onValue:n(m.street),onBlur:()=>r(m.street),disabled:!!t,variant:"primary",size:"medium"})}),a(M,{label:`${w.streetAddress} 2`,className:"account-edit-company-profile-form__field",children:a(F,{name:P.street2,type:"text",value:l.street2,onValue:n(m.street2),disabled:!!t,variant:"primary",size:"medium"})}),a(M,{label:w.city,required:x.city,className:"account-edit-company-profile-form__field",error:o[m.city]&&u[m.city]?u[m.city]:void 0,children:a(F,{name:P.city,type:"text",value:l.city,onValue:n(m.city),onBlur:()=>r(m.city),disabled:!!t,variant:"primary",size:"medium"})}),a(M,{label:w.country,required:!0,className:"account-edit-company-profile-form__field",error:o[m.countryCode]&&u[m.countryCode]?u[m.countryCode]:void 0,children:a(ue,{name:P.countryCode,floatingLabel:`${w.country} *`,placeholder:w.country,options:C,value:l.countryCode,handleSelect:N=>{const D=N.target;n(m.countryCode)(D.value)},onBlur:()=>r(m.countryCode),disabled:!!t||e})}),a(M,{label:w.stateProvince,required:s,className:"account-edit-company-profile-form__field",error:o["legalAddress.region"]&&u["legalAddress.region"]?u["legalAddress.region"]:void 0,children:i?a(ue,{name:"legalAddress_region",floatingLabel:`${w.stateProvince} ${s?"*":""}`,placeholder:w.stateProvince,options:y,value:l.regionCode&&((z=y.find(N=>N.value.split(",")[0]===l.regionCode))==null?void 0:z.value)||"",handleSelect:N=>{var S;const D=N.target,[O]=D.value.split(","),$=((S=y.find(H=>H.value===D.value))==null?void 0:S.text)||"";n(m.region)($),n(m.regionCode)(O)},onBlur:()=>r(m.region),disabled:!!t||e},`region_picker_${l.countryCode}`):a(F,{name:P.region,type:"text",value:l.region,onValue:n(m.region),onBlur:()=>r(m.region),disabled:!!t||e,variant:"primary",size:"medium"},`region_input_${l.countryCode}`)}),a(M,{label:w.zipPostalCode,required:x.postcode,className:"account-edit-company-profile-form__field",error:o[m.postcode]&&u[m.postcode]?u[m.postcode]:void 0,children:a(F,{name:P.postcode,type:"text",value:l.postcode,onValue:n(m.postcode),onBlur:()=>r(m.postcode),disabled:!!t,variant:"primary",size:"medium"})}),a(M,{label:w.phoneNumber,required:x.telephone,className:"account-edit-company-profile-form__field",error:o[m.telephone]&&u[m.telephone]?u[m.telephone]:void 0,children:a(F,{name:P.telephone,type:"tel",value:l.telephone,onValue:n(m.telephone),onBlur:()=>r(m.telephone),disabled:!!t,variant:"primary",size:"medium"})})]})},Ve=({inLineAlertProps:t,company:e,loading:l=!1,onSubmit:u,onCancel:o})=>{var H,Z,j,h,I,X,ee,te,ae,re,se,le,ne,ie;const n=W({title:"Company.EditCompanyProfile.title",cancel:"Company.shared.buttons.cancel",save:"Company.shared.buttons.save",saving:"Company.shared.buttons.saving",required:"Company.shared.validation.required",invalidEmail:"Company.shared.validation.invalidEmail",companyNameRequired:"Company.shared.validation.companyNameRequired",emailRequired:"Company.shared.validation.emailRequired",emailNotAvailable:"Company.shared.validation.emailNotAvailable"}),[r,C]=T({name:(e==null?void 0:e.name)||"",email:(e==null?void 0:e.email)||"",legalName:(e==null?void 0:e.legalName)||"",vatTaxId:(e==null?void 0:e.vatTaxId)||"",resellerId:(e==null?void 0:e.resellerId)||"",legalAddress:{street:((Z=(H=e==null?void 0:e.legalAddress)==null?void 0:H.street)==null?void 0:Z[0])||"",street2:((h=(j=e==null?void 0:e.legalAddress)==null?void 0:j.street)==null?void 0:h[1])||"",city:((I=e==null?void 0:e.legalAddress)==null?void 0:I.city)||"",region:((ee=(X=e==null?void 0:e.legalAddress)==null?void 0:X.region)==null?void 0:ee.region)||"",regionCode:((ae=(te=e==null?void 0:e.legalAddress)==null?void 0:te.region)==null?void 0:ae.regionCode)||"",countryCode:((re=e==null?void 0:e.legalAddress)==null?void 0:re.countryCode)||"",postcode:((se=e==null?void 0:e.legalAddress)==null?void 0:se.postcode)||"",telephone:((le=e==null?void 0:e.legalAddress)==null?void 0:le.telephone)||""}}),[y,s]=T({}),[i,p]=T({}),v=((ne=e==null?void 0:e.permissionsFlags)==null?void 0:ne.canEditAccount)===!0,A=((ie=e==null?void 0:e.permissionsFlags)==null?void 0:ie.canEditAddress)===!0,{countryOptions:w,regionOptions:P,isRegionRequired:m,hasRegionOptions:x,loadingCountries:z}=we(r.legalAddress.countryCode),N=(c,f)=>c==="name"?f.trim()?null:n.companyNameRequired:c==="email"?f.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f)?null:n.invalidEmail:n.emailRequired:c==="legalAddress.street"||c==="legalAddress.city"||c==="legalAddress.postcode"||c==="legalAddress.telephone"||c==="legalAddress.countryCode"?f.trim()?null:n.required:c==="legalAddress.region"&&m&&!f.trim()?n.required:null,D=()=>{var k,b;const c={};let f=!0;const L=((k=e==null?void 0:e.permissionsFlags)==null?void 0:k.canEditAccount)===!0,_=((b=e==null?void 0:e.permissionsFlags)==null?void 0:b.canEditAddress)===!0;if(L){const d=N("name",r.name);d&&(c.name=d,f=!1);const E=N("email",r.email);E&&(c.email=E,f=!1)}if(_){const d=N("legalAddress.street",r.legalAddress.street);d&&(c["legalAddress.street"]=d,f=!1);const E=N("legalAddress.city",r.legalAddress.city);E&&(c["legalAddress.city"]=E,f=!1);const oe=N("legalAddress.postcode",r.legalAddress.postcode);oe&&(c["legalAddress.postcode"]=oe,f=!1);const de=N("legalAddress.telephone",r.legalAddress.telephone);de&&(c["legalAddress.telephone"]=de,f=!1);const ce=N("legalAddress.countryCode",r.legalAddress.countryCode);ce&&(c["legalAddress.countryCode"]=ce,f=!1);const me=N("legalAddress.region",r.legalAddress.region);me&&(c["legalAddress.region"]=me,f=!1)}return s(c),f},O=async c=>{var k,b;c.preventDefault();const f=((k=e==null?void 0:e.permissionsFlags)==null?void 0:k.canEditAccount)===!0,L=((b=e==null?void 0:e.permissionsFlags)==null?void 0:b.canEditAddress)===!0,_={};if(f&&(_.name=!0,_.email=!0,_.legalName=!0,_.vatTaxId=!0,_.resellerId=!0),L&&(_["legalAddress.street"]=!0,_["legalAddress.street2"]=!0,_["legalAddress.city"]=!0,_["legalAddress.region"]=!0,_["legalAddress.regionCode"]=!0,_["legalAddress.countryCode"]=!0,_["legalAddress.postcode"]=!0,_["legalAddress.telephone"]=!0),p(_),!!D()){if(f&&r.email!==(e==null?void 0:e.email)){const d=await Ne(r.email);if(!d.isValid){s(E=>({...E,email:d.error||n.emailNotAvailable}));return}}if(u){const d={};f&&(d.name=r.name,d.email=r.email,d.legalName=r.legalName,d.vatTaxId=r.vatTaxId,d.resellerId=r.resellerId),L&&(d.legalAddress={street:[r.legalAddress.street,r.legalAddress.street2].filter(Boolean),city:r.legalAddress.city,region:{region:r.legalAddress.region,regionCode:r.legalAddress.regionCode},countryCode:r.legalAddress.countryCode,postcode:r.legalAddress.postcode,telephone:r.legalAddress.telephone}),await u(d)}}},$=c=>f=>{const L=new Set(["name","email","legalName","vatTaxId","resellerId"]),_=c.startsWith("legalAddress.");if(!(L.has(c)&&!v||_&&!A)){if(c.startsWith("legalAddress.")){const b=c.split(".")[1];b==="countryCode"?(C(d=>({...d,legalAddress:{...d.legalAddress,[b]:f,region:"",regionCode:""}})),s(d=>{const E={...d};return delete E["legalAddress.region"],delete E["legalAddress.regionCode"],E}),p(d=>{const E={...d};return delete E["legalAddress.region"],delete E["legalAddress.regionCode"],E})):C(b==="region"?d=>({...d,legalAddress:{...d.legalAddress,region:f,regionCode:x?d.legalAddress.regionCode:f}}):d=>({...d,legalAddress:{...d.legalAddress,[b]:f}}))}else C(b=>({...b,[c]:f}));y[c]&&s(b=>{const d={...b};return delete d[c],d})}},S=c=>{const f=new Set(["name","email","legalName","vatTaxId","resellerId"]),L=c.startsWith("legalAddress.");if(f.has(c)&&!v||L&&!A)return;p(d=>({...d,[c]:!0}));let k="";if(c.startsWith("legalAddress.")){const d=c.split(".")[1],E=r.legalAddress[d];k=typeof E=="string"?E:""}else{const d=r[c];k=typeof d=="string"?d:""}const b=N(c,k);b&&s(d=>({...d,[c]:b}))};return g(q,{variant:"secondary",className:"account-edit-company-profile",children:[a(ge,{title:n.title,divider:!1,className:"account-edit-company-profile__title"}),t!=null&&t.text?a(ve,{className:"account-edit-company-profile__notification",type:t.type,variant:"secondary",heading:t.text,icon:t.icon,"data-testid":"editCompanyInLineAlert"}):null,g("form",{className:"account-edit-company-profile-form",onSubmit:O,children:[v&&a(Ie,{loading:l,value:{name:r.name,email:r.email,legalName:r.legalName,vatTaxId:r.vatTaxId,resellerId:r.resellerId},errors:y,touched:i,onChange:$,onBlur:S}),A&&a(xe,{loading:l,loadingCountries:z,value:r.legalAddress,errors:y,touched:i,onChange:$,onBlur:S,countryOptions:w,regionOptions:P,isRegionRequired:m,hasRegionOptions:x}),g("div",{className:"account-edit-company-profile__actions",children:[a(K,{disabled:l,type:"button",variant:"secondary",onClick:()=>o==null?void 0:o(),children:n.cancel}),a(K,{disabled:l||!v&&!A,type:"submit",variant:"primary",children:n.save})]})]}),l&&g("div",{className:"account-edit-company-profile__loading-overlay","data-testid":"editCompanyLoadingOverlay",children:[a(Ae,{size:"large"}),a("div",{className:"account-edit-company-profile__loading-text",children:n.saving})]})]})},Te=({testId:t,withCard:e=!0})=>{const l=g(Ce,{"data-testid":t||"companySkeletonLoader",children:[a(G,{variant:"heading",size:"xlarge",fullWidth:!1,lines:1}),a(G,{variant:"heading",size:"xlarge",fullWidth:!0,lines:1}),a(G,{variant:"heading",size:"xlarge",fullWidth:!0,lines:1})]});return e?l:a(q,{variant:"secondary",className:Q(["company-company-loaders","company-company-loaders--card-loader"]),children:l})};var fe=(t=>(t.EDIT_COMPANY_EVENT="edit-company",t))(fe||{});const $e={EDIT_COMPANY_EVENT:"edit-company"},Me=()=>(window.adobeDataLayer||(window.adobeDataLayer=[]),window.adobeDataLayer),Pe=t=>{Me().push(l=>{const u=l.getState?l.getState():{};l.push({event:t,context:u})})},Fe=(t,e)=>{if(!$e[t])return null;switch(t){case"edit-company":Pe({type:"company",eventType:"edit",companyData:e});break;default:return null}},Re=({handleSetInLineAlert:t})=>{const e=W({companySuccess:"Company.CompanyProfile.editCompanyProfile.companySuccess",companyError:"Company.CompanyProfile.editCompanyProfile.companyError",loadError:"Company.CompanyProfile.messages.loadError",updateError:"Company.CompanyProfile.messages.updateError"}),{companySuccess:l,companyError:u,loadError:o,updateError:n}=e,[r,C]=T(null),[y,s]=T(!0),[i,p]=T(!1),[v,A]=T(!1),[w,P]=T([]),[m,x]=T({}),z=J(t),N=J(!1),D=J(!1);B(()=>{z.current=t},[t]);const O=R(h=>{x(h)},[]),$=R((h,I)=>{t&&(h==="success"?t({type:"success",text:I??l}):h==="error"?t({type:"error",text:I??u}):t(),p(!1))},[t,l,u]),S=R(async()=>{if(N.current)return null;N.current=!0,s(!0);try{const h=await _e();return h&&C(h),s(!1),h}catch(h){return console.error("Failed to load company:",h),s(!1),z.current&&z.current({type:"error",text:o}),null}finally{N.current=!1}},[o]);B(()=>{D.current||(D.current=!0,S())},[S]),B(()=>{const h=()=>{s(!0),A(!1),x({}),S()},I=pe.on("companyContext/changed",h,{eager:!0});return()=>{I==null||I.off()}},[S]),B(()=>{he().then(h=>{P(h.availableCountries)}).catch(h=>{console.error("Failed to load countries:",h)})},[]);const H=R(()=>{A(!0),$("success",""),x({})},[$]),Z=R(h=>{h==null||h(),A(!1),x({})},[]),j=R(async h=>{try{if(p(!0),!h){$("error","No data to update");return}const I=await Ee(h);C(I),A(!1),x({}),$("success"),Fe(fe.EDIT_COMPANY_EVENT,{...h,companyId:r==null?void 0:r.id}),pe.emit("company/updated",{company:I})}catch(I){console.error("Failed to update company:",I),$("error",I.message||n)}finally{p(!1)}},[r,$,n]);return{company:r,countries:w,loading:y,submitLoading:i,showEditForm:v,inputChange:m,handleShowEditForm:H,handleHideEditForm:Z,handleUpdateCompany:j,handleInputChange:O,renderAlertMessage:$,saving:i}},Se=t=>V.createElement("svg",{id:"Icon_Warning_Base",width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},V.createElement("g",{clipPath:"url(#clip0_841_1324)"},V.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M11.9949 2.30237L0.802734 21.6977H23.1977L11.9949 2.30237Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),V.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M12.4336 10.5504L12.3373 14.4766H11.6632L11.5669 10.5504V9.51273H12.4336V10.5504ZM11.5883 18.2636V17.2687H12.4229V18.2636H11.5883Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),V.createElement("defs",null,V.createElement("clipPath",{id:"clip0_841_1324"},V.createElement("rect",{width:24,height:21,fill:"white",transform:"translate(0 1.5)"})))),ke=t=>V.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},V.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M0.75 12C0.75 5.78421 5.78421 0.75 12 0.75C18.2158 0.75 23.25 5.78421 23.25 12C23.25 18.2158 18.2158 23.25 12 23.25C5.78421 23.25 0.75 18.2158 0.75 12Z",stroke:"currentColor"}),V.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M6.75 12.762L10.2385 15.75L17.25 9",stroke:"currentColor"})),De=t=>V.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},V.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M0.75 12C0.75 5.78421 5.78421 0.75 12 0.75C18.2158 0.75 23.25 5.78421 23.25 12C23.25 18.2158 18.2158 23.25 12 23.25C5.78421 23.25 0.75 18.2158 0.75 12Z",stroke:"currentColor"}),V.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M11.75 5.88423V4.75H12.25V5.88423L12.0485 13.0713H11.9515L11.75 5.88423ZM11.7994 18.25V16.9868H12.2253V18.25H11.7994Z",stroke:"currentColor"})),Le={success:a(ke,{}),warning:a(Se,{}),error:a(De,{})},ze=()=>{const[t,e]=T({}),[l,u]=T(null),o=R(()=>{e({}),l&&(clearTimeout(l),u(null))},[l]),n=R(s=>{if(l&&(clearTimeout(l),u(null)),!(s!=null&&s.type)){e({});return}const i=Le[s.type];if(e({type:s.type,text:s.text,icon:i}),s.autoHide!==!1){const p=s.autoHideDelay||(s.type==="success"?3e3:5e3),v=setTimeout(()=>{e({}),u(null)},p);u(v)}},[l]),r=R((s,i=!0)=>{n({type:"success",text:s,autoHide:i})},[n]),C=R((s,i=!1)=>{n({type:"warning",text:s,autoHide:i})},[n]),y=R((s,i=!1)=>{n({type:"error",text:s,autoHide:i})},[n]);return B(()=>()=>{l&&clearTimeout(l)},[l]),{inLineAlertProps:t,handleSetInLineAlert:n,clearAlert:o,showSuccess:r,showWarning:C,showError:y}},Ue=({className:t,withHeader:e=!0,slots:l})=>{const u=W({containerTitle:"Company.CompanyProfile.containerTitle"}),{inLineAlertProps:o,handleSetInLineAlert:n}=ze(),{company:r,loading:C,saving:y,showEditForm:s,handleShowEditForm:i,handleHideEditForm:p,handleUpdateCompany:v}=Re({handleSetInLineAlert:n});return C?a("div",{"data-testid":"companyProfileLoader",children:a(Te,{withCard:!0})}):g("div",{className:Q(["account-company-profile",t]),children:[e?a(ge,{title:u.containerTitle,divider:!1,className:"company-profile__title"}):null,a(be,{company:r,slots:l,showEditForm:s,handleShowEditForm:i}),s?a(Ve,{inLineAlertProps:o,company:r,loading:y,onSubmit:v,onCancel:p}):null]})};export{Ue as CompanyProfile,Ue as default};
//# sourceMappingURL=CompanyProfile.js.map
