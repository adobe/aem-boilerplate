/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsxs as r,jsx as e}from"@dropins/tools/preact-jsx-runtime.js";import{useState as l}from"@dropins/tools/preact-hooks.js";import{ProgressSpinner as N,InLineAlert as B,Field as p,Input as I,TextArea as j,Button as q}from"@dropins/tools/components.js";import{classes as u}from"@dropins/tools/lib.js";import{useText as k}from"@dropins/tools/i18n.js";const P=({className:o,mode:f,defaultValues:h={name:"",description:""},error:d=null,onSubmit:L,onCancel:b,...R})=>{const[t,g]=l(h),[v,F]=l(!1),[s,c]=l(!1),i=k({actionCancel:"RequisitionList.RequisitionListForm.actionCancel",actionSave:"RequisitionList.RequisitionListForm.actionSave",requiredField:"RequisitionList.RequisitionListForm.requiredField",floatingLabel:"RequisitionList.RequisitionListForm.floatingLabel",placeholder:"RequisitionList.RequisitionListForm.placeholder",label:"RequisitionList.RequisitionListForm.label",updateTitle:"RequisitionList.RequisitionListForm.updateTitle",createTitle:"RequisitionList.RequisitionListForm.createTitle"}),m=a=>n=>{const C=n.target;g(x=>({...x,[a]:C.value}))},S=async a=>{var n;if(a.preventDefault(),!(!t.name||s)){c(!0);try{await L({name:t.name.trim(),description:((n=t.description)==null?void 0:n.trim())||void 0})}catch{c(!1)}}},_=()=>F(!0),y=v&&!t.name.trim()?i.requiredField:"",T=f==="update"?i.updateTitle:i.createTitle;return r("div",{...R,className:u(["requisition-list-form",o]),children:[r("div",{className:"requisition-list-form__title",children:[T,s?e("div",{className:u(["requisition-list-form_progress-spinner",o]),"data-testid":"requisition-list-form-progress-spinner",children:e(N,{stroke:"4",size:"small"})}):null]}),d?e(B,{type:"error",className:"requisition-list-form__notification",variant:"secondary",heading:d,"data-testid":"requisition-list-alert"}):null,r("form",{className:u(["requisition-list-form__form",o]),onSubmit:S,children:[e(p,{error:y,disabled:s,children:e(I,{id:"requisition-list-form-name",name:"name",type:"text",floatingLabel:i.floatingLabel,placeholder:i.placeholder,required:!0,value:t.name,onChange:m("name"),onBlur:_})}),e(p,{disabled:s,children:e(j,{id:"requisition-list-form-description",name:"description",label:i.label,placeholder:i.label,value:t.description,onChange:m("description")})}),r("div",{className:"requisition-list-form__actions",children:[e(q,{type:"button",variant:"secondary",onClick:b,disabled:s,"data-testid":"requisition-list-form-cancel",children:i.actionCancel}),e(q,{type:"submit",disabled:s,"data-testid":"requisition-list-form-save",children:i.actionSave})]})]})]})};export{P as R};
//# sourceMappingURL=RequisitionListForm.js.map
