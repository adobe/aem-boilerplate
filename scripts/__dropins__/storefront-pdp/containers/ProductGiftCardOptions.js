/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as l}from"@dropins/tools/preact-jsx-runtime.js";import{useState as m,useEffect as N}from"@dropins/tools/preact-compat.js";import{classes as x}from"@dropins/tools/lib.js";import{events as f}from"@dropins/tools/event-bus.js";import{a as y,s as D}from"../chunks/isProductConfigurationValid.js";import{g as P}from"../chunks/getFetchedProductData.js";import{G as v}from"../chunks/GiftCardOptions2.js";import"@dropins/tools/preact-hooks.js";import"@dropins/tools/components.js";/* empty css                       */import"@dropins/tools/i18n.js";const G=({initialData:g=null,scope:p,children:I,...s})=>{var d;const[a,O]=m(g),[c,h]=m({sku:"",quantity:1,enteredOptions:[]});N(()=>{const t=f.on("pdp/data",O,{scope:p}),n=f.on("pdp/values",h,{eager:!0});return()=>{t==null||t.off(),n==null||n.off()}},[p]);const C=(t,n)=>{const r=c.enteredOptions||[],i=r.findIndex(e=>e.uid===t);let o;i!==-1?o=r.map(e=>e.uid===t?{...e,value:n}:e):o=[...r,{uid:t,value:n}],D(e=>({...e,enteredOptions:o}))},V=t=>{y(()=>t)};return a?l("div",{...s,className:x(["pdp-gift-card-options",s.className]),children:(d=a==null?void 0:a.attributes)==null?void 0:d.map(({id:t,value:n},r)=>{var o,e;if(t!=="ac_giftcard")return null;let i={options:[]};try{i=JSON.parse(n)}catch{}return l(v,{options:i.options,className:s.className,optionValues:(c.enteredOptions||[]).map(u=>({id:u.uid,value:u.value})),currency:(e=(o=a.prices)==null?void 0:o.final)==null?void 0:e.currency,onOptionChange:C,onValidationChange:V},`giftcard-${r}`)})}):null};G.getInitialData=P;export{G as ProductGiftCardOptions,G as default};
//# sourceMappingURL=ProductGiftCardOptions.js.map
