/*! Copyright 2026 Adobe
All Rights Reserved. */
import{i as l}from"../chunks/fetch-graphql.js";import{s as C,e as d}from"../chunks/setShippingAddress.js";import{debounce as g}from"@dropins/tools/lib.js";import"@dropins/tools/event-bus.js";import{s as A}from"../chunks/setBillingAddress.js";import{b as H,c as J,g as K,a as L,i as Q}from"../chunks/events.js";import{a as y}from"../chunks/dom.js";import{g as X,s as Y}from"../chunks/dom.js";import"@dropins/tools/signals.js";import"@dropins/tools/fetch-graphql.js";import"../chunks/transform-shipping-estimate.js";import"../chunks/transform-shipping-methods.js";import"../chunks/values.js";import"../chunks/synchronizeCheckout.js";import"../fragments.js";import"../chunks/classifiers.js";import"../chunks/guards.js";import"../chunks/events2.js";let m=0;function R({type:e="shipping",debounceMs:t=0}){const i=e==="shipping"?C:A,r=g(o=>{m+=1,i(o).catch(console.error).finally(()=>{m-=1,m===0&&(l.value=!1)})},t);return({data:o,isDataValid:s})=>{if(!s)return;l.value=!0;const n=I(o);r(n)}}function _({debounceMs:e=0}){let t={},i=!1;const r=g(o=>{var n,c,p,f;if(i)return;const s={country_code:o.countryCode,region_name:String(((n=o.region)==null?void 0:n.regionCode)||""),region_id:String(((c=o.region)==null?void 0:c.regionId)||""),zip:o.postcode};d({criteria:s}),t={countryCode:o.countryCode,regionCode:((p=o.region)==null?void 0:p.regionCode)||"",regionId:((f=o.region)==null?void 0:f.regionId)||"",postcode:o.postcode}},e);return({data:o,isDataValid:s})=>{var n,c;if(s){i=!0;return}t.countryCode===o.countryCode&&t.regionCode===(((n=o.region)==null?void 0:n.regionCode)||"")&&t.regionId===(((c=o.region)==null?void 0:c.regionId)||"")&&t.postcode===o.postcode||r(o)}}function h(e,t=!1){var n;const{name:i,ref:r}=e,o=document.forms.namedItem(i);if(!o||o.offsetParent===null)return!0;o.setAttribute("novalidate","");const s=((n=r==null?void 0:r.current)==null?void 0:n.handleValidationSubmit(!1))??o.checkValidity();return!s&&t&&y(o),s}function D(e){for(const t of e)if(!h(t,!0))return!1;return!0}function $(e){return document.createRange().createContextualFragment(e)}function z(e){return function(t){return e.querySelector(t)}}function u(e,t,i){if(!e||!i)return;const r=document.head.querySelector(`meta[${i}="${e}"]`);if(!t){r==null||r.remove();return}if(r)r.setAttribute("content",t);else{const o=document.createElement("meta");o.setAttribute(i,e),o.setAttribute("content",t),document.head.appendChild(o)}}function O(e){u("title",e,"name"),u("description",e,"name"),u("keywords",e,"name"),u("og:description",e,"property"),u("og:title",e,"property"),u("og:url",window.location.href,"property")}const I=e=>{var r,o,s;if(!(!(e!=null&&e.id)&&!(e!=null&&e.uid)))return{customerAddressId:e.id,customerAddressUid:e.uid};const i=(r=e.customAttributes)==null?void 0:r.map(({code:n,value:c})=>({code:n,value:String(c)}));return{address:{city:e.city,company:e==null?void 0:e.company,countryCode:e.countryCode,customAttributes:i,fax:e.fax,firstName:e.firstName,lastName:e.lastName,middleName:e.middleName,postcode:e.postcode,prefix:e.prefix,region:(o=e==null?void 0:e.region)==null?void 0:o.regionCode,regionId:(s=e==null?void 0:e.region)==null?void 0:s.regionId,street:e.street,suffix:e.suffix,telephone:e.telephone,vatId:e.vatId,saveInAddressBook:e.saveAddressBook}}},U=e=>{var t,i,r;return{city:e.city,company:e==null?void 0:e.company,countryCode:(t=e.country)==null?void 0:t.code,customAttributes:e.customAttributes,fax:e.fax,firstName:e.firstName,lastName:e.lastName,middleName:e.middleName,postcode:e.postCode,prefix:e.prefix,region:{regionCode:(i=e.region)==null?void 0:i.code,regionId:(r=e.region)==null?void 0:r.id},street:e.street,suffix:e.suffix,telephone:e.telephone,vatId:e.vatId}};export{$ as createFragment,u as createMetaTag,z as createScopedSelector,_ as estimateShippingCost,H as getCartAddress,J as getCartPaymentMethod,K as getCartShippingMethod,X as getParentContainer,L as isEmptyCart,Q as isVirtualCart,Y as scrollToElement,y as scrollToParentContainer,R as setAddressOnCart,O as setMetaTags,I as transformAddressFormValuesToAddressInput,U as transformCartAddressToFormValues,h as validateForm,D as validateForms};
//# sourceMappingURL=utils.js.map
