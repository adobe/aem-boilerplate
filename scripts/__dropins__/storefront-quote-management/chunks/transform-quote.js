/*! Copyright 2025 Adobe
All Rights Reserved. */
const f={requestQuote:!1,editQuote:!1,deleteQuote:!1,checkoutQuote:!1},y={authenticated:!1,permissions:f},g=new Proxy(y,{get:(e,a)=>e[a],set:(e,a,r)=>(e[a]=r,!0)});var p=(e=>(e.NEW="NEW",e.SUBMITTED="SUBMITTED",e.PENDING="PENDING",e.UPDATED="UPDATED",e.OPEN="OPEN",e.ORDERED="ORDERED",e.CLOSED="CLOSED",e.DECLINED="DECLINED",e.EXPIRED="EXPIRED",e.DRAFT="DRAFT",e))(p||{});function E(e){var r,t,c,u;const a=m(e);return{uid:e.uid,name:e.name,createdAt:e.created_at,updatedAt:e.updated_at,expirationDate:e.expiration_date,status:a?p.NEW:e.status,salesRepName:e.sales_rep_name,buyer:{firstname:e.buyer.firstname,lastname:e.buyer.lastname},templateName:e.template_name,comments:(r=e.comments)==null?void 0:r.map(n=>({uid:n.uid,createdAt:n.created_at,author:{firstname:n.author.firstname,lastname:n.author.lastname}})),prices:e.prices&&{subtotalExcludingTax:e.prices.subtotal_excluding_tax&&{value:e.prices.subtotal_excluding_tax.value,currency:e.prices.subtotal_excluding_tax.currency},subtotalIncludingTax:e.prices.subtotal_including_tax&&{value:e.prices.subtotal_including_tax.value,currency:e.prices.subtotal_including_tax.currency},subtotalWithDiscountExcludingTax:e.prices.subtotal_with_discount_excluding_tax&&{value:e.prices.subtotal_with_discount_excluding_tax.value,currency:e.prices.subtotal_with_discount_excluding_tax.currency},appliedTaxes:(t=e.prices.applied_taxes)==null?void 0:t.map(n=>({amount:{value:n.amount.value,currency:n.amount.currency},label:n.label})),grandTotal:e.prices.grand_total&&{value:e.prices.grand_total.value,currency:e.prices.grand_total.currency}},items:((c=e.items)==null?void 0:c.map(n=>{var l,o,_,d;return{product:{uid:n.product.uid,sku:n.product.sku,name:n.product.name},catalogDiscount:{amountOff:n.prices.catalog_discount.amount_off,percentOff:n.prices.catalog_discount.percent_off},discounts:((o=(l=n.prices)==null?void 0:l.discounts)==null?void 0:o.map(i=>({label:i.label,value:i.value,amount:{value:i.amount.value,currency:i.amount.currency}})))??[],stockStatus:n.product.stock_status,quantity:n.quantity,prices:{originalItemPrice:{value:n.prices.original_item_price.value,currency:n.prices.original_item_price.currency},rowTotal:{value:n.prices.row_total.value,currency:n.prices.row_total.currency}},configurableOptions:(_=n.configurable_options)==null?void 0:_.map(i=>({optionLabel:i.option_label,valueLabel:i.value_label})),bundleOptions:(d=n.bundle_options)==null?void 0:d.map(i=>({label:i.label,values:i.values.map(s=>({label:s.label,quantity:s.quantity,originalPrice:{value:s.original_price.value,currency:s.original_price.currency},price:{value:s.priceV2.value,currency:s.priceV2.currency}}))}))}}))||[],shippingAddresses:(u=e.shipping_addresses)==null?void 0:u.map(n=>{const l={uid:n.uid,firstname:n.firstname,lastname:n.lastname,company:n.company,street:n.street,city:n.city,postcode:n.postcode,country:{code:n.country.code,label:n.country.label},telephone:n.telephone};return n.region&&(l.region={code:n.region.code,label:n.region.label,regionId:n.region.region_id}),l}),canCheckout:["UPDATED","DECLINED"].includes(e.status)&&g.permissions.checkoutQuote,canSendForReview:(a||["DRAFT","UPDATED","DECLINED","EXPIRED","OPEN"].includes(e.status))&&g.permissions.editQuote}}function D(e){return e?E(e):null}function m(e){return e.status==="SUBMITTED"&&!(e.history??[]).some(a=>{var r,t;return a.change_type==="UPDATED"&&(((t=(r=a.changes)==null?void 0:r.statuses)==null?void 0:t.changes)??[]).length>0})}function b(e){const a=m(e);return{uid:e.uid,name:e.name,createdAt:e.created_at,updatedAt:e.updated_at,status:a?p.NEW:e.status,buyer:{firstname:e.buyer.firstname,lastname:e.buyer.lastname},templateName:e.template_name,prices:{grandTotal:{value:e.prices.grand_total.value,currency:e.prices.grand_total.currency}}}}function I(e){var t;if(!e)return null;const a={items:((t=e.items)==null?void 0:t.filter(c=>c==null?void 0:c.uid).map(b))||[],pageInfo:{currentPage:e.page_info.current_page,pageSize:e.page_info.page_size,totalPages:e.page_info.total_pages},totalCount:e.total_count,sortFields:e.sort_fields?{default:e.sort_fields.default,options:e.sort_fields.options}:void 0},r=v(a);return{...a,paginationInfo:r||void 0}}function v(e){if(!(e!=null&&e.pageInfo)||!e.totalCount)return null;const{currentPage:a,pageSize:r,totalPages:t}=e.pageInfo,{totalCount:c}=e,u=c>0?(a-1)*r+1:0,n=Math.min(a*r,c);return{currentPage:a,totalCount:c,pageSize:r,startItem:u,endItem:n,totalPages:t,pageSizeOptions:[20,30,50,100,200]}}const x=()=>[20,30,50,100,200];export{f as D,I as a,x as g,g as s,D as t};
//# sourceMappingURL=transform-quote.js.map
