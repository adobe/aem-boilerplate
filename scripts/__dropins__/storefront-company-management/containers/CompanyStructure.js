/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as n,jsxs as u}from"@dropins/tools/preact-jsx-runtime.js";import{useState as d,useEffect as l}from"@dropins/tools/preact-hooks.js";import{a as p,i as y}from"../chunks/isCompanyUser.js";import{Card as f,InLineAlert as g,Button as C}from"@dropins/tools/components.js";import{classes as v}from"@dropins/tools/lib.js";import*as m from"@dropins/tools/preact-compat.js";import{useText as h}from"@dropins/tools/i18n.js";import"../chunks/fetch-graphql.js";import"@dropins/tools/fetch-graphql.js";const w=r=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r},m.createElement("path",{vectorEffect:"non-scaling-stroke",fillRule:"evenodd",clipRule:"evenodd",d:"M1 20.8953L12.1922 1.5L23.395 20.8953H1ZM13.0278 13.9638L13.25 10.0377V9H11.25V10.0377L11.4722 13.9638H13.0278ZM11.2994 16V17.7509H13.2253V16H11.2994Z",fill:"currentColor"})),E="/customer/company/create",M=({className:r,children:c,createCompanyAccountUrl:o=E,...i})=>{const e=h({individualUserMessage:"Company.CompanyStructure.individualUserMessage",createAccountCta:"Company.CompanyStructure.createAccountCta"}),t=e.individualUserMessage||"You don't have a company account yet.";return n(f,{variant:"secondary",className:v(["company-management-company-structure-card",r]),...i,children:u("div",{children:[n(g,{type:"warning",variant:"secondary",heading:t,icon:n(w,{}),className:"company-management-company-structure-card__alert","data-testid":"company-structure-inline-alert"}),n("div",{className:"company-management-company-structure-card__cta",children:n(C,{as:"a",href:o,variant:"primary","data-testid":"company-structure-create-company-button",children:e.createAccountCta||"Create a Company Account"})})]})})},T=({isAuthenticated:r=!1,onRedirectLogin:c,onRedirectAccount:o,...i})=>{const[e,t]=d("loading");return l(()=>{let a=!0;return(async()=>{try{if(!r){a&&t("redirect-login");return}if(!await p()){a&&(console.log("Company registration disabled - redirecting to account dashboard"),t("redirect-account"));return}await y()?a&&t("redirect-account"):a&&t("show-empty")}catch(s){console.error("Error in CompanyStructure - redirecting to login page:",s),a&&t("redirect-login")}})(),()=>{a=!1}},[r]),l(()=>{e==="redirect-login"&&c&&c(),e==="redirect-account"&&o&&o()},[e,c,o]),e==="loading"||e==="redirect-login"||e==="redirect-account"?null:e==="show-empty"?n(M,{...i}):null};export{T as CompanyStructure,T as default};
//# sourceMappingURL=CompanyStructure.js.map
