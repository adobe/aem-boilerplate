/*! Copyright 2025 Adobe
All Rights Reserved. */
import{S as M}from"./chunks/vcomponent.js";import{R as te,V as ne,c as se,g as ie}from"./chunks/vcomponent.js";import{d as E}from"./chunks/cjs.js";import{d as ae,a as de,i as ue}from"./chunks/deviceUtils.js";import{C as pe,I as ge,i as fe}from"./chunks/initializer.js";import{IntlContext as F}from"./i18n.js";import{x as R,A as P,h as _,T as L,E as b,q as p,_ as V,y as D,N as q,f as Q}from"./chunks/icons/Add.js";import{g as me,s as he}from"./chunks/image-params-keymap.js";import{g as ye,s as Ie}from"./chunks/locale-config.js";import{g as Ce}from"./chunks/get-path-value.js";import"./preact-jsx-runtime.js";import"./signals.js";const H=r=>{const o=new FormData(r);return Object.fromEntries(o)},X=r=>{const o=new FormData(r),n=Object.fromEntries(o);return Object.entries(n).reduce((s,[a])=>{const c=r.elements[a];return c!=null&&c.validationMessage?{...s,[a]:c.validationMessage}:{...s}},{})},T={arrayMerge:(r,o,n)=>{const l=r.slice();return o.forEach((s,a)=>{typeof l[a]>"u"?l[a]=n.cloneUnlessOtherwiseSpecified(s,n):n.isMergeableObject(s)?l[a]=E(r[a],s,n):r.indexOf(s)===-1&&l.push(s)}),l}};function Y(r,o){return o?E(r,o,T):r}const Z=r=>r.replace("_","-");function z(r,o={},n,l,s,a="div"){const c=R(M),g=P(null),h=P("pending"),S=P([]),[y,N]=_({children:[l]}),[I,B]=_({}),O=L(()=>({get:t=>I[t],set:(t,e)=>{B({...O,[t]:e})}}),[I]),{intl:j}=R(F);o.dictionary=j.dictionary,o._setProps=t=>{N(e=>{const i=typeof t=="function"?t(e):t;if(s){const u=b(s(e),{key:"render"}),m=e.children.findIndex(f=>(f==null?void 0:f.key)==="render");e.children[m]=u}return i})};const d=p(t=>{typeof t=="function"?S.current.push(t):console.warn("Skipped: Invalid _registerMethod",t)},[]);o._registerMethod=d;const w=p(t=>V(a,{"data-slot-html-element":t.tagName.toLowerCase(),ref:e=>{e==null||e.appendChild(t)}},null),[a]);o._htmlElementToVNode=w,o.getSlotElement=p(t=>{var i,u;const e=(i=g.current)==null?void 0:i.querySelector(`[data-slot-key="${t}"]`);if(C(`ðŸŸ¦ "${r}" Slot getSlotElement: ${t}`,(u=g.current)==null?void 0:u.cloneNode(!0),e==null?void 0:e.cloneNode(!0)),!!e)return{appendChild:m=>{e.appendChild(m)},prependChild:m=>{e.insertBefore(m,e.firstChild)},appendSibling:m=>{const f=e.parentNode;f==null||f.insertBefore(m,e.nextSibling)},prependSibling:m=>{const f=e.parentNode;f==null||f.insertBefore(m,e)},remove:()=>{e.remove()}}},[r]),o.onRender=p(t=>{S.current.push(t)},[]),o.onChange=o.onRender,o.replaceWith=p(t=>{d(e=>{const i=w(t);e._setProps({children:[i]})})},[w,d]),o.appendChild=p(t=>{d(e=>{const i=w(t);e._setProps(u=>({...u,children:[...u.children,i]}))})},[w,d]),o.prependChild=p(t=>{d(e=>{const i=w(t);e._setProps(u=>({...u,children:[i,...u.children]}))})},[w,d]),o.appendSibling=p(t=>{d(()=>{var i,u;const e=(i=g.current)==null?void 0:i.parentNode;e==null||e.insertBefore(t,((u=g.current)==null?void 0:u.nextSibling)??null)})},[d]),o.prependSibling=p(t=>{d(()=>{var i;const e=(i=g.current)==null?void 0:i.parentNode;e==null||e.insertBefore(t,g.current)})},[d]),o.remove=p(()=>{d(()=>{var t;(t=g.current)==null||t.remove()})},[d]);const v=p(async()=>{if(h.current==="loading")return;h.current="loading",C(`ðŸŸ¨ "${r}" Slot Rendered`);const t=s?b(s(y),{key:"render"}):null;N({children:[t??l]}),S.current.forEach(e=>{e(o,O)}),h.current="ready"},[l,o,r,y,s,O]),k=p(async()=>{if(n)try{h.current="loading",C(`ðŸŸ© "${r}" Slot Initialized`),await n(o,g.current)}catch(t){console.error(`Error in "${n.name}" Slot callback`,t)}finally{h.current="ready",await v()}},[n,o,v,r]);return D(()=>{k().finally(()=>{c&&c.value.has(r)&&(c.value.delete(r),c.value=new Set(c.value))})},[]),D(()=>{v()},[JSON.stringify(o),JSON.stringify(I)]),[g,y,h.current]}const $=(r,o)=>q.map(r,n=>Q(n)?n.props.src?b(n,{...n.props,src:o?n.props.src:"","data-original-src":n.props.src}):n.props&&n.props.children?b(n,{...n.props,children:$(n.props.children,o)}):n:n);function x({name:r,lazy:o=!1,context:n,slot:l,children:s,render:a,slotTag:c="div",contentTag:g="div",...h}){const S=R(M),[y,N,I]=z(r,n,l,s,a,g);return L(()=>{if(!r)return console.warn('Slot "name" is required');S&&o===!1&&(S.value.add(r),S.value=new Set(S.value))},[r,o,S]),V(c,{...h,ref:y,"data-slot":r},$(N.children,I==="ready"))}window.DROPINS=window.DROPINS||{};window.DROPINS.showSlots=async r=>{window.sessionStorage.setItem("dropin-debugger--show-slots",r.toString()),document.body.classList.toggle("dropin-debugger--show-slots",r)};let C=()=>{};window.DROPINS.logSlots=async r=>{window.sessionStorage.setItem("dropin-debugger--log-slots",r.toString()),C=r?(...o)=>console.log(...o):()=>{}};window.DROPINS.showSlots(window.sessionStorage.getItem("dropin-debugger--show-slots")==="true");window.DROPINS.logSlots(window.sessionStorage.getItem("dropin-debugger--log-slots")==="true");function ee(r){const o=document.cookie.split(";");let n;return o.forEach(l=>{const[s,a]=l.trim().split("=");s===r&&(n=decodeURIComponent(a))}),n}export{pe as Config,ge as Initializer,te as Render,x as Slot,M as SlotQueueContext,ne as VComponent,se as classes,ae as debounce,E as deepmerge,ie as generateSrcset,ee as getCookie,X as getFormErrors,H as getFormValues,ye as getGlobalLocale,me as getImageParamsKeyMap,Ce as getPathValue,fe as initializers,de as isIOSMobileDevice,ue as isNumber,Y as merge,Ie as setGlobalLocale,he as setImageParamsKeyMap,Z as toLanguageTag,z as useSlot};
//# sourceMappingURL=lib.js.map
