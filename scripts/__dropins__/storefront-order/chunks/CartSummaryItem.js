/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as i,jsxs as b,Fragment as v}from"@dropins/tools/preact-jsx-runtime.js";import{Price as A,Image as B,CartItem as K,Icon as Q,Incrementer as R}from"@dropins/tools/components.js";import{useCallback as F}from"@dropins/tools/preact-hooks.js";import{Slot as H}from"@dropins/tools/lib.js";import{O as G}from"./OrderLoaders.js";import*as w from"@dropins/tools/preact-compat.js";const J=l=>w.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...l},w.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M0.75 12C0.75 5.78421 5.78421 0.75 12 0.75C18.2158 0.75 23.25 5.78421 23.25 12C23.25 18.2158 18.2158 23.25 12 23.25C5.78421 23.25 0.75 18.2158 0.75 12Z",stroke:"currentColor"}),w.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M11.75 5.88423V4.75H12.25V5.88423L12.0485 13.0713H11.9515L11.75 5.88423ZM11.7994 18.25V16.9868H12.2253V18.25H11.7994Z",stroke:"currentColor"})),ee=({slots:l,placeholderImage:S="",loading:M,product:e,itemType:Z,taxConfig:$,translations:x,disabledIncrementer:j,onQuantity:P,showConfigurableOptions:E,routeProductDetails:I})=>{var O,D,f,L,V;const{taxExcluded:d,taxIncluded:k}=$,t=F((n,c,s)=>i(A,{amount:n,currency:c,weight:"normal",...s}),[]),T=F(n=>{var o,_;const c=(n==null?void 0:n.productName)??"",s={title:c,src:((_=(o=n==null?void 0:n.product)==null?void 0:o.thumbnail)==null?void 0:_.url)??S,alt:c,width:90,height:120,loading:"lazy"};return i(H,{slotTag:"span",contentTag:"span","data-testid":`cartSummaryItemImage-${n.id}`,name:"CartSummaryItemImage",slot:l==null?void 0:l.CartSummaryItemImage,context:{data:n,defaultImageProps:s},children:i(B,{...s})})},[S,l==null?void 0:l.CartSummaryItemImage]);if(!e)return i(G,{});let u={};const q=Z==="cancelled",W=(D=(O=e==null?void 0:e.product)==null?void 0:O.stockStatus)==null?void 0:D.includes("IN_STOCK"),a=e==null?void 0:e.giftCard,z=e.totalQuantity>1?{quantity:e.totalQuantity}:{},y=e.discounted,{includeAndExcludeTax:r,includeTax:h,excludeTax:m}=e.taxCalculations,g=e==null?void 0:e.totalQuantity,N={...(e==null?void 0:e.configurableOptions)||{},...(e==null?void 0:e.bundleOptions)||{},...a!=null&&a.senderName?{[x.sender]:a==null?void 0:a.senderName}:{},...a!=null&&a.senderEmail?{[x.sender]:a==null?void 0:a.senderEmail}:{},...a!=null&&a.senderName?{[x.sender]:a==null?void 0:a.senderName}:{},...a!=null&&a.recipientEmail?{[x.recipient]:a==null?void 0:a.recipientEmail}:{},...a!=null&&a.message?{[x.message]:a==null?void 0:a.message}:{},...e!=null&&e.downloadableLinks?{[`${(f=e==null?void 0:e.downloadableLinks)==null?void 0:f.count} ${x.downloadableCount}`]:(L=e==null?void 0:e.downloadableLinks)==null?void 0:L.result}:{}};if(k&&d){const n=t(r.originalPrice.value,r.originalPrice.currency),c=t(r.baseOriginalPrice.value*g,r.baseOriginalPrice.currency,{variant:e.discounted?"strikethrough":"default",weight:"bold"}),s=t(r.baseDiscountedPrice.value*g,r.baseDiscountedPrice.currency,{sale:!0,weight:"bold"}),o=t(r.baseExcludingTax.value*g,r.baseExcludingTax.currency,{weight:"bold"});u={taxExcluded:!0,taxIncluded:void 0,price:n,total:b(v,{children:[c,e.discounted?s:null]}),totalExcludingTax:o}}else if(!k&&d){const n=t(m.originalPrice.value,m.originalPrice.currency),c=t(m.baseOriginalPrice.value*g,m.baseOriginalPrice.currency,{variant:y?"strikethrough":"default",weight:"bold"}),s=t(m.baseDiscountedPrice.value*g,m.baseDiscountedPrice.currency,{sale:!0,weight:"bold"}),o=t(m.baseExcludingTax.value*g,m.baseExcludingTax.currency,{weight:"bold"});u={taxExcluded:void 0,taxIncluded:void 0,price:n,total:b(v,{children:[c,y?s:null]}),totalExcludingTax:o}}else if(k&&!d){const n=t(h.singleItemPrice.value,h.singleItemPrice.currency),c=t(h.baseOriginalPrice.value*g,h.baseOriginalPrice.currency,{variant:y?"strikethrough":"default",weight:"bold"}),s=t(h.baseDiscountedPrice.value*g,h.baseDiscountedPrice.currency,{sale:!0,weight:"bold"});u={taxExcluded:void 0,taxIncluded:!0,price:n,total:b(v,{children:[c,y?s:null]})}}return i(K,{loading:M,alert:q&&!W?b("span",{children:[i(Q,{source:J}),x.outOfStock]}):i(v,{}),configurations:(E==null?void 0:E(N))??N,title:I?i("a",{"data-testid":"product-name",className:"cart-summary-item__title",href:I(e),children:e==null?void 0:e.productName}):i("div",{"data-testid":"product-name",className:"cart-summary-item__title",children:e==null?void 0:e.productName}),sku:i("div",{children:(V=e==null?void 0:e.product)==null?void 0:V.sku}),...z,image:I?i("a",{href:I(e),children:T(e)}):T(e),...u,footer:b(v,{children:[P&&!j?i(R,{value:1,min:1,max:e==null?void 0:e.totalQuantity,onValue:n=>P==null?void 0:P(Number(n)),name:"quantity","data-testid":"returnIncrementer",readonly:!0}):void 0,i(H,{"data-testid":"Footer",name:"Footer",slot:l==null?void 0:l.Footer,context:{item:e}})]})})};export{ee as C,J as S};
//# sourceMappingURL=CartSummaryItem.js.map
