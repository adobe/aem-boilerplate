/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsxs as m,jsx as s,Fragment as b}from"@dropins/tools/preact-jsx-runtime.js";import{useState as L,useCallback as h}from"@dropins/tools/preact-hooks.js";import{events as u}from"@dropins/tools/event-bus.js";import{R as _}from"./RequisitionListModal.js";import{R as y}from"./RequisitionListForm.js";import{u as k}from"./updateRequisitionList.js";import{d as M}from"./deleteRequisitionList.js";import{useText as N}from"@dropins/tools/i18n.js";const T=({name:i,description:a,backLink:n,actions:e,className:c,...f})=>m("div",{...f,className:`requisition-list-header ${c||""}`,children:[n&&s("div",{className:"requisition-list-header__back",children:m("a",{href:n.url,className:"requisition-list-header__back-link",onClick:n.onClick,children:[s("span",{className:"requisition-list-header__back-arrow",children:"<"}),n.label]})}),m("div",{className:"requisition-list-header__main",children:[m("div",{className:"requisition-list-header__title-section",children:[s("h1",{className:"requisition-list-header__title",children:i}),a&&s("p",{className:"requisition-list-header__description",children:a})]}),e&&(e.onRename||e.onDelete)&&m("div",{className:"requisition-list-header__actions",children:[e.onRename&&s("a",{href:"#",onClick:o=>{var r;o.preventDefault(),(r=e.onRename)==null||r.call(e)},className:"requisition-list-header__action-link","data-testid":"rename-list-btn",children:e.renameLabel}),e.onDelete&&s("a",{href:"#",onClick:o=>{var r;o.preventDefault(),(r=e.onDelete)==null||r.call(e)},className:"requisition-list-header__action-link","data-testid":"delete-list-btn",children:e.deleteLabel})]})]})]}),j=({requisitionList:i,routeRequisitionListGrid:a,onUpdate:n})=>{const[e,c]=L(!1),[f,o]=L(!1),[r,R]=L(!1),l=N({actionBackToRequisitionLists:"RequisitionList.RequisitionListView.actionBackToRequisitionLists",actionRename:"RequisitionList.RequisitionListView.actionRename",actionDeleteList:"RequisitionList.RequisitionListView.actionDeleteList",deleteListTitle:"RequisitionList.RequisitionListView.deleteListTitle",deleteListMessage:"RequisitionList.RequisitionListView.deleteListMessage",confirmAction:"RequisitionList.RequisitionListWrapper.confirmAction",cancelAction:"RequisitionList.RequisitionListWrapper.cancelAction",updateTitle:"RequisitionList.RequisitionListForm.updateTitle"}),w=h(()=>{c(!0)},[]),D=h(async d=>{var t,q;try{const p=await k(i.uid,d.name,d.description,(t=i.page_info)==null?void 0:t.page_size,(q=i.page_info)==null?void 0:q.current_page);p&&(n==null||n(p),c(!1),u.emit("requisitionList/alert",{action:"update",type:"success",context:"requisitionList"}))}catch{u.emit("requisitionList/alert",{action:"update",type:"error",context:"requisitionList"})}},[i.uid,i.page_info,n]),g=h(()=>{o(!0)},[]),C=h(async()=>{R(!0);try{if(await M(i.uid)){if(u.emit("requisitionList/alert",{action:"delete",type:"success",context:"requisitionList"}),a){const t=a();t&&typeof t=="string"&&(window.location.href=t)}}else u.emit("requisitionList/alert",{action:"delete",type:"error",context:"requisitionList"})}catch{u.emit("requisitionList/alert",{action:"delete",type:"error",context:"requisitionList"})}finally{R(!1),o(!1)}},[i.uid,a]);return m(b,{children:[s(T,{name:i.name,description:i.description,backLink:a?{url:"#",label:l.actionBackToRequisitionLists,onClick:d=>{d.preventDefault();const t=a();t&&typeof t=="string"&&(window.location.href=t)}}:void 0,actions:{onRename:w,onDelete:g,renameLabel:l.actionRename,deleteLabel:l.actionDeleteList}}),e&&s(_,{isOpen:e,isLoading:!1,title:l.updateTitle,modalContent:s(y,{mode:"update",defaultValues:{name:i.name,description:i.description||""},onSubmit:D,onCancel:()=>c(!1)}),handleModalOnClose:()=>c(!1)}),f&&s(_,{isOpen:f,isLoading:r,title:l.deleteListTitle,modalContent:l.deleteListMessage,confirmBtnCaption:l.confirmAction,closeBtnCaption:l.cancelAction,handleModalOnClose:()=>o(!1),handleModalOnConfirm:C})]})};export{j as R};
//# sourceMappingURL=RequisitionListHeader.js.map
