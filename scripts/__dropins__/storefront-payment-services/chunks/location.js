/*! Copyright 2026 Adobe
All Rights Reserved. */
import{Initializer as v}from"@dropins/tools/lib.js";import{events as S}from"@dropins/tools/event-bus.js";import{signal as D}from"@dropins/tools/signals.js";function w(e,i,n,t){function o(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function y(r){try{c(t.next(r))}catch(u){s(u)}}function _(r){try{c(t.throw(r))}catch(u){s(u)}}function c(r){r.done?a(r.value):o(r.value).then(y,_)}c((t=t.apply(e,i||[])).next())})}function C(){return w(this,arguments,void 0,function*(e={}){if("PaymentServicesSDK"in window)return window.PaymentServicesSDK;if(yield T(e.customUrl||"https://payments-sdk.live.commerce-payment-services.com/v0/4/PaymentSDK.js?v=0.4.1",e.scriptAttributes||{}),!("PaymentServicesSDK"in window))throw new Error("Script loaded, but Payment Services SDK not found.");return window.PaymentServicesSDK})}function T(e,{crossOrigin:i,integrity:n}){const t=document.createElement("script");return i!=null&&(t.crossOrigin=i),n!=null&&(t.integrity=n),new Promise((o,a)=>{t.src=e,t.async=!0,t.onload=()=>o(),t.onerror=s=>a(s),document.head.appendChild(t)})}var E=C;const f=D({status:"initializing",paymentsSDK:null});function P(e){f.value={paymentsSDK:e,status:"ready"}}function A(){f.value={paymentsSDK:null,status:"error"}}function K(e){return e.toLowerCase().replace("_","-")}const d=new v({init:async e=>{const i={};d.config.setConfig({...i,...e}),E().then(async n=>{const[t,o]=await Promise.all([m(n,p.CHECKOUT),m(n,p.PRODUCT_DETAIL)]);P({checkout:t,productDetail:o})}).catch(n=>{console.error("Error occurred during payment services drop-in initialization.",n),A()})},listeners:()=>[]});async function m(e,i){const n=d.config.getConfig(),t=new e({apiUrl:n==null?void 0:n.apiUrl,getCustomerToken:n==null?void 0:n.getCustomerToken,storeViewCode:n==null?void 0:n.storeViewCode});return await t.Payment.init({location:i}),h(t,i),t}function h(e,i){const n=`payment-services/initialized/${K(i)}`,t={availablePaymentMethods:[]};e.Payment.ApplePay.isAvailable()&&t.availablePaymentMethods.push(l.APPLE_PAY),e.Payment.CreditCard.isAvailable()&&t.availablePaymentMethods.push(l.CREDIT_CARD),S.emit(n,t)}const z=d.config;var l=(e=>(e.APPLE_PAY="payment_services_paypal_apple_pay",e.CREDIT_CARD="payment_services_paypal_hosted_fields",e.FASTLANE="payment_services_paypal_fastlane",e.GOOGLE_PAY="payment_services_paypal_google_pay",e.SMART_BUTTONS="payment_services_paypal_smart_buttons",e.VAULT="payment_services_paypal_vault",e))(l||{}),p=(e=>(e.CHECKOUT="CHECKOUT",e.PRODUCT_DETAIL="PRODUCT_DETAIL",e))(p||{});export{l as P,p as a,z as c,d as i,f as s};
//# sourceMappingURL=location.js.map
