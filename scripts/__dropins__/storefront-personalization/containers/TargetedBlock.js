/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as c}from"@dropins/tools/preact-jsx-runtime.js";import{useState as f,useEffect as a}from"@dropins/tools/preact-compat.js";import{events as p}from"@dropins/tools/event-bus.js";import{Slot as g}from"@dropins/tools/lib.js";import{r as o,g as h}from"../chunks/type-registry.js";import"@dropins/tools/fetch-graphql.js";const n=(s,t)=>s&&t.some(e=>s.includes(e.trim())),x=(s,t)=>t.includes(s);function m(s,t){const[e]=s.groups;return!(t.segments.length>0&&!n(s.segments,t.segments)||t.groups.length>0&&!x(e,t.groups)||t.cartRules.length>0&&!n(s.cartRules,t.cartRules))}const T=({slots:s,personalizationData:t,type:e})=>{const[l,u]=f(()=>m(h(),t)&&o(e));return a(()=>{const r=p.on("personalization/updated",i=>{u(m(i,t)&&o(e))});return()=>{r==null||r.off()}},[e,t]),l?c(g,{name:"Content",slot:s.Content,context:{}}):null};export{T as TargetedBlock,T as default};
