/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as e,jsxs as V,Fragment as vt}from"@dropins/tools/preact-jsx-runtime.js";import{useState as z,Children as mt,useEffect as f,useCallback as g,useMemo as Ot}from"@dropins/tools/preact-compat.js";import{VComponent as m,classes as w,Slot as A,toLanguageTag as ut}from"@dropins/tools/lib.js";import{Incrementer as It,Image as bt,Button as At,Icon as dt,Breadcrumbs as lt}from"@dropins/tools/components.js";/* empty css             */import{Z as Dt,C,O as st}from"../chunks/Zoom.js";import{useText as x}from"@dropins/tools/i18n.js";import{P as Pt}from"../chunks/PriceRange.js";import{S as wt}from"../chunks/Swatches.js";import"@dropins/tools/preact.js";import{c as St,n as Vt,h as ht,p as kt,o as yt,t as Ut}from"../chunks/isProductConfigurationValid.js";import{events as tt}from"@dropins/tools/event-bus.js";import{i as Bt,t as xt}from"../chunks/date.js";import"../fragments.js";import"@dropins/tools/fetch-graphql.js";const Lt=({title:a,breadcrumbs:N,galleryContent:S,infoContent:v,productContent:O,sku:I,outOfStock:k,shortDescription:L,description:r,attributes:et,images:c,options:h,price:u,specialPrice:K,className:G,children:it,quantity:J,actions:M,carouselConfig:n,zoomType:$="overlay",closeButton:nt=!0,...rt})=>{var T,Q,E,_,F,j,W,X,Y;const pt=x("PDP.Product.RegularPrice.label").label,U=x("PDP.Product.SpecialPrice.label").label,ct=x("PDP.Product.OutOfStock.label").label,B=x("PDP.Product.Image.label").label,[H,t]=z(null),D=c!=null&&c.length?c.map((s,y)=>{var Z;const q=((Z=a==null?void 0:a.props)==null?void 0:Z.children)&&(B==null?void 0:B.replace("{product}",a.props.children.toString()).replace("{key}",String(y+1)).replace("{total}",String(c.length)));return $==="zoom"?e(Dt,{closeButton:nt,children:e(m,{node:s,loading:y===0?"eager":"lazy",alt:q},y)}):e(m,{node:s,loading:y===0?"eager":"lazy",alt:q,onClick:()=>t(y)},y)}):e("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",className:"pdp-product__images__placeholder","aria-hidden":!0}),P=(T=n==null?void 0:n.thumbnails)!=null&&T.length?n.thumbnails.map((s,y)=>{var q;return e(m,{node:s,loading:(n==null?void 0:n.thumbnailsLoadingMode)||"lazy",alt:((q=a==null?void 0:a.props)==null?void 0:q.children)&&(B==null?void 0:B.replace("{product}",a.props.children.toString()).replace("{key}",String(y+1)).replace("{total}",String(c.length)))},y)}):e("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",className:"pdp-product__images__placeholder","aria-hidden":!0});return V("div",{...rt,className:w(["pdp-product",G]),children:[N&&e(m,{node:N,className:"pdp-product__breadcrumbs"}),V("div",{className:"pdp-product__column-container pdp-product__gallery-column",children:[e("div",{className:"pdp-product__column-body",children:(Q=n==null?void 0:n.controls)!=null&&Q.desktop?e(C,{className:"pdp-product__overlay__carousel",arrows:(c==null?void 0:c.length)>1,controls:(c==null?void 0:c.length)>1?n.controls.desktop:"dots",arrowsOnMainImage:n==null?void 0:n.arrowsOnMainImage,loop:(n==null?void 0:n.loopable)&&(c==null?void 0:c.length)>1,peak:((E=n==null?void 0:n.thumbnails)==null?void 0:E.length)>1&&((_=n==null?void 0:n.peak)==null?void 0:_.desktop)||!1,gap:(n==null?void 0:n.gap)||null,width:"100%",height:"100%",defaultIndex:H||0,thumbnails:P,children:D}):e(Mt,{className:"pdp-product__images",gap:"small",children:D})}),S&&e(m,{node:S,className:"pdp-product__gallery-content"})]}),V("div",{className:"pdp-product__column-container pdp-product__content-column",children:[V("div",{className:"pdp-product__column-body",children:[V("div",{className:"pdp-product__header",children:[a&&e(m,{node:a,className:"pdp-product__title"}),I&&e(m,{node:I,className:"pdp-product__sku"})]}),V("div",{className:"pdp-product__prices",children:[K&&e(m,{node:K,className:w(["pdp-product__price-special","pdp-product__price"]),"aria-label":U,role:"text"}),u&&e(m,{node:u,className:w(["pdp-product__price-regular","pdp-product__price--grey"]),"aria-label":pt,role:"text"})]}),(F=n==null?void 0:n.controls)!=null&&F.mobile&&((j=n==null?void 0:n.controls)==null?void 0:j.mobile)==="thumbnailsRow"?e(C,{className:"pdp-product__images pdp-product__images--carousel pdp-product__images--carousel--thumbnails",width:"100%",height:"auto",arrows:(c==null?void 0:c.length)>1,controls:(c==null?void 0:c.length)>1?"thumbnailsRow":null,loop:(n==null?void 0:n.loopable)&&(c==null?void 0:c.length)>1,peak:((W=n==null?void 0:n.thumbnails)==null?void 0:W.length)>1&&((X=n==null?void 0:n.peak)==null?void 0:X.mobile)||!1,gap:(n==null?void 0:n.gap)||null,thumbnails:P,children:D}):e(C,{className:"pdp-product__images pdp-product__images--carousel",peak:((Y=n==null?void 0:n.peak)==null?void 0:Y.mobile)&&(c==null?void 0:c.length)>1,gap:(n==null?void 0:n.gap)||null,width:"100%",height:"auto",arrows:(c==null?void 0:c.length)>1,controls:(c==null?void 0:c.length)>1?"dots":null,loop:(n==null?void 0:n.loopable)&&(c==null?void 0:c.length)>1,children:D}),V("div",{className:w(["pdp-product__actions",["pdp-product__actions--out-of-stock",k]]),children:[k&&e("div",{className:"pdp-product__out-of-stock__text",children:ct}),h&&e(m,{node:h,className:w(["pdp-product__options"])}),J&&e("div",{className:"pdp-product__quantity",children:e(m,{node:J})}),M&&e(m,{node:M,className:w(["pdp-product__buttons"])})]}),L&&e(m,{node:L,className:w(["pdp-product__short_description"])}),r&&e(m,{node:r,className:w(["pdp-product__description"])}),et?e("div",{className:"pdp-product__attributes",children:et}):null]}),v&&e(m,{node:v,className:"pdp-product__info-content"})]}),O&&e(m,{node:O,className:"pdp-product__content"}),H===null?null:e(st,{className:"pdp-product__overlay",onClose:()=>t(null),centered:!0,children:e(C,{className:"pdp-product__overlay__carousel",arrows:(c==null?void 0:c.length)>1,width:"100%",height:"100%",defaultIndex:H||0,loop:(n==null?void 0:n.loopable)&&(c==null?void 0:c.length)>1,controls:(c==null?void 0:c.length)>1?"dots":null,isZoomed:!0,children:D})})]})},Mt=({children:a,gap:N=null,className:S,style:v,...O})=>{const I=mt.count(a);return e("div",{...O,className:w(["pdp-gallery-grid",S]),style:{"--gap":N?`var(--spacing-${N})`:"0px",...v},children:mt.map(a,(k,L)=>e("div",{className:"pdp-gallery-grid__item",children:e(m,{node:k,loading:L===0?"eager":"lazy"},k.props.src)},I+L))})},qt=({sku:a,hideSku:N,hideQuantity:S,hideShortDescription:v,hideDescription:O,hideAttributes:I,hideURLParams:k,hideSelectedOptionValue:L,slots:r,children:et,initialData:c,carousel:h,optionsConfig:u,useACDL:K,onAddToCart:G,zoomType:it,closeButton:J=!0,disableDropdownPreselection:M,...n})=>{var Z,at,ot,_t;const $=x("PDP.Product.AddToCart.label").label,nt=x("PDP.Product.Incrementer.label").label,rt=x("PDP.Product.Details.label").label,pt=x("PDP.Swatches.ChooseOption.label").label,[U,ct]=z(St.getConfig().defaultLocale||"en-US"),[B,H]=z(),[t=null,D]=z(c),[P,T]=z(()=>{const p=Vt(1),d={sku:a,quantity:p};return t!=null&&t.optionUIDs&&(d.optionsUIDs=t.optionUIDs),d}),[Q,E]=z(()=>{var p,d;return!(t!=null&&t.options&&((p=t==null?void 0:t.options)==null?void 0:p.length)>0&&((d=t==null?void 0:t.optionUIDs)==null?void 0:d.length)!==(t==null?void 0:t.options.length))}),_={data:t,values:P,valid:Q};function F(p){return p==null?void 0:p.some(d=>(d==null?void 0:d.typename)==="ProductViewOptionValueProduct")}f(()=>{const p=tt.on("pdp/data",l=>{l&&(D(l),T(i=>({...i,sku:l.sku,optionsUIDs:l.optionUIDs})))}),d=tt.on("pdp/setValues",l=>{T(i=>({...i,...l}))});return()=>{d==null||d.off(),p==null||p.off()}},[]),f(()=>{const p=tt.on("locale",d=>{d!==U&&(ct(d),ht(a,{preselectFirstOption:!M,anchors:u==null?void 0:u.anchorOptions}).then(D))});return()=>{p==null||p.off()}},[M,U,u==null?void 0:u.anchorOptions,a]),f(()=>{K&&c&&Object.keys(c).length>0&&kt(c)},[c]);const j=g(p=>{T(d=>({...d,...p}))},[]);f(()=>{tt.emit("pdp/values",P)},[JSON.stringify(P)]);const W=g(async p=>{var i,o;let d=Object.entries(p).filter(([b,R])=>R.label!==pt).map(([b,R])=>p[b].value).filter(b=>b!==void 0);!k&&(t!=null&&t.options)&&!F(t.options)&&yt({optionsUIDs:d.join(",")}),j({optionsUIDs:d}),E((d==null?void 0:d.length)===((i=t==null?void 0:t.options)==null?void 0:i.length));const l=await ht(a,{anchors:u==null?void 0:u.anchorOptions,isBundle:t==null?void 0:t.isBundle,optionsUIDs:d,preselectFirstOption:!M});D(l),(o=u==null?void 0:u.anchorOptions)!=null&&o.length&&X(l,d)},[a]),X=g((p,d)=>{var o;const l=(p==null?void 0:p.optionUIDs)??[];d.every(b=>l.includes(b))||(H(p==null?void 0:p.options),j({optionsUIDs:l}),E((l==null?void 0:l.length)===((o=p==null?void 0:p.options)==null?void 0:o.length)))},[a]),Y=g(p=>{Object.keys(p).length!==0&&E(!1)},[]),s=Ot(()=>{var p;return(p=t==null?void 0:t.attributes)==null?void 0:p.map(({label:d,value:l},i)=>{const o=Bt(l)?xt(l,U):l.toString();return V("li",{children:[d,": ",e("span",{dangerouslySetInnerHTML:{__html:o}})]},i)})},[t==null?void 0:t.attributes,U]),y=!S&&(t!=null&&t.inStock)?e(A,{name:"Quantity",slot:r==null?void 0:r.Quantity,context:{..._},children:e(It,{name:"quantity",defaultValue:P.quantity.toString(),value:P.quantity.toString(),min:1,"aria-label":nt,className:"pdp-product__quantity",onValue:p=>{const d=Number(p);j({quantity:d}),!k&&(t!=null&&t.options)&&(F(t.options)||yt({quantity:d}))}},"quantity")}):void 0,q=()=>{if(t!=null&&t.options)return e(A,{name:"Options",slot:r==null?void 0:r.Options,context:{..._},children:e(wt,{selectedUIDs:P.optionsUIDs,options:t.options,defaultOptions:P.optionsUIDs,selectionsToUpdate:B,hideSelectedValue:L,disablePreselections:M,onValues:W,onErrors:Y})})};return e("div",{...n,children:e(Lt,{title:e(A,{name:"Title",slot:r==null?void 0:r.Title,context:{..._},children:t==null?void 0:t.name}),sku:N?void 0:e(A,{name:"SKU",slot:r==null?void 0:r.SKU,context:{..._},children:t==null?void 0:t.sku}),options:q(),breadcrumbs:(r==null?void 0:r.Breadcrumbs)&&e(A,{name:"Breadcrumbs",slot:r==null?void 0:r.Breadcrumbs,context:{..._,setSeparator(p){this._registerMethod((...d)=>{const l=p(...d),i=l&&e(dt,{source:l});this._setProps(o=>({...o,separator:i,children:[e(lt,{separator:i,categories:o.categories})]}))})},appendLink(p){this._registerMethod((...d)=>{const{text:l,...i}=p(...d),o=e("a",{...i,children:l});this._setProps(b=>{const R=[...b.categories||[],o];return{...b,categories:R,children:[e(lt,{separator:b.separator,categories:R})]}})})},appendHTMLElement(p){this._registerMethod((...d)=>{const l=p(...d),i=this._htmlElementToVNode(l);this._setProps(o=>{const b=[...o.categories||[],i];return{...o,categories:b,children:[e(lt,{separator:o.separator,categories:b})]}})})}}}),quantity:y,actions:e(A,{name:"Actions",slot:r==null?void 0:r.Actions,context:{..._,appendButton(p){this._registerMethod((...d)=>{const l=p(...d);if(!l)return;const{text:i,icon:o,...b}=l,R=e(At,{type:"button",...b,icon:o&&e(dt,{source:o}),children:i});this._setProps(Nt=>({children:[...Nt.children||[],R]}))})}},children:!(r!=null&&r.Actions)&&e(At,{size:"medium",type:"submit",icon:e(dt,{source:"Cart"}),disabled:!(t!=null&&t.inStock)||!Q,"aria-label":$,onClick:()=>G==null?void 0:G(P),children:$})}),shortDescription:v?void 0:e(A,{name:"ShortDescription",slot:r==null?void 0:r.ShortDescription,context:{..._},children:e("div",{dangerouslySetInnerHTML:{__html:(t==null?void 0:t.shortDescription)??""}})}),description:O?void 0:e(A,{name:"Description",slot:r==null?void 0:r.Description,context:{..._},children:e("div",{dangerouslySetInnerHTML:{__html:(t==null?void 0:t.description)??""}})}),images:((Z=t==null?void 0:t.images)==null?void 0:Z.map(({label:p,url:d})=>{var l,i;return e(bt,{title:p,alt:p,src:d,width:((l=h==null?void 0:h.imageParams)==null?void 0:l.width)??960,height:((i=h==null?void 0:h.imageParams)==null?void 0:i.height)??1191,params:(h==null?void 0:h.imageParams)??{width:960}},d)}))??[],specialPrice:(at=t==null?void 0:t.prices)!=null&&at.visible?e(A,{name:"SpecialPrice",slot:r==null?void 0:r.SpecialPrice,context:{..._},children:e(Pt,{...t.prices.final,locale:ut(U)})}):void 0,price:(ot=t==null?void 0:t.prices)!=null&&ot.visible&&t.prices.regular&&t.prices.final.amount!==(t==null?void 0:t.prices.regular.amount)?e(A,{name:"RegularPrice",slot:r==null?void 0:r.RegularPrice,context:{..._},children:e(Pt,{...t.prices.regular,locale:ut(U)})}):void 0,zoomType:it,closeButton:J,carouselConfig:{...h,thumbnails:h&&Object.keys(h).length?((_t=t==null?void 0:t.images)==null?void 0:_t.map(({label:p,url:d})=>{var l,i;return e(bt,{title:p,alt:p,src:d,width:((l=h==null?void 0:h.thumbnailParams)==null?void 0:l.width)??200,height:((i=h==null?void 0:h.thumbnailParams)==null?void 0:i.height)??248,params:(h==null?void 0:h.thumbnailParams)??{width:200}},d)}))??[]:[]},outOfStock:!(t!=null&&t.inStock),attributes:I?void 0:e(A,{name:"Attributes",slot:r==null?void 0:r.Attributes,context:{..._},children:s!=null&&s.length?V(vt,{children:[rt,e("ul",{children:s})]}):null}),galleryContent:(r==null?void 0:r.GalleryContent)&&e(A,{name:"GalleryContent",slot:r.GalleryContent,context:{..._}}),infoContent:(r==null?void 0:r.InfoContent)&&e(A,{name:"InfoContent",slot:r.InfoContent,context:{..._}}),productContent:(r==null?void 0:r.Content)&&e(A,{name:"Content",slot:r.Content,context:{..._}})})})};qt.getInitialData=async function({sku:a,disableDropdownPreselection:N=!1,optionsConfig:S}){var O,I;const v=(I=(O=St.getConfig().models)==null?void 0:O.ProductDetails)==null?void 0:I.initialData;return v?Ut(v):ht(a,{preselectFirstOption:!N,anchors:S==null?void 0:S.anchorOptions})};export{qt as ProductDetails,qt as default};
