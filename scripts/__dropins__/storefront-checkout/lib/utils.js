/*! Copyright 2025 Adobe
All Rights Reserved. */
import"../chunks/fetch-graphql.js";import{s as l,e as C}from"../chunks/setShippingAddress.js";import{debounce as f}from"@dropins/tools/lib.js";import"@dropins/tools/event-bus.js";import{s as y}from"../chunks/setBillingAddress.js";import{b as H,c as J,g as K,a as L,i as Q}from"../chunks/events.js";import{s as X}from"../chunks/dom.js";import"@dropins/tools/signals.js";import"@dropins/tools/fetch-graphql.js";import"../chunks/transform-shipping-estimate.js";import"../chunks/transform-shipping-methods.js";import"../chunks/values.js";import"../chunks/synchronizeCheckout.js";import"../fragments.js";import"../chunks/classifiers.js";import"../chunks/guards.js";import"../chunks/events2.js";let p=0;function P({type:e="shipping",debounceMs:i=0,placeOrderBtn:o}){const r=e==="shipping"?l:y,t=f(s=>{p+=1,r(s).catch(console.error).finally(()=>{p-=1,p===0&&(o==null||o.setProps(n=>({...n,disabled:!1})))})},i);return({data:s,isDataValid:n})=>{if(!n)return;o==null||o.setProps(m=>({...m,disabled:!0}));const u=A(s);t(u)}}function _({debounceMs:e=0}){let i={},o=!1;const r=f(t=>{var n,u,m,g;if(o)return;const s={country_code:t.countryCode,region_name:String(((n=t.region)==null?void 0:n.regionCode)||""),region_id:String(((u=t.region)==null?void 0:u.regionId)||""),zip:t.postcode};C({criteria:s}),i={countryCode:t.countryCode,regionCode:((m=t.region)==null?void 0:m.regionCode)||"",regionId:((g=t.region)==null?void 0:g.regionId)||"",postcode:t.postcode}},e);return({data:t,isDataValid:s})=>{var n,u;if(s){o=!0;return}i.countryCode===t.countryCode&&i.regionCode===(((n=t.region)==null?void 0:n.regionCode)||"")&&i.regionId===(((u=t.region)==null?void 0:u.regionId)||"")&&i.postcode===t.postcode||r(t)}}function q(e,i){const o=document.forms.namedItem(e);return!o||!(o&&o.offsetParent!==null)?!0:(o.setAttribute("novalidate",""),i&&i.current?i.current.handleValidationSubmit(!1):o.checkValidity())}function D(e){return document.createRange().createContextualFragment(e)}function $(e){return function(i){return e.querySelector(i)}}function c(e,i,o){if(!e||!o)return;const r=document.head.querySelector(`meta[${o}="${e}"]`);if(!i){r==null||r.remove();return}if(r)r.setAttribute("content",i);else{const t=document.createElement("meta");t.setAttribute(o,e),t.setAttribute("content",i),document.head.appendChild(t)}}function z(e){c("title",e,"name"),c("description",e,"name"),c("keywords",e,"name"),c("og:description",e,"property"),c("og:title",e,"property"),c("og:url",window.location.href,"property")}const A=e=>{var r,t,s;if(!(!(e!=null&&e.id)&&!(e!=null&&e.uid)))return{customerAddressId:e.id,customerAddressUid:e.uid};const o=(r=e.customAttributes)==null?void 0:r.map(({code:n,value:u})=>({code:n,value:String(u)}));return{address:{city:e.city,company:e==null?void 0:e.company,countryCode:e.countryCode,customAttributes:o,fax:e.fax,firstName:e.firstName,lastName:e.lastName,middleName:e.middleName,postcode:e.postcode,prefix:e.prefix,region:(t=e==null?void 0:e.region)==null?void 0:t.regionCode,regionId:(s=e==null?void 0:e.region)==null?void 0:s.regionId,street:e.street,suffix:e.suffix,telephone:e.telephone,vatId:e.vatId,saveInAddressBook:e.saveAddressBook}}},U=e=>{var i,o,r;return{city:e.city,company:e==null?void 0:e.company,countryCode:(i=e.country)==null?void 0:i.code,customAttributes:e.customAttributes,fax:e.fax,firstName:e.firstName,lastName:e.lastName,middleName:e.middleName,postcode:e.postCode,prefix:e.prefix,region:{regionCode:(o=e.region)==null?void 0:o.code,regionId:(r=e.region)==null?void 0:r.id},street:e.street,suffix:e.suffix,telephone:e.telephone,vatId:e.vatId}};export{D as createFragment,c as createMetaTag,$ as createScopedSelector,_ as estimateShippingCost,H as getCartAddress,J as getCartPaymentMethod,K as getCartShippingMethod,L as isEmptyCart,Q as isVirtualCart,X as scrollToElement,P as setAddressOnCart,z as setMetaTags,A as transformAddressFormValuesToAddressInput,U as transformCartAddressToFormValues,q as validateForm};
//# sourceMappingURL=utils.js.map
