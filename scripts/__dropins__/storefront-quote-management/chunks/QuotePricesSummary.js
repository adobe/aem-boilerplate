/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as t,jsxs as n,Fragment as I}from"@dropins/tools/preact-jsx-runtime.js";import{classes as b,VComponent as k}from"@dropins/tools/lib.js";/* empty css                             */import{Skeleton as R,SkeletonRow as V,Input as W,Picker as E,Price as _,Checkbox as J,Button as K,Table as X,Accordion as Y,AccordionSection as Z}from"@dropins/tools/components.js";import{h as L}from"@dropins/tools/preact.js";import{useState as H,useEffect as U}from"@dropins/tools/preact-hooks.js";import{useText as C}from"@dropins/tools/i18n.js";const ce=({className:g,loading:i,table:l,pricesSummary:r,...a})=>i?t(ee,{}):n("div",{className:b(["quote-management-items-quoted",g]),...a,children:[l&&t(k,{node:l,className:b(["quote-management-items-quoted__table"]),"data-testid":"quote-management-items-quoted__table"}),r&&t(k,{node:r,className:b(["quote-management-items-quoted__prices-summary"]),"data-testid":"quote-management-items-quoted__prices-summary"})]}),ee=()=>t(R,{"data-testid":"items-quoted-skeleton",children:t(V,{variant:"row",fullWidth:!0,size:"medium",lines:4,multilineGap:"xsmall"})}),ie=({className:g,items:i,canEdit:l,readOnly:r=!1,onItemCheckboxChange:a,onItemDropdownChange:m,onQuantityChange:p,onUpdate:N,dropdownSelections:h,...f})=>{const[x,P]=H({}),[y,T]=H({});U(()=>{const e={};i.forEach(s=>{e[s.uid]=s.quantity}),P(e),T(e)},[i]);const S=Object.keys(y).some(e=>y[e]!==x[e]),u=C({updateButton:"NegotiableQuote.Manage.productListTable.submitButton",productNameHeader:"NegotiableQuote.Manage.productListTable.headers.productName",skuHeader:"NegotiableQuote.Manage.productListTable.headers.sku",priceHeader:"NegotiableQuote.Manage.productListTable.headers.price",quantityHeader:"NegotiableQuote.Manage.productListTable.headers.quantity",discountHeader:"NegotiableQuote.Manage.productListTable.headers.discount",subtotalHeader:"NegotiableQuote.Manage.productListTable.headers.subtotal",actionsHeader:"NegotiableQuote.Manage.productListTable.headers.actions",editNoteToSeller:"NegotiableQuote.Manage.productListTable.actions.editNoteToSeller",remove:"NegotiableQuote.Manage.productListTable.actions.remove"}),v=[{label:u.productNameHeader,key:"productName"},{label:u.skuHeader,key:"sku"},{label:u.priceHeader,key:"price"},{label:u.quantityHeader,key:"quantity"},{label:u.discountHeader,key:"discount"},{label:u.subtotalHeader,key:"subtotal"}];l&&!r&&(v.unshift({label:"",key:"checkbox"}),v.push({label:u.actionsHeader,key:"actions"}));const M=(e,s)=>{const o=e.target.checked;a==null||a(s,o)},$=(e,s)=>{const o=e.target.value;m==null||m(s,o)},B=(e,s)=>{const o=parseInt(e.target.value,10);!isNaN(o)&&o>0&&(T(c=>({...c,[s.uid]:o})),p==null||p(s,o))},O=e=>{e.preventDefault(),N==null||N(e)},w=(e,s)=>e>0?n("div",{className:"quote-management-product-list-table__discount-container",children:[n("span",{className:"quote-management-product-list-table__discount-percent",children:[s,"%"]}),n("span",{className:"quote-management-product-list-table__discount-price",children:["(",t(_,{amount:e}),")"]})]}):void 0,j=e=>{var c,Q;const s=(c=e.configurableOptions)==null?void 0:c.map(d=>n("div",{className:"quote-management-product-list-table__configurable-option",children:[n("span",{className:"quote-management-product-list-table__configurable-option-label",children:[d.optionLabel,":"]}),t("span",{className:"quote-management-product-list-table__configurable-option-value",children:d.valueLabel})]},d.optionLabel)),o=(Q=e.bundleOptions)==null?void 0:Q.map(d=>n("div",{className:"quote-management-product-list-table__bundle-option",children:[t("span",{className:"quote-management-product-list-table__bundle-option-label",children:d.label}),t("div",{className:"quote-management-product-list-table__bundle-option-values",children:d.values.map(q=>n("span",{className:"quote-management-product-list-table__bundle-option-value",children:[n("span",{className:"quote-management-product-list-table__bundle-option-value-quantity",children:[q.quantity," x"]}),t("span",{className:"quote-management-product-list-table__bundle-option-value-label",children:q.label}),t(_,{className:"quote-management-product-list-table__bundle-option-value-original-price",amount:q.originalPrice.value,currency:q.originalPrice.currency,weight:"normal"})]},q.label))})]},d.label));return n("div",{className:"quote-management-product-list-table__product-name-container",children:[t("span",{className:"quote-management-product-list-table__product-name",children:e.product.name}),s,o]})},A=i.map(e=>{var o;const s=l?t(W,{className:"quote-management-product-list-table__quantity-input",type:"number",min:"1",value:((o=y[e.uid])==null?void 0:o.toString())||e.quantity.toString(),onChange:c=>B(c,e),disabled:r||!l,"data-testid":`quantity-input-${e.product.sku}`}):t("span",{className:"quote-management-product-list-table__quantity",children:e.quantity});return{checkbox:t(J,{className:"quote-management-product-list-table__checkbox",name:"itemSelected","data-testid":`item-checkbox-${e.product.sku}`,onChange:c=>M(c,e),value:e.product.sku}),productName:j(e),sku:t("span",{className:"quote-management-product-list-table__sku",children:e.product.sku}),price:t(_,{className:"quote-management-product-list-table__price",amount:e.prices.originalItemPrice.value,currency:e.prices.originalItemPrice.currency}),quantity:s,discount:e.catalogDiscount?w(e.catalogDiscount.amountOff,e.catalogDiscount.percentOff):void 0,subtotal:t(_,{className:"quote-management-product-list-table__subtotal",amount:e.prices.rowTotal.value,currency:e.prices.rowTotal.currency}),actions:t(E,{className:"quote-management-product-list-table__actions","data-testid":`item-dropdown-${e.product.sku}`,name:`item-dropdown-${e.product.sku}`,handleSelect:c=>$(c,e),placeholder:"Select",value:(h==null?void 0:h[e.uid])??"",options:[{text:u.editNoteToSeller,value:"edit"},{text:u.remove,value:"remove"}]})}}),D=t(X,{columns:v,rowData:A,"data-testid":"product-list-table",mobileLayout:"stacked"}),z=l?L("form",{}):L("div",{}),F=l?{onSubmit:O,...f}:f,G=t(K,{type:"submit",disabled:r||!l||!S,"data-testid":"product-list-table-submit-button",children:u.updateButton});return n(k,{node:z,className:b(["quote-management-product-list-table-container",g]),"data-testid":"product-list-table-container",...F,children:[D,t("div",{className:"quote-management-product-list-table-container__submit-container",children:G})]})},re=({className:g,entries:i,...l})=>{const r=a=>{var p;const m=(p=a.children)==null?void 0:p.map(r);return t("div",{className:"quote-management-quote-prices-summary__entry","data-testid":`quote-prices-summary-entry-${a.id}`,children:m?t(Y,{className:"quote-management-quote-prices-summary__accordion","data-testid":`quote-prices-summary-entry-accordion-${a.id}`,children:t(Z,{className:"quote-management-quote-prices-summary__accordion-section",title:a.label,ariaLabelTitle:a.label,secondaryText:a.value,children:m})}):n(I,{children:[t("span",{className:b(["quote-management-quote-prices-summary__label",["quote-management-quote-prices-summary__label--strong",a.strong]]),"data-testid":`quote-prices-summary-entry-label-${a.id}`,children:a.label}),t("span",{className:"quote-management-quote-prices-summary__value","data-testid":`quote-prices-summary-entry-value-${a.id}`,children:a.value})]})},a.id)};return t("div",{className:b(["quote-management-quote-prices-summary",g]),"data-testid":"quote-prices-summary",...l,children:i==null?void 0:i.map(r)})};export{ce as I,ie as P,re as Q};
//# sourceMappingURL=QuotePricesSummary.js.map
