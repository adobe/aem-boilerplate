/*! Copyright 2026 Adobe
All Rights Reserved. */
import{jsxs as l,jsx as o}from"@dropins/tools/preact-jsx-runtime.js";import{classes as h}from"@dropins/tools/lib.js";import{v as _,F}from"./Button.js";import"@dropins/tools/event-bus.js";import"@dropins/tools/recaptcha.js";import{r as P}from"./requestPasswordResetEmail.js";import{g as v,c as p,u as x,B as g}from"./Button2.js";import{useState as N,useCallback as y}from"@dropins/tools/preact-hooks.js";import{useText as b}from"@dropins/tools/i18n.js";import{Header as E,InLineAlert as L}from"@dropins/tools/components.js";import{s as T,D}from"./simplifyTransformAttributesForm.js";import*as R from"@dropins/tools/preact-compat.js";const A=s=>R.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},R.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M7.74512 9.87701L12.0001 14.132L16.2551 9.87701",stroke:"currentColor",strokeWidth:1,strokeLinecap:"square",strokeLinejoin:"round"})),j=({routeSignIn:s,onErrorCallback:a,onSuccessCallback:m,setActiveComponent:n,handleSetInLineAlertProps:t})=>{const c=b({successPasswordResetEmailNotification:"Auth.Notification.successPasswordResetEmailNotification"}),[i,e]=N(!1),f=y(async d=>{d.preventDefault();const r=v(d.target);if(!_(r==null?void 0:r.email))return;e(!0);const w=await P(r.email);if(e(!1),!w.success){a==null||a(w),t==null||t({type:"error",text:w.message});return}if(m){await m();return}t==null||t({type:"success",text:c.successPasswordResetEmailNotification.replace("{email}",r.email)})},[t,a,m,c.successPasswordResetEmailNotification]),u=y(()=>{if(p(n)){n("signInForm");return}p(s)&&(window.location.href=s())},[n,s]);return{isLoading:i,submitResetPassword:f,redirectToSignInPage:u}},J=({formSize:s="default",routeSignIn:a,setActiveComponent:m,onErrorCallback:n,onSuccessCallback:t,...c})=>{const i=b({title:"Auth.ResetPasswordForm.title",buttonPrimary:"Auth.ResetPasswordForm.buttonPrimary",buttonSecondary:"Auth.ResetPasswordForm.buttonSecondary",formAriaLabel:"Auth.ResetPasswordForm.formAriaLabel"}),{inLineAlertProps:e,handleSetInLineAlertProps:f}=x(),{isLoading:u,submitResetPassword:d,redirectToSignInPage:r}=j({routeSignIn:a,setActiveComponent:m,onErrorCallback:n,onSuccessCallback:t,handleSetInLineAlertProps:f});return l("div",{...c,className:h(["auth-reset-password-form",`auth-reset-password-form--${s}`]),"data-testid":"resetPasswordForm",children:[o(E,{title:i.title,divider:!1,className:"auth-reset-password-form__title"}),e.text?o(L,{className:"auth-reset-password-form__notification",type:e.type,variant:"secondary",heading:e.text,icon:e.icon}):null,o(F,{"aria-labelledby":i.formAriaLabel,name:"resetPassword_form",className:"auth-reset-password-form__form",onSubmit:d,loading:u,fieldsConfig:T(D),children:l("div",{className:"auth-reset-password-form__buttons",children:[o(g,{className:"auth-reset-password-form__buttons--signin",type:"button",variant:"tertiary",style:{padding:"0"},icon:o(A,{style:{transform:"rotate(90deg)"}}),buttonText:i.buttonSecondary,enableLoader:!1,onClick:r}),o(g,{type:"submit",buttonText:i.buttonPrimary,variant:"primary",enableLoader:u})]})}),o("div",{id:"requestPasswordResetEmail"})]})};export{J as R};
//# sourceMappingURL=ResetPasswordForm.js.map
