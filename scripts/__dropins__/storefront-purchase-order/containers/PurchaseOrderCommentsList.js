/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as e,jsxs as a}from"@dropins/tools/preact-jsx-runtime.js";import{classes as f}from"@dropins/tools/lib.js";import{useState as v}from"@dropins/tools/preact-hooks.js";import"@dropins/tools/event-bus.js";import{Button as x,Skeleton as L,SkeletonRow as u,Card as _}from"@dropins/tools/components.js";import"../chunks/PurchaseOrderHistoryLogContent.js";import{u as P}from"../chunks/usePurchaseOrderData.js";import{useText as b,Text as p}from"@dropins/tools/i18n.js";import{P as N}from"../chunks/PurchaseOrdersHeader.js";import{Fragment as g}from"@dropins/tools/preact.js";import{f as C}from"../chunks/formatDate.js";const O=({commentsList:t=[],visibleRecordsLimit:o=5})=>{const[n,d]=v(o),s=t.length>n,c=t.length<=o,i=b({showMoreLabel:"PurchaseOrders.comments.view.ariaLabel.showMore",showLessLabel:"PurchaseOrders.comments.view.ariaLabel.showLess"});return t.length?a("div",{className:"b2b-purchase-order-comment-list-content",children:[e("ul",{className:"b2b-purchase-order-comment-list-content__list",children:t.slice(0,n).map((r,m)=>{var l,h;const w=Math.min(n,t.length);return a(g,{children:[a("li",{className:"b2b-purchase-order-comment-list-content__item",children:[a("div",{className:"b2b-purchase-order-comment-list-content__title",children:[C(r.createdAt),(l=r.author)!=null&&l.firstname&&((h=r.author)!=null&&h.lastname)?` (${r.author.firstname} ${r.author.lastname})`:""]}),e("div",{className:"b2b-purchase-order-comment-list-content__description",children:r.text})]}),m<w-1&&e("hr",{className:"b2b-purchase-order-comment-list-content__divider"})]},r.uid)})}),!c&&e("div",{className:"b2b-purchase-order-comment-list-content__actions",children:e(x,{variant:"secondary","aria-expanded":!s,"aria-label":s?i.showMoreLabel:i.showLessLabel,onClick:()=>{d(s?t.length:o)},children:e(p,{id:`PurchaseOrders.comments.view.buttons.${s?"viewMore":"viewLess"}`})})})]}):e("div",{className:"b2b-purchase-order-comment-list-content",children:e(p,{id:"PurchaseOrders.comments.view.emptyText"})})},A=({withHeader:t=!0,withWrapper:o=!0,visibleRecordsLimit:n=5,className:d})=>{const{poDataLoading:s,purchaseOrderData:c}=P(),i=b({headerText:"PurchaseOrders.comments.view.headerText"}),r=(c==null?void 0:c.comments)||[],m=s?a(L,{rowGap:"medium","data-testid":"comment-list-loader",children:[e(u,{size:"small",variant:"row",fullWidth:!0,lines:1,style:{maxWidth:300}}),e(u,{size:"medium",variant:"row",fullWidth:!0,lines:1})]}):e(O,{commentsList:r.reverse(),visibleRecordsLimit:n});return a("div",{className:f(["b2b-purchase-order-comment-list",d]),"data-testid":"order-comment-list-container",children:[t?e(N,{headerText:i.headerText}):null,o?e(_,{variant:"secondary","data-testid":"orderCommentListCard",children:m}):m]})};export{A as PurchaseOrderCommentsList,A as default};
//# sourceMappingURL=PurchaseOrderCommentsList.js.map
