/*! Copyright 2025 Adobe
All Rights Reserved. */
var f=Object.defineProperty;var n=(i,e,t)=>e in i?f(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var l=(i,e,t)=>n(i,typeof e!="symbol"?e+"":e,t);const d=Date.now().toString(36).substring(2);class c{static _getScopedEvent(e){return t=>e?`${e}/${t}`:t}static lastPayload(e,t){var r;return t!=null&&t.scope&&(e=this._getScopedEvent(t==null?void 0:t.scope)(e)),(r=this._lastEvent[e])==null?void 0:r.payload}static on(e,t,r){if(typeof BroadcastChannel>"u")return;const s=new BroadcastChannel("ElsieSDK/EventBus");if(r!=null&&r.scope&&(e=this._getScopedEvent(r==null?void 0:r.scope)(e)),r!=null&&r.eager){const a=this._lastEvent[e];a&&t(a.payload)}return s.addEventListener("message",({data:a})=>{this._identifier&&this._identifier!==a.identifier||a.event===e&&t(a.payload)}),{off(){s.close()}}}static emit(e,t,r){if(typeof BroadcastChannel>"u")return;const s=new BroadcastChannel("ElsieSDK/EventBus");r!=null&&r.scope&&(e=this._getScopedEvent(r==null?void 0:r.scope)(e)),s.postMessage({event:e,identifier:this._identifier,payload:t}),this._lastEvent[e]={payload:t},s.close()}static enableLogger(e){var t;typeof BroadcastChannel>"u"||((t=this._logger)==null||t.close(),this._logger=null,e!==!1&&(this._logger=new BroadcastChannel("ElsieSDK/EventBus"),this._logger.addEventListener("message",({data:r})=>{this._identifier&&this._identifier!==r.identifier||(console.group(`ðŸ“¡ Event (${r.identifier}) âž¡ ${r.event}`),console.log(r.payload),console.groupEnd())})))}}l(c,"_identifier",d),l(c,"_logger",null),l(c,"_lastEvent",{});export{c as events};
//# sourceMappingURL=event-bus.js.map
