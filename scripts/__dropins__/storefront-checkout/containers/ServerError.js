/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as s,jsxs as n}from"@dropins/tools/preact-jsx-runtime.js";/* empty css                             */import{IllustratedMessage as l,Icon as p,Button as f}from"@dropins/tools/components.js";import"../chunks/TermsAndConditions.js";import{classes as a}from"@dropins/tools/lib.js";/* empty css                      *//* empty css                  */import{S as h}from"../chunks/OrderError.js";import{useText as d}from"@dropins/tools/i18n.js";/* empty css                       */import{a as u}from"../chunks/transform-store-config.js";import"../chunks/state.js";import"@dropins/tools/event-bus.js";import{useRef as v,useEffect as m}from"@dropins/tools/preact-hooks.js";import"@dropins/tools/preact-compat.js";import"@dropins/tools/fetch-graphql.js";import"../chunks/store-config.js";import"@dropins/tools/signals.js";const g=({className:e,contactSupport:t,errorMessage:i,onClick:c,errorMessageRef:r})=>{const o=d({Title:"Checkout.ServerError.title",Message:"Checkout.ServerError.message",ContactSupport:"Checkout.ServerError.contactSupport",Button:"Checkout.ServerError.button"});return s(l,{"aria-describedby":"checkout-server-error__message","aria-invalid":"true","aria-live":"polite",className:a(["checkout-server-error",e]),"data-testid":"checkout-server-error",heading:i??o.Title,message:n("p",{"data-testid":"checkout-server-error-message",ref:r,id:a(["checkout-server-error__message"]),children:[o.Message,s("br",{}),s("span",{children:t??o.ContactSupport})]}),icon:s(p,{className:a(["checkout-server-error__icon"]),source:h}),action:s(f,{className:a(["checkout-server-error__button"]),onClick:c,children:o.Button})})};function k(e){e.scrollIntoView({behavior:"smooth"}),e.focus()}const A=({onRetry:e,onServerError:t,autoScroll:i=!1})=>{const c=v(null),r=u.value,o=async()=>{e==null||e(),u.value=void 0};return m(()=>{r&&(t==null||t(r))},[r,t]),m(()=>{!i||!r||!c.current||k(c.current)},[r,i]),r?s(g,{errorMessageRef:c,errorMessage:r,onClick:o}):null};export{A as ServerError,A as default};
