/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as a,jsxs as g,Fragment as J}from"@dropins/tools/preact-jsx-runtime.js";import{classes as ee,Slot as fe}from"@dropins/tools/lib.js";import{Card as G,Button as X,Field as M,Input as R,Picker as ue,Header as pe,InLineAlert as ye,ProgressSpinner as ve,Skeleton as Ae,SkeletonRow as K}from"@dropins/tools/components.js";import{useState as V,useEffect as Z,useMemo as U,useRef as Q,useCallback as F}from"@dropins/tools/preact-hooks.js";import{g as ge,v as Ce,a as Ne,u as Ee,r as _e}from"../chunks/getCountries.js";import{useText as O}from"@dropins/tools/i18n.js";import*as x from"@dropins/tools/preact-compat.js";import"@dropins/tools/event-bus.js";import"@dropins/tools/fetch-graphql.js";const be=({company:t,slots:e,showEditForm:l,handleShowEditForm:u})=>{const o=O({editButton:"Company.shared.buttons.edit",noDataMessage:"Company.CompanyProfile.companyProfileCard.noDataMessage",companyName:"Company.shared.fields.companyName",email:"Company.shared.fields.email",legalName:"Company.shared.fields.legalName",vatTaxId:"Company.shared.fields.vatTaxId",resellerId:"Company.shared.fields.resellerId",legalAddress:"Company.shared.fields.legalAddress",contacts:"Company.CompanyProfile.companyProfileCard.contacts",companyAdministrator:"Company.CompanyProfile.companyProfileCard.companyAdministrator",salesRepresentative:"Company.CompanyProfile.companyProfileCard.salesRepresentative",paymentInformation:"Company.CompanyProfile.companyProfileCard.paymentInformation",shippingInformation:"Company.CompanyProfile.companyProfileCard.shippingInformation",availablePaymentMethods:"Company.CompanyProfile.companyProfileCard.availablePaymentMethods",availableShippingMethods:"Company.CompanyProfile.companyProfileCard.availableShippingMethods",noPaymentMethods:"Company.CompanyProfile.companyProfileCard.noPaymentMethods",noShippingMethods:"Company.CompanyProfile.companyProfileCard.noShippingMethods"});if(!t)return a(G,{variant:"secondary",className:"account-company-profile-card",children:a("div",{className:"account-company-profile-card__wrapper",children:a("div",{className:"account-company-profile-card__content",children:a("div",{className:"account-company-profile-card__no-data",children:a("p",{children:o.noDataMessage})})})})});const n=t.permissionsFlags||{canViewAccount:!0,canViewAddress:!0,canViewContacts:!0,canViewPaymentInformation:!0,canViewShippingInformation:!0},r=[n.canViewAccount?{name:"name",label:o.companyName,value:t.name||""}:null,n.canViewAccount?{name:"email",label:o.email,value:t.email||""}:null,n.canViewAccount?{name:"legalName",label:o.legalName,value:t.legalName||""}:null,n.canViewAccount?{name:"vatTaxId",label:o.vatTaxId,value:t.vatTaxId||""}:null,n.canViewAccount?{name:"resellerId",label:o.resellerId,value:t.resellerId||""}:null].filter(Boolean);return a(G,{variant:"secondary",className:ee(["account-company-profile-card",["account-company-profile-card-short",l]]),children:g("div",{className:"account-company-profile-card__wrapper",children:[a("div",{className:"account-company-profile-card__actions",children:(t.canEditAccount||t.canEditAddress)&&a(X,{type:"button",variant:"tertiary",onClick:u,children:o.editButton})}),a("div",{className:"account-company-profile-card__content",children:(()=>{var f,s;const A=g(J,{children:[r.map((i,p)=>{if(!i.value)return null;const v=i.label?`${i.label}: ${i.value}`:i.value;return a("p",{"data-testid":`${i.name}_${p}`,children:v},`${i.name}_${p}`)}),n.canViewAddress&&t.legalAddress&&g("div",{className:"company-legal-address",children:[a("p",{children:g("strong",{children:[o.legalAddress,":"]})}),(f=t.legalAddress.street)==null?void 0:f.map((i,p)=>a("p",{children:i},p)),g("p",{children:[t.legalAddress.city,", ",(s=t.legalAddress.region)==null?void 0:s.region," ",t.legalAddress.postcode]}),a("p",{children:t.legalAddress.countryCode}),t.legalAddress.telephone&&g("p",{children:["Phone: ",t.legalAddress.telephone]})]}),n.canViewContacts&&(t.companyAdmin||t.salesRepresentative)&&g("div",{className:"company-contacts",children:[a("p",{children:g("strong",{children:[o.contacts,":"]})}),t.companyAdmin&&g("div",{className:"company-contact",children:[a("p",{children:g("strong",{children:[o.companyAdministrator,":"]})}),g("p",{children:[t.companyAdmin.firstname," ",t.companyAdmin.lastname]}),t.companyAdmin.jobTitle&&a("p",{children:t.companyAdmin.jobTitle}),a("p",{children:t.companyAdmin.email})]}),t.salesRepresentative&&g("div",{className:"company-contact",children:[a("p",{children:g("strong",{children:[o.salesRepresentative,":"]})}),g("p",{children:[t.salesRepresentative.firstname," ",t.salesRepresentative.lastname]}),a("p",{children:t.salesRepresentative.email})]})]}),n.canViewPaymentInformation&&g("div",{className:"company-payment-methods",children:[a("p",{children:g("strong",{children:[o.paymentInformation,":"]})}),t.availablePaymentMethods&&t.availablePaymentMethods.length>0?g(J,{children:[a("p",{children:g("strong",{children:[o.availablePaymentMethods,":"]})}),a("ul",{className:"payment-methods-list",children:t.availablePaymentMethods.map((i,p)=>a("li",{children:i.title},`payment_${p}`))})]}):a("div",{className:"message message-notice notice",children:a("div",{children:o.noPaymentMethods})})]}),n.canViewShippingInformation&&g("div",{className:"company-shipping-methods",children:[a("p",{children:g("strong",{children:[o.shippingInformation,":"]})}),t.availableShippingMethods&&t.availableShippingMethods.length>0?g(J,{children:[a("p",{children:g("strong",{children:[o.availableShippingMethods,":"]})}),a("ul",{className:"shipping-methods-list",children:t.availableShippingMethods.map((i,p)=>a("li",{children:i.title},`shipping_${p}`))})]}):a("div",{className:"message message-notice notice",children:a("div",{children:o.noShippingMethods})})]})]});return e!=null&&e.CompanyData?a(fe,{name:"CompanyData",slot:e.CompanyData,context:{companyData:r,Default:A}}):A})()})]})})},we=t=>{const[e,l]=V(null),[u,o]=V(!0);Z(()=>{let s=!0;return ge().then(({availableCountries:i,countriesWithRequiredRegion:p,optionalZipCountries:v})=>{s&&(l({availableCountries:i,countriesWithRequiredRegion:p,optionalZipCountries:v}),o(!1))}).catch(()=>{s&&o(!1)}),()=>{s=!1}},[]);const n=U(()=>(e==null?void 0:e.availableCountries)||[],[e]),r=U(()=>{if(!t||!e)return[];const s=e.availableCountries.find(i=>i.value===t);return!(s!=null&&s.availableRegions)||s.availableRegions.length===0?[]:s.availableRegions.map(i=>({text:i.name,value:`${i.code},${i.id}`}))},[t,e]),A=U(()=>!t||!e?!1:e.countriesWithRequiredRegion.includes(t),[t,e]),f=U(()=>r.length>0,[r]);return{countryOptions:n,regionOptions:r,isRegionRequired:A,hasRegionOptions:f,loadingCountries:u}},Ie=({loading:t,value:e,errors:l,touched:u,onChange:o,onBlur:n,namePrefix:r="",fieldPathPrefix:A=""})=>{const f=O({companyName:"Company.shared.fields.companyName",email:"Company.shared.fields.email",legalName:"Company.shared.fields.legalName",vatTaxId:"Company.shared.fields.vatTaxId",resellerId:"Company.shared.fields.resellerId"}),s=r?`${r}_`:"",i=p=>A?`${A}.${p}`:p;return g("div",{className:"account-edit-company-profile-form__group",children:[a(M,{label:f.companyName,required:!0,className:"account-edit-company-profile-form__field",error:u.name&&l.name?l.name:void 0,children:a(R,{name:`${s}name`,type:"text",value:e.name,onValue:o(i("name")),onBlur:()=>n(i("name")),disabled:!!t,variant:"primary",size:"medium"})}),a(M,{label:f.email,required:!0,className:"account-edit-company-profile-form__field",error:u.email&&l.email?l.email:void 0,children:a(R,{name:`${s}email`,type:"email",value:e.email,onValue:o(i("email")),onBlur:()=>n(i("email")),disabled:!!t,variant:"primary",size:"medium"})}),a(M,{label:f.legalName,className:"account-edit-company-profile-form__field",children:a(R,{name:`${s}legalName`,type:"text",value:e.legalName,onValue:o(i("legalName")),disabled:!!t,variant:"primary",size:"medium"})}),a(M,{label:f.vatTaxId,className:"account-edit-company-profile-form__field",children:a(R,{name:`${s}vatTaxId`,type:"text",value:e.vatTaxId,onValue:o(i("vatTaxId")),disabled:!!t,variant:"primary",size:"medium"})}),a(M,{label:f.resellerId,className:"account-edit-company-profile-form__field",children:a(R,{name:`${s}resellerId`,type:"text",value:e.resellerId,onValue:o(i("resellerId")),disabled:!!t,variant:"primary",size:"medium"})})]})},Ve=({loading:t,loadingCountries:e,value:l,errors:u,touched:o,onChange:n,onBlur:r,countryOptions:A,regionOptions:f,isRegionRequired:s,hasRegionOptions:i,namePrefix:p="legalAddress",fieldPathPrefix:v="legalAddress",requiredConfig:C})=>{var W;const w=O({legalAddress:"Company.shared.fields.legalAddress",streetAddress:"Company.shared.fields.streetAddress",city:"Company.shared.fields.city",country:"Company.shared.fields.country",stateProvince:"Company.shared.fields.stateProvince",zipPostalCode:"Company.shared.fields.zipPostalCode",phoneNumber:"Company.shared.fields.phoneNumber"}),P={street:`${p}_street`,street2:`${p}_street2`,city:`${p}_city`,countryCode:`${p}_countryCode`,region:`${p}_region`,postcode:`${p}_postcode`,telephone:`${p}_telephone`},m={street:`${v}.street`,street2:`${v}.street2`,city:`${v}.city`,countryCode:`${v}.countryCode`,region:`${v}.region`,regionCode:`${v}.regionCode`,postcode:`${v}.postcode`,telephone:`${v}.telephone`},T={street:(C==null?void 0:C.street)??!0,city:(C==null?void 0:C.city)??!0,postcode:(C==null?void 0:C.postcode)??!0,telephone:(C==null?void 0:C.telephone)??!0};return g("div",{className:"account-edit-company-profile-form__section",children:[a("h3",{className:"account-edit-company-profile-form__section-title",children:w.legalAddress}),a(M,{label:w.streetAddress,required:T.street,className:"account-edit-company-profile-form__field",error:o[m.street]&&u[m.street]?u[m.street]:void 0,children:a(R,{name:P.street,type:"text",value:l.street,onValue:n(m.street),onBlur:()=>r(m.street),disabled:!!t,variant:"primary",size:"medium"})}),a(M,{label:`${w.streetAddress} 2`,className:"account-edit-company-profile-form__field",children:a(R,{name:P.street2,type:"text",value:l.street2,onValue:n(m.street2),disabled:!!t,variant:"primary",size:"medium"})}),a(M,{label:w.city,required:T.city,className:"account-edit-company-profile-form__field",error:o[m.city]&&u[m.city]?u[m.city]:void 0,children:a(R,{name:P.city,type:"text",value:l.city,onValue:n(m.city),onBlur:()=>r(m.city),disabled:!!t,variant:"primary",size:"medium"})}),a(M,{label:w.country,required:!0,className:"account-edit-company-profile-form__field",error:o[m.countryCode]&&u[m.countryCode]?u[m.countryCode]:void 0,children:a(ue,{name:P.countryCode,floatingLabel:`${w.country} *`,placeholder:w.country,options:A,value:l.countryCode,handleSelect:_=>{const S=_.target;n(m.countryCode)(S.value)},onBlur:()=>r(m.countryCode),disabled:!!t||e})}),a(M,{label:w.stateProvince,required:s,className:"account-edit-company-profile-form__field",error:o["legalAddress.region"]&&u["legalAddress.region"]?u["legalAddress.region"]:void 0,children:i?a(ue,{name:"legalAddress_region",floatingLabel:`${w.stateProvince} ${s?"*":""}`,placeholder:w.stateProvince,options:f,value:l.regionCode&&((W=f.find(_=>_.value.split(",")[0]===l.regionCode))==null?void 0:W.value)||"",handleSelect:_=>{var H;const S=_.target,[D]=S.value.split(","),z=((H=f.find($=>$.value===S.value))==null?void 0:H.text)||"";n(m.region)(z),n(m.regionCode)(D)},onBlur:()=>r(m.region),disabled:!!t||e},`region_picker_${l.countryCode}`):a(R,{name:P.region,type:"text",value:l.region,onValue:n(m.region),onBlur:()=>r(m.region),disabled:!!t||e,variant:"primary",size:"medium"},`region_input_${l.countryCode}`)}),a(M,{label:w.zipPostalCode,required:T.postcode,className:"account-edit-company-profile-form__field",error:o[m.postcode]&&u[m.postcode]?u[m.postcode]:void 0,children:a(R,{name:P.postcode,type:"text",value:l.postcode,onValue:n(m.postcode),onBlur:()=>r(m.postcode),disabled:!!t,variant:"primary",size:"medium"})}),a(M,{label:w.phoneNumber,required:T.telephone,className:"account-edit-company-profile-form__field",error:o[m.telephone]&&u[m.telephone]?u[m.telephone]:void 0,children:a(R,{name:P.telephone,type:"tel",value:l.telephone,onValue:n(m.telephone),onBlur:()=>r(m.telephone),disabled:!!t,variant:"primary",size:"medium"})})]})},xe=({inLineAlertProps:t,company:e,loading:l=!1,onSubmit:u,onCancel:o})=>{var $,B,j,Y,q,y,I,te,ae,re,se,le,ne,ie;const n=O({title:"Company.EditCompanyProfile.title",cancel:"Company.shared.buttons.cancel",save:"Company.shared.buttons.save",saving:"Company.shared.buttons.saving",required:"Company.shared.validation.required",invalidEmail:"Company.shared.validation.invalidEmail",companyNameRequired:"Company.shared.validation.companyNameRequired",emailRequired:"Company.shared.validation.emailRequired",emailNotAvailable:"Company.shared.validation.emailNotAvailable"}),[r,A]=V({name:(e==null?void 0:e.name)||"",email:(e==null?void 0:e.email)||"",legalName:(e==null?void 0:e.legalName)||"",vatTaxId:(e==null?void 0:e.vatTaxId)||"",resellerId:(e==null?void 0:e.resellerId)||"",legalAddress:{street:((B=($=e==null?void 0:e.legalAddress)==null?void 0:$.street)==null?void 0:B[0])||"",street2:((Y=(j=e==null?void 0:e.legalAddress)==null?void 0:j.street)==null?void 0:Y[1])||"",city:((q=e==null?void 0:e.legalAddress)==null?void 0:q.city)||"",region:((I=(y=e==null?void 0:e.legalAddress)==null?void 0:y.region)==null?void 0:I.region)||"",regionCode:((ae=(te=e==null?void 0:e.legalAddress)==null?void 0:te.region)==null?void 0:ae.regionCode)||"",countryCode:((re=e==null?void 0:e.legalAddress)==null?void 0:re.countryCode)||"",postcode:((se=e==null?void 0:e.legalAddress)==null?void 0:se.postcode)||"",telephone:((le=e==null?void 0:e.legalAddress)==null?void 0:le.telephone)||""}}),[f,s]=V({}),[i,p]=V({}),v=((ne=e==null?void 0:e.permissionsFlags)==null?void 0:ne.canEditAccount)===!0,C=((ie=e==null?void 0:e.permissionsFlags)==null?void 0:ie.canEditAddress)===!0,{countryOptions:w,regionOptions:P,isRegionRequired:m,hasRegionOptions:T,loadingCountries:W}=we(r.legalAddress.countryCode),_=(c,h)=>c==="name"?h.trim()?null:n.companyNameRequired:c==="email"?h.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h)?null:n.invalidEmail:n.emailRequired:c==="legalAddress.street"||c==="legalAddress.city"||c==="legalAddress.postcode"||c==="legalAddress.telephone"||c==="legalAddress.countryCode"?h.trim()?null:n.required:c==="legalAddress.region"&&m&&!h.trim()?n.required:null,S=()=>{var k,b;const c={};let h=!0;const L=((k=e==null?void 0:e.permissionsFlags)==null?void 0:k.canEditAccount)===!0,N=((b=e==null?void 0:e.permissionsFlags)==null?void 0:b.canEditAddress)===!0;if(L){const d=_("name",r.name);d&&(c.name=d,h=!1);const E=_("email",r.email);E&&(c.email=E,h=!1)}if(N){const d=_("legalAddress.street",r.legalAddress.street);d&&(c["legalAddress.street"]=d,h=!1);const E=_("legalAddress.city",r.legalAddress.city);E&&(c["legalAddress.city"]=E,h=!1);const oe=_("legalAddress.postcode",r.legalAddress.postcode);oe&&(c["legalAddress.postcode"]=oe,h=!1);const de=_("legalAddress.telephone",r.legalAddress.telephone);de&&(c["legalAddress.telephone"]=de,h=!1);const ce=_("legalAddress.countryCode",r.legalAddress.countryCode);ce&&(c["legalAddress.countryCode"]=ce,h=!1);const me=_("legalAddress.region",r.legalAddress.region);me&&(c["legalAddress.region"]=me,h=!1)}return s(c),h},D=async c=>{var k,b;c.preventDefault();const h=((k=e==null?void 0:e.permissionsFlags)==null?void 0:k.canEditAccount)===!0,L=((b=e==null?void 0:e.permissionsFlags)==null?void 0:b.canEditAddress)===!0,N={};if(h&&(N.name=!0,N.email=!0,N.legalName=!0,N.vatTaxId=!0,N.resellerId=!0),L&&(N["legalAddress.street"]=!0,N["legalAddress.street2"]=!0,N["legalAddress.city"]=!0,N["legalAddress.region"]=!0,N["legalAddress.regionCode"]=!0,N["legalAddress.countryCode"]=!0,N["legalAddress.postcode"]=!0,N["legalAddress.telephone"]=!0),p(N),!!S()){if(h&&r.email!==(e==null?void 0:e.email)){const d=await Ce(r.email);if(!d.isValid){s(E=>({...E,email:d.error||n.emailNotAvailable}));return}}if(u){const d={};h&&(d.name=r.name,d.email=r.email,d.legalName=r.legalName,d.vatTaxId=r.vatTaxId,d.resellerId=r.resellerId),L&&(d.legalAddress={street:[r.legalAddress.street,r.legalAddress.street2].filter(Boolean),city:r.legalAddress.city,region:{region:r.legalAddress.region,regionCode:r.legalAddress.regionCode},countryCode:r.legalAddress.countryCode,postcode:r.legalAddress.postcode,telephone:r.legalAddress.telephone}),await u(d)}}},z=c=>h=>{const L=new Set(["name","email","legalName","vatTaxId","resellerId"]),N=c.startsWith("legalAddress.");if(!(L.has(c)&&!v||N&&!C)){if(c.startsWith("legalAddress.")){const b=c.split(".")[1];b==="countryCode"?(A(d=>({...d,legalAddress:{...d.legalAddress,[b]:h,region:"",regionCode:""}})),s(d=>{const E={...d};return delete E["legalAddress.region"],delete E["legalAddress.regionCode"],E}),p(d=>{const E={...d};return delete E["legalAddress.region"],delete E["legalAddress.regionCode"],E})):A(b==="region"?d=>({...d,legalAddress:{...d.legalAddress,region:h,regionCode:T?d.legalAddress.regionCode:h}}):d=>({...d,legalAddress:{...d.legalAddress,[b]:h}}))}else A(b=>({...b,[c]:h}));f[c]&&s(b=>{const d={...b};return delete d[c],d})}},H=c=>{const h=new Set(["name","email","legalName","vatTaxId","resellerId"]),L=c.startsWith("legalAddress.");if(h.has(c)&&!v||L&&!C)return;p(d=>({...d,[c]:!0}));let k="";if(c.startsWith("legalAddress.")){const d=c.split(".")[1],E=r.legalAddress[d];k=typeof E=="string"?E:""}else{const d=r[c];k=typeof d=="string"?d:""}const b=_(c,k);b&&s(d=>({...d,[c]:b}))};return g(G,{variant:"secondary",className:"account-edit-company-profile",children:[a(pe,{title:n.title,divider:!1,className:"account-edit-company-profile__title"}),t!=null&&t.text?a(ye,{className:"account-edit-company-profile__notification",type:t.type,variant:"secondary",heading:t.text,icon:t.icon,"data-testid":"editCompanyInLineAlert"}):null,g("form",{className:"account-edit-company-profile-form",onSubmit:D,children:[v&&a(Ie,{loading:l,value:{name:r.name,email:r.email,legalName:r.legalName,vatTaxId:r.vatTaxId,resellerId:r.resellerId},errors:f,touched:i,onChange:z,onBlur:H}),C&&a(Ve,{loading:l,loadingCountries:W,value:r.legalAddress,errors:f,touched:i,onChange:z,onBlur:H,countryOptions:w,regionOptions:P,isRegionRequired:m,hasRegionOptions:T}),g("div",{className:"account-edit-company-profile__actions",children:[a(X,{disabled:l,type:"button",variant:"secondary",onClick:()=>o==null?void 0:o(),children:n.cancel}),a(X,{disabled:l||!v&&!C,type:"submit",variant:"primary",children:n.save})]})]}),l&&g("div",{className:"account-edit-company-profile__loading-overlay","data-testid":"editCompanyLoadingOverlay",children:[a(ve,{size:"large"}),a("div",{className:"account-edit-company-profile__loading-text",children:n.saving})]})]})},Te=({testId:t,withCard:e=!0})=>{const l=g(Ae,{"data-testid":t||"companySkeletonLoader",children:[a(K,{variant:"heading",size:"xlarge",fullWidth:!1,lines:1}),a(K,{variant:"heading",size:"xlarge",fullWidth:!0,lines:1}),a(K,{variant:"heading",size:"xlarge",fullWidth:!0,lines:1})]});return e?l:a(G,{variant:"secondary",className:ee(["company-company-loaders","company-company-loaders--card-loader"]),children:l})};var he=(t=>(t.EDIT_COMPANY_EVENT="edit-company",t))(he||{});const $e={EDIT_COMPANY_EVENT:"edit-company"},Me=()=>(window.adobeDataLayer||(window.adobeDataLayer=[]),window.adobeDataLayer),Pe=t=>{Me().push(l=>{const u=l.getState?l.getState():{};l.push({event:t,context:u})})},Re=(t,e)=>{if(!$e[t])return null;switch(t){case"edit-company":Pe({type:"company",eventType:"edit",companyData:e});break;default:return null}},Fe=({handleSetInLineAlert:t})=>{const e=O({companySuccess:"Company.CompanyProfile.editCompanyProfile.companySuccess",companyError:"Company.CompanyProfile.editCompanyProfile.companyError",loadError:"Company.CompanyProfile.messages.loadError",updateError:"Company.CompanyProfile.messages.updateError"}),{companySuccess:l,companyError:u,loadError:o,updateError:n}=e,[r,A]=V(null),[f,s]=V(!0),[i,p]=V(!1),[v,C]=V(!1),[w,P]=V([]),[m,T]=V({}),[W,_]=V(""),S=Q(t),D=Q(!1),z=Q(!1);Z(()=>{S.current=t},[t]);const H=F(y=>{T(y)},[]),$=F((y,I)=>{t&&(y==="success"?t({type:"success",text:I??l}):y==="error"?t({type:"error",text:I??u}):t(),p(!1))},[t,l,u]),B=F(()=>{D.current||(D.current=!0,s(!0),Ne(!0).then(y=>{y&&(A(y),_("")),s(!1)}).catch(y=>{console.error("Failed to load company:",y),s(!1),S.current&&S.current({type:"error",text:o})}).finally(()=>{D.current=!1}))},[o]);Z(()=>{z.current||(z.current=!0,B())},[B]),Z(()=>{ge().then(y=>{P(y.availableCountries)}).catch(y=>{console.error("Failed to load countries:",y)})},[]);const j=F(()=>{C(!0),$("success",""),T({})},[$]),Y=F(y=>{y==null||y(),C(!1),T({})},[]),q=F(async y=>{try{if(p(!0),!y){$("error","No data to update");return}const I=await Ee(y);r&&(I.canEditAccount=r.canEditAccount,I.canEditAddress=r.canEditAddress,I.customerRole=r.customerRole,I.customerStatus=r.customerStatus),A(I),C(!1),T({}),$("success"),Re(he.EDIT_COMPANY_EVENT,{...y,companyId:r==null?void 0:r.id}),_e(),B()}catch(I){console.error("Failed to update company:",I),$("error",I.message||n)}finally{p(!1)}},[r,$,B,n]);return{company:r,countries:w,createdAt:W,loading:f,submitLoading:i,showEditForm:v,inputChange:m,handleShowEditForm:j,handleHideEditForm:Y,handleUpdateCompany:q,handleInputChange:H,renderAlertMessage:$,saving:i}},Se=t=>x.createElement("svg",{id:"Icon_Warning_Base",width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},x.createElement("g",{clipPath:"url(#clip0_841_1324)"},x.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M11.9949 2.30237L0.802734 21.6977H23.1977L11.9949 2.30237Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),x.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M12.4336 10.5504L12.3373 14.4766H11.6632L11.5669 10.5504V9.51273H12.4336V10.5504ZM11.5883 18.2636V17.2687H12.4229V18.2636H11.5883Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),x.createElement("defs",null,x.createElement("clipPath",{id:"clip0_841_1324"},x.createElement("rect",{width:24,height:21,fill:"white",transform:"translate(0 1.5)"})))),ke=t=>x.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},x.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M0.75 12C0.75 5.78421 5.78421 0.75 12 0.75C18.2158 0.75 23.25 5.78421 23.25 12C23.25 18.2158 18.2158 23.25 12 23.25C5.78421 23.25 0.75 18.2158 0.75 12Z",stroke:"currentColor"}),x.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M6.75 12.762L10.2385 15.75L17.25 9",stroke:"currentColor"})),Le=t=>x.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},x.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M0.75 12C0.75 5.78421 5.78421 0.75 12 0.75C18.2158 0.75 23.25 5.78421 23.25 12C23.25 18.2158 18.2158 23.25 12 23.25C5.78421 23.25 0.75 18.2158 0.75 12Z",stroke:"currentColor"}),x.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M11.75 5.88423V4.75H12.25V5.88423L12.0485 13.0713H11.9515L11.75 5.88423ZM11.7994 18.25V16.9868H12.2253V18.25H11.7994Z",stroke:"currentColor"})),De={success:a(ke,{}),warning:a(Se,{}),error:a(Le,{})},ze=()=>{const[t,e]=V({}),[l,u]=V(null),o=F(()=>{e({}),l&&(clearTimeout(l),u(null))},[l]),n=F(s=>{if(l&&(clearTimeout(l),u(null)),!(s!=null&&s.type)){e({});return}const i=De[s.type];if(e({type:s.type,text:s.text,icon:i}),s.autoHide!==!1){const p=s.autoHideDelay||(s.type==="success"?3e3:5e3),v=setTimeout(()=>{e({}),u(null)},p);u(v)}},[l]),r=F((s,i=!0)=>{n({type:"success",text:s,autoHide:i})},[n]),A=F((s,i=!1)=>{n({type:"warning",text:s,autoHide:i})},[n]),f=F((s,i=!1)=>{n({type:"error",text:s,autoHide:i})},[n]);return Z(()=>()=>{l&&clearTimeout(l)},[l]),{inLineAlertProps:t,handleSetInLineAlert:n,clearAlert:o,showSuccess:r,showWarning:A,showError:f}},Ue=({className:t,withHeader:e=!0,slots:l})=>{const u=O({containerTitle:"Company.CompanyProfile.containerTitle"}),{inLineAlertProps:o,handleSetInLineAlert:n}=ze(),{company:r,loading:A,saving:f,showEditForm:s,handleShowEditForm:i,handleHideEditForm:p,handleUpdateCompany:v}=Fe({handleSetInLineAlert:n});return A?a("div",{"data-testid":"companyProfileLoader",children:a(Te,{withCard:!0})}):g("div",{className:ee(["account-company-profile",t]),children:[e?a(pe,{title:u.containerTitle,divider:!1,className:"company-profile__title"}):null,a(be,{company:r,slots:l,showEditForm:s,handleShowEditForm:i}),s?a(xe,{inLineAlertProps:o,company:r,loading:f,onSubmit:v,onCancel:p}):null]})};export{Ue as CompanyProfile,Ue as default};
//# sourceMappingURL=CompanyProfile.js.map
