/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as e,jsxs as a,Fragment as p}from"@dropins/tools/preact-jsx-runtime.js";import{classes as y}from"@dropins/tools/lib.js";import{Button as L,Skeleton as f,SkeletonRow as u,Card as v}from"@dropins/tools/components.js";import"@dropins/tools/event-bus.js";import"../chunks/PurchaseOrderHistoryLogContent.js";import{P as m}from"../chunks/PurchaseOrdersHeader.js";import{useState as x}from"@dropins/tools/preact-hooks.js";import{u as _}from"../chunks/usePurchaseOrderData.js";import{Fragment as P}from"@dropins/tools/preact.js";import{f as w}from"../chunks/formatDate.js";import{useText as g,Text as h}from"@dropins/tools/i18n.js";const N=({historyLogRecords:r=[],visibleRecordsLimit:t})=>{const[i,c]=x(t),s=r.length>i,n=r.length<=t,d=g({showMoreLabel:"PurchaseOrders.historyLog.ariaLabel.showMore",showLessLabel:"PurchaseOrders.historyLog.ariaLabel.showLess"});return r.length?a("div",{className:"b2b-purchase-order-history-log-content",children:[e("ul",{className:"b2b-purchase-order-history-log-content__list",role:"list",children:r.slice(0,i).map((o,l)=>{const b=Math.min(i,r.length);return a(P,{children:[a("li",{className:"b2b-purchase-order-history-log-content__item",children:[e("div",{className:"b2b-purchase-order-history-log-content__title",children:e(h,{id:`PurchaseOrders.historyLog.status.${o.activity}`,fields:{date:w(o.createdAt)}})}),e("div",{className:"b2b-purchase-order-history-log-content__description",children:o.message})]}),l<b-1&&e("hr",{className:"b2b-purchase-order-history-log-content__divider"})]},o.uid)})}),!n&&e("div",{className:"b2b-purchase-order-history-log-content__actions",children:e(L,{variant:"secondary","aria-expanded":!s,"aria-label":s?d.showMoreLabel:d.showLessLabel,onClick:()=>{c(s?r.length:t)},children:e(h,{id:`PurchaseOrders.historyLog.buttons.${s?"viewMore":"viewLess"}`})})})]}):e("div",{className:"b2b-purchase-order-history-log-content",children:e(h,{id:"PurchaseOrders.historyLog.emptyText"})})},D=({withHeader:r=!0,withWrapper:t=!0,visibleRecordsLimit:i=5,className:c})=>{const{poDataLoading:s,purchaseOrderData:n}=_(),d=g({headerText:"PurchaseOrders.historyLog.headerText"}),o=(n==null?void 0:n.historyLog)||[],l=a(p,{children:[r&&t?e(m,{headerText:d.headerText,divider:!0}):null,s?a(f,{rowGap:"medium","data-testid":"comment-list-loader",children:[e(u,{size:"small",variant:"row",fullWidth:!0,lines:1,style:{maxWidth:300}}),e(u,{size:"medium",variant:"row",fullWidth:!0,lines:1})]}):e(N,{historyLogRecords:o,visibleRecordsLimit:i})]});return a("div",{className:y(["b2b-purchase-order-history-log",c]),"data-testid":"order-history-log-container",children:[r&&!t?e(m,{headerText:d.headerText}):null,t?e(v,{variant:"secondary","data-testid":"orderHistoryLogCard",children:l}):l]})};export{D as PurchaseOrderHistoryLog,D as default};
//# sourceMappingURL=PurchaseOrderHistoryLog.js.map
