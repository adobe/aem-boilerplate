import*as e from"@dropins/elsie/event-bus.js";import*as r from"@dropins/elsie/fetch-graphql.js";import*as t from"@dropins/elsie/preact-compat.js";import*as n from"@dropins/elsie/preact-hooks.js";import*as o from"@dropins/elsie/preact-jsx-runtime.js";import*as i from"@dropins/elsie/preact.js";export const id=759;export const ids=[759];export const modules={7553:(e,r,t)=>{t.d(r,{X:()=>b});var n=t(1892),o=t.n(n),i=t(5760),a=t.n(i),l=t(8311),s=t.n(l),u=t(8192),c=t.n(u),m=t(8060),f=t.n(m),d=t(4865),p=t.n(d),g=t(4553),v={};v.styleTagTransform=p(),v.setAttributes=c(),v.insert=s().bind(null,"head"),v.domAPI=a(),v.insertStyleElement=f();o()(g.Z,v);g.Z&&g.Z.locals&&g.Z.locals;var y=t(7188),b=function(e){var r=e.className,t=e.children,n=e.level,o=void 0===n?2:n,i=o>=1&&o<=6?"h".concat(o):"h2";return(0,y.jsx)(i,{className:r,children:t})}},2764:(e,r,t)=>{t.d(r,{U:()=>V});var n=t(2914),o=t(2605),i=t(7553),a=t(9724),l=t(7188),s=function(){return(0,l.jsxs)("p",{className:"checkout-login-form__signIn",children:[(0,l.jsx)(a.xv,{id:"Checkout.LoginForm.account"}),(0,l.jsx)("a",{className:"checkout-login-form__link",href:"#",target:"_blank",rel:"noreferrer",children:(0,l.jsx)(a.xv,{id:"Checkout.LoginForm.signIn"})})]})},u=t(4426),c=t(7203),m=(0,a.zB)({LoginFormLabel:"Checkout.LoginForm.ariaLabel",LoginFormFloatingLabel:"Checkout.LoginForm.floatingLabel",LoginFormPlaceholder:"Checkout.LoginForm.placeholder"})((function(e){var r=e.error,t=e.hint,n=e.value,o=e.onChange,i=e.onBlur,a=e.onInvalid;return(0,l.jsx)(u.g,{size:"medium",error:r,hint:t,children:(0,l.jsx)(c.I,{id:"customer-email",name:"userName",type:"email",value:n,autocomplete:"email",placeholder:e.LoginFormPlaceholder,floatingLabel:e.LoginFormFloatingLabel,onChange:o,onBlur:i,onInvalid:a,required:!0,"aria-label":e.LoginFormLabel,"aria-required":!0})})})),f=t(1892),d=t.n(f),p=t(5760),g=t.n(p),v=t(8311),y=t.n(v),b=t(8192),h=t.n(b),j=t(8060),x=t.n(j),E=t(4865),O=t.n(E),C=t(3685),S={};S.styleTagTransform=O(),S.setAttributes=h(),S.insert=y().bind(null,"head"),S.domAPI=g(),S.insertStyleElement=x();d()(C.Z,S);C.Z&&C.Z.locals&&C.Z.locals;var L=t(5587);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function F(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function w(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?F(Object(t),!0).forEach((function(r){_(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):F(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _(e,r,t){var n;return n=function(e,r){if("object"!=k(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(r,"string"),(r="symbol"==k(n)?n:String(n))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var P=(0,a.zB)({})((function(e){var r=e.className,t=e.currentEmail,n=e.hint,o=e.error,u=void 0===o?null:o,c=e.onEmailChange,f=e.onEmailBlur,d=e.onEmailInvalid;return(0,l.jsxs)("div",{className:"checkout-login-form",children:[(0,l.jsxs)("div",{className:"checkout-login-form__heading",children:[(0,l.jsx)(i.X,{level:2,children:(0,l.jsx)(a.xv,{id:"Checkout.LoginForm.title"}),className:"checkout-login-form__title"}),(0,l.jsx)(s,{})]}),(0,l.jsx)("div",{className:"checkout-login-form__content",children:(0,l.jsxs)("form",w(w({className:(0,L.S)(["elsie-login-form__form",r]),noValidate:!0},e),{},{children:[(0,l.jsx)("button",{type:"submit",disabled:!0,style:"display: none","aria-hidden":"true"}),(0,l.jsx)(m,{value:t||void 0,error:u||"",hint:n,onChange:c,onBlur:f,onInvalid:d})]}))})]})})),I=t(5437),N=t(6200),A=t(3042),R=t(1497);function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function D(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function M(e,r,t){var n;return n=function(e,r){if("object"!=Z(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(r,"string"),(r="symbol"==Z(n)?n:String(n))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function T(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,i,a,l=[],s=!0,u=!1;try{if(i=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;s=!1}else for(;!(s=(n=i.call(t)).done)&&(l.push(n.value),l.length!==r);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return B(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return B(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var U=(0,a.zB)({LoginFormInvalidEmailError:"Checkout.LoginForm.invalidEmailError",LoginFormMissingEmailError:"Checkout.LoginForm.missingEmailError",LoginFormEmailExists:"Checkout.LoginForm.emailExists"}),V=U((function(e){var r=e.className,t=e.email,i=void 0===t?null:t,a=e.LoginFormEmailExists,s=e.LoginFormInvalidEmailError,u=e.LoginFormMissingEmailError,c=(0,R.oR)().cartId,m=A.t.value.data,f=!!m,d=T((0,I.useState)(!1),2),p=d[0],g=d[1],v=T((0,I.useState)(i),2),y=v[0],b=v[1],h=T((0,I.useState)(),2),j=h[0],x=h[1],E=T((0,I.useState)(!0),2),O=E[0],C=E[1],S=function(e){return e.valid?null:e.valueMissing?u:s};return!p&&f&&(g(!0),b((null==m?void 0:m.email)||i)),(0,I.useEffect)((function(){if(y&&!j&&(null==m?void 0:m.email)!==y){var e=setTimeout((function(){(0,n.T)(y).then((function(e){C(e),(0,o.A)({cartId:c,email:y}).catch((function(e){console.log("set email failed",e)}))})).catch((function(e){console.log(e),x(s),C(!0)}))}),1e3);return function(){e&&clearTimeout(e)}}}),[y,j,s,null==m?void 0:m.email,c]),(0,l.jsx)(P,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?D(Object(t),!0).forEach((function(r){M(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):D(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({name:N.N,className:r,currentEmail:y,hint:O?"":a,error:j,onEmailChange:function(e){var r=e.target.value;b(r),x(null),C(!0)},onEmailBlur:function(e){var r=e.target.validity;x(S(r))},onEmailInvalid:function(e){var r=e.target.validity;x(S(r))}},e))}))},6200:(e,r,t)=>{t.d(r,{N:()=>n});var n="login-form"},1484:(e,r,t)=>{t.d(r,{NU:()=>n.N,U0:()=>o.U,ZP:()=>o.U});var n=t(6200),o=t(2764)},4553:(e,r,t)=>{t.d(r,{Z:()=>l});var n=t(4933),o=t.n(n),i=t(3476),a=t.n(i)()(o());a.push([e.id,"\n",""]);const l=a},3685:(e,r,t)=>{t.d(r,{Z:()=>l});var n=t(4933),o=t.n(n),i=t(3476),a=t.n(i)()(o());a.push([e.id,".checkout-login-form{\n    display:grid;\n}\n\n.checkout-login-form__heading{\n    display:grid;\n    grid-template-columns:repeat(2, 1fr [col-start]);\n    grid-auto-rows:max-content;\n}\n\n.checkout-login-form__content{\n    grid-auto-rows:max-content;\n}\n\n.checkout-login-form__title{\n    grid-column-start:1;\n    color:var(--color-neutral-800);\n    font:var(--type-headline-2-default-font);\n    letter-spacing:var(--type-headline-2-default-letter-spacing);\n    margin:0;\n}\n\n.checkout-login-form__signIn{\n    grid-column-start:2;\n    color:var(--color-neutral-800);\n    font:var(--type-body-2-default-font);\n    letter-spacing:var(--type-body-2-default-letter-spacing);\n    margin-bottom:var(--spacing-medium);\n    align-self:flex-end;\n    justify-self:flex-end;\n    margin-top:var(--spacing-xxsmall);\n}\n\na.checkout-login-form__link{\n    font:var(--type-body-2-strong-font);\n    margin-left:var(--spacing-xxsmall);\n}\n@media only screen and (min-width:320px) and (max-width: 768px){\n    .checkout-login-form__heading{\n        grid-template-columns:repeat(1, 1fr [col-start]);\n        grid-template-rows:1fr;\n    }\n\n    .checkout-login-form__signIn{\n        grid-column-start:1;\n        align-self:flex-start;\n        justify-self:flex-start;\n        padding-top:var(--spacing-xsmall);\n    }\n}\n",""]);const l=a},6765:(r,t,n)=>{r.exports=(e=>{var r={};return n.d(r,e),r})({events:()=>e.events})},9699:(e,t,n)=>{e.exports=(e=>{var r={};return n.d(r,e),r})({FetchGraphQL:()=>r.FetchGraphQL})},4853:(e,r,n)=>{e.exports=(e=>{var r={};return n.d(r,e),r})({createContext:()=>t.createContext,forwardRef:()=>t.forwardRef,useCallback:()=>t.useCallback,useContext:()=>t.useContext,useEffect:()=>t.useEffect,useImperativeHandle:()=>t.useImperativeHandle,useMemo:()=>t.useMemo,useRef:()=>t.useRef,useState:()=>t.useState})},5437:(e,r,t)=>{e.exports=(e=>{var r={};return t.d(r,e),r})({useCallback:()=>n.useCallback,useContext:()=>n.useContext,useDebugValue:()=>n.useDebugValue,useEffect:()=>n.useEffect,useId:()=>n.useId,useImperativeHandle:()=>n.useImperativeHandle,useLayoutEffect:()=>n.useLayoutEffect,useMemo:()=>n.useMemo,useReducer:()=>n.useReducer,useRef:()=>n.useRef,useState:()=>n.useState})},4142:(e,r,t)=>{e.exports=(e=>{var r={};return t.d(r,e),r})({Fragment:()=>o.Fragment,jsx:()=>o.jsx,jsxs:()=>o.jsxs})},3474:(e,r,t)=>{e.exports=(e=>{var r={};return t.d(r,e),r})({Component:()=>i.Component,Fragment:()=>i.Fragment,cloneElement:()=>i.cloneElement,createContext:()=>i.createContext,createElement:()=>i.createElement,createRef:()=>i.createRef,h:()=>i.h,hydrate:()=>i.hydrate,isValidElement:()=>i.isValidElement,options:()=>i.options,render:()=>i.render,toChildArray:()=>i.toChildArray})}};import a from"../runtime.js";import*as l from"../757.js";a.C(l);import*as s from"../448.js";a.C(s);import*as u from"../79.js";a.C(u);import*as c from"../965.js";a.C(c);import*as m from"../483.js";a.C(m);import*as f from"../41.js";a.C(f);import*as d from"./LoginForm.js";a.C(d);var p,g=(p=1484,a(a.s=p)),v=g.NU,y=g.U0,b=g.ZP;export{v as LOGIN_FORM_NAME,y as LoginForm,b as default};