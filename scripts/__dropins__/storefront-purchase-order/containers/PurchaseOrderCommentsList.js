/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as e,jsxs as a,Fragment as w}from"@dropins/tools/preact-jsx-runtime.js";import{classes as x}from"@dropins/tools/lib.js";import{useState as L}from"@dropins/tools/preact-hooks.js";import"@dropins/tools/event-bus.js";import{Button as _,Skeleton as g,SkeletonRow as u,Card as P}from"@dropins/tools/components.js";import"../chunks/PurchaseOrderHistoryLogContent.js";import{u as N}from"../chunks/usePurchaseOrderData.js";import{useText as v,Text as b}from"@dropins/tools/i18n.js";import{P as p}from"../chunks/PurchaseOrdersHeader.js";import{Fragment as T}from"@dropins/tools/preact.js";import{f as C}from"../chunks/formatDate.js";const O=({commentsList:r=[],visibleRecordsLimit:s=5})=>{const[n,m]=L(s),o=r.length>n,c=r.length<=s,i=v({showMoreLabel:"PurchaseOrders.comments.view.ariaLabel.showMore",showLessLabel:"PurchaseOrders.comments.view.ariaLabel.showLess"});return r.length?a("div",{className:"b2b-purchase-order-comment-list-content",children:[e("ul",{className:"b2b-purchase-order-comment-list-content__list",children:r.slice(0,n).map((t,d)=>{var l,h;const f=Math.min(n,r.length);return a(T,{children:[a("li",{className:"b2b-purchase-order-comment-list-content__item",children:[a("div",{className:"b2b-purchase-order-comment-list-content__title",children:[C(t.createdAt),(l=t.author)!=null&&l.firstname&&((h=t.author)!=null&&h.lastname)?` (${t.author.firstname} ${t.author.lastname})`:""]}),e("div",{className:"b2b-purchase-order-comment-list-content__description",children:t.text})]}),d<f-1&&e("hr",{className:"b2b-purchase-order-comment-list-content__divider"})]},t.uid)})}),!c&&e("div",{className:"b2b-purchase-order-comment-list-content__actions",children:e(_,{variant:"secondary","aria-expanded":!o,"aria-label":o?i.showMoreLabel:i.showLessLabel,onClick:()=>{m(o?r.length:s)},children:e(b,{id:`PurchaseOrders.comments.view.buttons.${o?"viewMore":"viewLess"}`})})})]}):e("div",{className:"b2b-purchase-order-comment-list-content",children:e(b,{id:"PurchaseOrders.comments.view.emptyText"})})},G=({withHeader:r=!0,withWrapper:s=!0,visibleRecordsLimit:n=5,className:m})=>{const{poDataLoading:o,purchaseOrderData:c}=N(),i=v({headerText:"PurchaseOrders.comments.view.headerText"}),t=(c==null?void 0:c.comments)||[],d=a(w,{children:[r&&s?e(p,{headerText:i.headerText,divider:!0}):null,o?a(g,{rowGap:"medium","data-testid":"comment-list-loader",children:[e(u,{size:"small",variant:"row",fullWidth:!0,lines:1,style:{maxWidth:300}}),e(u,{size:"medium",variant:"row",fullWidth:!0,lines:1})]}):e(O,{commentsList:t.reverse(),visibleRecordsLimit:n})]});return a("div",{className:x(["b2b-purchase-order-comment-list",m]),"data-testid":"order-comment-list-container",children:[r&&!s?e(p,{headerText:i.headerText}):null,s?e(P,{variant:"secondary","data-testid":"orderCommentListCard",children:d}):d]})};export{G as PurchaseOrderCommentsList,G as default};
//# sourceMappingURL=PurchaseOrderCommentsList.js.map
