/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as t,jsxs as r}from"@dropins/tools/preact-jsx-runtime.js";import{useState as v,useEffect as R,useMemo as l}from"@dropins/tools/preact-compat.js";import{classes as n,VComponent as i,Slot as o}from"@dropins/tools/lib.js";import{f as M}from"../chunks/dateUtils.js";import{events as D}from"@dropins/tools/event-bus.js";import{Skeleton as H,SkeletonRow as u}from"@dropins/tools/components.js";/* empty css                                     */import"@dropins/tools/preact.js";import"@dropins/tools/preact-hooks.js";/* empty css                        *//* empty css                                  */import{T as w}from"../chunks/TabbedContent.js";/* empty css                          */import"../chunks/state.js";import{I as W}from"../chunks/ItemsQuotedTemplate.js";import{Q as k}from"../chunks/QuoteTemplateCommentsList.js";import{Q as z}from"../chunks/QuoteTemplateHistoryLog.js";import{useText as S}from"@dropins/tools/i18n.js";import"../chunks/QuotePricesSummary.js";import"../chunks/QuoteCommentsList.js";import"../chunks/QuoteHistoryLog.js";const O=({className:e,loading:L,templateName:a,templateId:p,banner:b,details:h,actionBar:m,referenceDocuments:d,referenceDocumentsTitle:g,itemsTable:T,commentsTitle:q,comments:f,historyLogTitle:_,historyLog:N,footer:y,...x})=>L?t(j,{}):r("div",{...x,className:n(["quote-management-manage-negotiable-quote-template",e]),children:[r("div",{className:n(["quote-management-manage-negotiable-quote-template__header"]),children:[a&&t(i,{node:a,className:n(["quote-management-manage-negotiable-quote-template__template-name"])}),p&&t(i,{node:p,className:n(["quote-management-manage-negotiable-quote-template__template-id"])})]}),b&&t(i,{node:b,className:n(["quote-management-manage-negotiable-quote-template__banner"])}),h&&t(i,{node:h,className:n(["quote-management-manage-negotiable-quote-template__details"])}),m&&t(i,{node:m,className:n(["quote-management-manage-negotiable-quote-template__action-bar"])}),(g||d)&&r("div",{"data-testid":"reference-documents-container",className:n(["quote-management-manage-negotiable-quote-template__reference-documents-container"]),children:[g&&t(i,{node:g,className:n(["quote-management-manage-negotiable-quote-template__reference-documents-title"])}),d&&t(i,{node:d,className:n(["quote-management-manage-negotiable-quote-template__reference-documents"])})]}),T&&t(i,{node:T,className:n(["quote-management-manage-negotiable-quote-template__items-table"])}),r("div",{"data-testid":"comments-container",className:n(["quote-management-manage-negotiable-quote-template__comments-container"]),children:[q&&t(i,{node:q,className:n(["quote-management-manage-negotiable-quote-template__comments-title"])}),f&&t(i,{node:f,className:n(["quote-management-manage-negotiable-quote-template__comments"])})]}),r("div",{"data-testid":"history-log-container",className:n(["quote-management-manage-negotiable-quote-template__history-log-container"]),children:[_&&t(i,{node:_,className:n(["quote-management-manage-negotiable-quote-template__history-log-title"])}),N&&t(i,{node:N,className:n(["quote-management-manage-negotiable-quote-template__history-log"])})]}),y&&t(i,{node:y,className:n(["quote-management-manage-negotiable-quote-template__footer"])})]}),j=()=>r(H,{"data-testid":"manage-negotiable-quote-template-skeleton",children:[t(u,{variant:"heading",fullWidth:!0,size:"large"}),t(u,{variant:"row",fullWidth:!1,size:"small"}),t(u,{variant:"row",fullWidth:!1,size:"small"}),t(u,{variant:"row",fullWidth:!0}),t(u,{variant:"row",fullWidth:!0,size:"xlarge",lines:2}),t(u,{variant:"row",fullWidth:!1,size:"small"})]}),oe=({slots:e,...L})=>{const[a,p]=v(void 0),[b,h]=v(!0),m=S({createdLabel:"NegotiableQuoteTemplate.Manage.createdLabel",salesRepLabel:"NegotiableQuoteTemplate.Manage.salesRepLabel",expiresLabel:"NegotiableQuoteTemplate.Manage.expiresLabel",referenceDocumentsTitle:"NegotiableQuoteTemplate.Manage.referenceDocuments.title",commentsTitle:"NegotiableQuoteTemplate.Manage.comments.title",historyLogTitle:"NegotiableQuoteTemplate.Manage.historyLog.title",itemsQuotedTab:"NegotiableQuoteTemplate.Manage.tabs.itemsQuoted",commentsTab:"NegotiableQuoteTemplate.Manage.tabs.comments",historyLogTab:"NegotiableQuoteTemplate.Manage.tabs.historyLog"});R(()=>{const c=D.on("quote-management/quote-template-data",Q=>{Q.quoteTemplate&&(p(Q.quoteTemplate),h(!1))},{eager:!0});return()=>c==null?void 0:c.off()},[]);const d=l(()=>t(o,{name:"TemplateName",slot:e==null?void 0:e.TemplateName,context:{templateName:a==null?void 0:a.name,templateData:a},children:t("h1",{"data-testid":"template-name",children:a==null?void 0:a.name})}),[e==null?void 0:e.TemplateName,a]),g=l(()=>t(o,{name:"TemplateId",slot:e==null?void 0:e.TemplateId,context:{templateId:a==null?void 0:a.uid,templateData:a},children:r("div",{"data-testid":"template-id",children:["Template #",a==null?void 0:a.uid]})}),[e==null?void 0:e.TemplateId,a]),T=l(()=>{if(!a)return null;const c=a.expirationDate?M(a.expirationDate,"short"):void 0;return r(o,{name:"Details",slot:e==null?void 0:e.Details,context:{templateData:a},children:[r("div",{className:"quote-management-manage-negotiable-quote-template__detail",children:[t("span",{className:"quote-management-manage-negotiable-quote-template__detail-title","data-testid":"created-label",children:m.createdLabel}),r("span",{className:"quote-management-manage-negotiable-quote-template__detail-content","data-testid":"created-value",children:[M(a.createdAt,"short")," (",a.buyer.firstname," ",a.buyer.lastname,")"]})]}),r("div",{className:"quote-management-manage-negotiable-quote-template__detail",children:[t("span",{className:"quote-management-manage-negotiable-quote-template__detail-title","data-testid":"sales-rep-label",children:m.salesRepLabel}),t("span",{className:"quote-management-manage-negotiable-quote-template__detail-content","data-testid":"sales-rep-value",children:a.salesRepName})]}),c&&r("div",{className:"quote-management-manage-negotiable-quote-template__detail",children:[t("span",{className:"quote-management-manage-negotiable-quote-template__detail-title","data-testid":"expires-label",children:m.expiresLabel}),t("span",{className:"quote-management-manage-negotiable-quote-template__detail-content","data-testid":"expires-value",children:c})]})]})},[e==null?void 0:e.Details,m,a]),q=l(()=>{if(!(!(a!=null&&a.referenceDocuments)||a.referenceDocuments.length===0))return t(o,{name:"ReferenceDocumentsTitle",slot:e==null?void 0:e.ReferenceDocumentsTitle,context:{templateData:a},children:t("h2",{children:m.referenceDocumentsTitle})})},[e==null?void 0:e.ReferenceDocumentsTitle,m,a]),f=l(()=>{if(!(!(a!=null&&a.referenceDocuments)||a.referenceDocuments.length===0))return t(o,{name:"ReferenceDocuments",slot:e==null?void 0:e.ReferenceDocuments,context:{templateData:a},children:t("ul",{"data-testid":"reference-documents",children:a.referenceDocuments.map(c=>t("li",{children:t("a",{href:c.url,target:"_blank",rel:"noopener noreferrer",children:c.name})},c.uid))})})},[e==null?void 0:e.ReferenceDocuments,a]),_=l(()=>t(o,{name:"ItemsTable",slot:e==null?void 0:e.ItemsTable,context:{templateData:a},children:t(w,{tabs:new Map([["items-quoted",m.itemsQuotedTab],["comments",m.commentsTab],["history-log",m.historyLogTab]]),tabsContent:new Map([["items-quoted",t(o,{name:"ItemsQuotedTab",slot:e==null?void 0:e.ItemsQuotedTab,context:{templateData:a},children:t(W,{templateData:a})},"items-quoted")],["comments",t(o,{name:"CommentsTab",slot:e==null?void 0:e.CommentsTab,context:{templateData:a},children:t(k,{templateData:a})},"comments")],["history-log",t(o,{name:"HistoryLogTab",slot:e==null?void 0:e.HistoryLogTab,context:{templateData:a},children:t(z,{templateData:a})},"history-log")]])})}),[e==null?void 0:e.ItemsTable,e==null?void 0:e.ItemsQuotedTab,e==null?void 0:e.CommentsTab,e==null?void 0:e.HistoryLogTab,m,a]),N=l(()=>t(o,{name:"CommentsTitle",slot:e==null?void 0:e.CommentsTitle,context:{templateData:a},children:t("h2",{children:m.commentsTitle})}),[e==null?void 0:e.CommentsTitle,m,a]),y=l(()=>t(o,{name:"Comments",slot:e==null?void 0:e.Comments,context:{templateData:a},children:"TODO: Not yet implemented."}),[e==null?void 0:e.Comments,a]),x=l(()=>t(o,{name:"HistoryLogTitle",slot:e==null?void 0:e.HistoryLogTitle,context:{templateData:a},children:t("h2",{children:m.historyLogTitle})}),[e==null?void 0:e.HistoryLogTitle,m,a]),C=l(()=>t(o,{name:"HistoryLog",slot:e==null?void 0:e.HistoryLog,context:{templateData:a},children:"TODO: Not yet implemented."}),[e==null?void 0:e.HistoryLog,a]),I={...L,loading:b,templateName:d,templateId:g,details:T,referenceDocumentsTitle:q,referenceDocuments:f,itemsTable:_,commentsTitle:N,comments:y,historyLogTitle:x,historyLog:C};return t(O,{...I})};export{oe as ManageNegotiableQuoteTemplate,oe as default};
//# sourceMappingURL=ManageNegotiableQuoteTemplate.js.map
