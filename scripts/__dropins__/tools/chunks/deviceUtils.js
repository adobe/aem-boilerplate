/*! Copyright 2025 Adobe
All Rights Reserved. */
var je=Object.defineProperty;var xe=(e,t,r)=>t in e?je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ie=(e,t,r)=>xe(e,typeof t!="symbol"?t+"":t,r);import{g as Ae}from"./image-params-keymap.js";import{jsx as S}from"../preact-jsx-runtime.js";import{l as y,_ as ye,k as V,G as Me,B as se}from"./icons/Add.js";import{signal as oe}from"../signals.js";const Se=e=>e.reduce((r,n)=>{if(!n)return r;if(typeof n=="string"&&(r+=` ${n}`),Array.isArray(n)){const[s,d]=n;s&&d&&(r+=` ${s}`)}return r},"").trim();function Ee(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $e=function(t){return Ce(t)&&!Ne(t)};function Ce(e){return!!e&&typeof e=="object"}function Ne(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||Le(e)}var Pe=typeof Symbol=="function"&&Symbol.for,Te=Pe?Symbol.for("react.element"):60103;function Le(e){return e.$$typeof===Te}function De(e){return Array.isArray(e)?[]:{}}function W(e,t){return t.clone!==!1&&t.isMergeableObject(e)?D(De(e),e,t):e}function Fe(e,t,r){return e.concat(t).map(function(n){return W(n,r)})}function Ue(e,t){if(!t.customMerge)return D;var r=t.customMerge(e);return typeof r=="function"?r:D}function qe(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function ae(e){return Object.keys(e).concat(qe(e))}function ve(e,t){try{return t in e}catch{return!1}}function Ve(e,t){return ve(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function We(e,t,r){var n={};return r.isMergeableObject(e)&&ae(e).forEach(function(s){n[s]=W(e[s],r)}),ae(t).forEach(function(s){Ve(e,s)||(ve(e,s)&&r.isMergeableObject(t[s])?n[s]=Ue(s,r)(e[s],t[s],r):n[s]=W(t[s],r))}),n}function D(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||Fe,r.isMergeableObject=r.isMergeableObject||$e,r.cloneUnlessOtherwiseSpecified=W;var n=Array.isArray(t),s=Array.isArray(e),d=n===s;return d?n?r.arrayMerge(e,t,r):We(e,t,r):W(t,r)}D.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(n,s){return D(n,s,r)},{})};var ke=D,ze=ke;const nt=Ee(ze),it=(e,t)=>{let r;return function(...n){clearTimeout(r),r=setTimeout(()=>e.apply(this,n),t)}},le={medium:768,large:1024,xlarge:1366,xxlarge:1920},Ke=(e,t)=>{const[r,n]=e.split("?"),s=new URLSearchParams(n),d=Ae(),g=d&&Object.keys(d)||[];let f={},b={...d};return(g==null?void 0:g.length)>0&&t?f=Object.entries(t).reduce((_,[h,l])=>{const a=d[h];if(typeof a=="string")_[a]=l;else if(typeof a=="function"){const[O,w]=a(l);_[O]=w}return delete b[h],_},{}):f={auto:"webp",quality:80,crop:!1,fit:"cover",...t},Object.entries(b).forEach(([,_])=>{if(typeof _=="function"){const[h,l]=_(void 0);f[h]=l}}),Object.entries(f).forEach(([_,h])=>{h!=null&&s.set(_,String(h))}),`${r}?${s.toString()}`},st=(e,t)=>{if(!e||!(t!=null&&t.width))return;const r=n=>Ke(e,{...n});return Object.entries(le).map(([,n])=>{const s=t.width*n/le.xxlarge;return`${r({...t,width:s})} ${n}w`}).join(`,
`)};var Ze=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i,he=/^(area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)$/,K=/[\s\n\\/='"\0<>]/,be=/^xlink:?./,Be=/["&<]/;function q(e){if(Be.test(e+="")===!1)return e;for(var t=0,r=0,n="",s="";r<e.length;r++){switch(e.charCodeAt(r)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 60:s="&lt;";break;default:continue}r!==t&&(n+=e.slice(t,r)),n+=s,t=r+1}return r!==t&&(n+=e.slice(t,r)),n}var ce=function(e,t){return String(e).replace(/(\n+)/g,"$1"+(t||"	"))},ue=function(e,t,r){return String(e).length>40||String(e).indexOf(`
`)!==-1||String(e).indexOf("<")!==-1},fe={},Ge=/([A-Z])/g;function me(e){var t="";for(var r in e){var n=e[r];n!=null&&n!==""&&(t&&(t+=" "),t+=r[0]=="-"?r:fe[r]||(fe[r]=r.replace(Ge,"-$1").toLowerCase()),t=typeof n=="number"&&Ze.test(r)===!1?t+": "+n+"px;":t+": "+n+";")}return t||void 0}function ee(e,t){return Array.isArray(t)?t.reduce(ee,e):t!=null&&t!==!1&&e.push(t),e}function de(){this.__d=!0}function we(e,t){return{__v:e,context:t,props:e.props,setState:de,forceUpdate:de,__d:!0,__h:[]}}function Z(e,t){var r=e.contextType,n=r&&t[r.__c];return r!=null?n?n.props.value:r.__:t}var I=[];function F(e,t,r,n,s,d){if(e==null||typeof e=="boolean")return"";if(typeof e!="object")return typeof e=="function"?"":q(e);var g=r.pretty,f=g&&typeof g=="string"?g:"	";if(Array.isArray(e)){for(var b="",_=0;_<e.length;_++)g&&_>0&&(b+=`
`),b+=F(e[_],t,r,n,s,d);return b}if(e.constructor!==void 0)return"";var h,l=e.type,a=e.props,O=!1;if(typeof l=="function"){if(O=!0,!r.shallow||!n&&r.renderRootComponent!==!1){if(l===V){var w=[];return ee(w,e.props.children),F(w,t,r,r.shallowHighOrder!==!1,s,d)}var v,i=e.__c=we(e,t);y.__b&&y.__b(e);var P=y.__r;if(l.prototype&&typeof l.prototype.render=="function"){var E=Z(l,t);(i=e.__c=new l(a,E)).__v=e,i._dirty=i.__d=!0,i.props=a,i.state==null&&(i.state={}),i._nextState==null&&i.__s==null&&(i._nextState=i.__s=i.state),i.context=E,l.getDerivedStateFromProps?i.state=Object.assign({},i.state,l.getDerivedStateFromProps(i.props,i.state)):i.componentWillMount&&(i.componentWillMount(),i.state=i._nextState!==i.state?i._nextState:i.__s!==i.state?i.__s:i.state),P&&P(e),v=i.render(i.props,i.state,i.context)}else for(var C=Z(l,t),T=0;i.__d&&T++<25;)i.__d=!1,P&&P(e),v=l.call(e.__c,a,C);return i.getChildContext&&(t=Object.assign({},t,i.getChildContext())),y.diffed&&y.diffed(e),F(v,t,r,r.shallowHighOrder!==!1,s,d)}l=(h=l).displayName||h!==Function&&h.name||function(J){var Q=(Function.prototype.toString.call(J).match(/^\s*function\s+([^( ]+)/)||"")[1];if(!Q){for(var z=-1,R=I.length;R--;)if(I[R]===J){z=R;break}z<0&&(z=I.push(J)-1),Q="UnnamedComponent"+z}return Q}(h)}var x,j,p="<"+l;if(a){var m=Object.keys(a);r&&r.sortAttributes===!0&&m.sort();for(var $=0;$<m.length;$++){var o=m[$],u=a[o];if(o!=="children"){if(!K.test(o)&&(r&&r.allAttributes||o!=="key"&&o!=="ref"&&o!=="__self"&&o!=="__source")){if(o==="defaultValue")o="value";else if(o==="defaultChecked")o="checked";else if(o==="defaultSelected")o="selected";else if(o==="className"){if(a.class!==void 0)continue;o="class"}else s&&be.test(o)&&(o=o.toLowerCase().replace(/^xlink:?/,"xlink:"));if(o==="htmlFor"){if(a.for)continue;o="for"}o==="style"&&u&&typeof u=="object"&&(u=me(u)),o[0]==="a"&&o[1]==="r"&&typeof u=="boolean"&&(u=String(u));var c=r.attributeHook&&r.attributeHook(o,u,t,r,O);if(c||c==="")p+=c;else if(o==="dangerouslySetInnerHTML")j=u&&u.__html;else if(l==="textarea"&&o==="value")x=u;else if((u||u===0||u==="")&&typeof u!="function"){if(!(u!==!0&&u!==""||(u=o,r&&r.xml))){p=p+" "+o;continue}if(o==="value"){if(l==="select"){d=u;continue}l==="option"&&d==u&&a.selected===void 0&&(p+=" selected")}p=p+" "+o+'="'+q(u)+'"'}}}else x=u}}if(g){var A=p.replace(/\n\s*/," ");A===p||~A.indexOf(`
`)?g&&~p.indexOf(`
`)&&(p+=`
`):p=A}if(p+=">",K.test(l))throw new Error(l+" is not a valid HTML tag name in "+p);var L,Oe=he.test(l)||r.voidElements&&r.voidElements.test(l),M=[];if(j)g&&ue(j)&&(j=`
`+f+ce(j,f)),p+=j;else if(x!=null&&ee(L=[],x).length){for(var B=g&&~p.indexOf(`
`),re=!1,G=0;G<L.length;G++){var X=L[G];if(X!=null&&X!==!1){var N=F(X,t,r,!0,l==="svg"||l!=="foreignObject"&&s,d);if(g&&!B&&ue(N)&&(B=!0),N)if(g){var ne=N.length>0&&N[0]!="<";re&&ne?M[M.length-1]+=N:M.push(N),re=ne}else M.push(N)}}if(g&&B)for(var Y=M.length;Y--;)M[Y]=`
`+f+ce(M[Y],f)}if(M.length||j)p+=M.join("");else if(r&&r.xml)return p.substring(0,p.length-1)+" />";return!Oe||L||j?(g&&~p.indexOf(`
`)&&(p+=`
`),p=p+"</"+l+">"):p=p.replace(/>$/," />"),p}var Xe={shallow:!0};k.render=k;var Ye=function(e,t){return k(e,t,Xe)},pe=[];function k(e,t,r){t=t||{};var n=y.__s;y.__s=!0;var s,d=ye(V,null);return d.__k=[e],s=r&&(r.pretty||r.voidElements||r.sortAttributes||r.shallow||r.allAttributes||r.xml||r.attributeHook)?F(e,t,r):U(e,t,!1,void 0,d),y.__c&&y.__c(e,pe),y.__s=n,pe.length=0,s}function H(e){return e==null||typeof e=="boolean"?null:typeof e=="string"||typeof e=="number"||typeof e=="bigint"?ye(null,null,e):e}function Je(e,t){return e==="className"?"class":e==="htmlFor"?"for":e==="defaultValue"?"value":e==="defaultChecked"?"checked":e==="defaultSelected"?"selected":t&&be.test(e)?e.toLowerCase().replace(/^xlink:?/,"xlink:"):e}function Qe(e,t){return e==="style"&&t!=null&&typeof t=="object"?me(t):e[0]==="a"&&e[1]==="r"&&typeof t=="boolean"?String(t):t}var _e=Array.isArray,ge=Object.assign;function U(e,t,r,n,s){if(e==null||e===!0||e===!1||e==="")return"";if(typeof e!="object")return typeof e=="function"?"":q(e);if(_e(e)){var d="";s.__k=e;for(var g=0;g<e.length;g++)d+=U(e[g],t,r,n,s),e[g]=H(e[g]);return d}if(e.constructor!==void 0)return"";e.__=s,y.__b&&y.__b(e);var f=e.type,b=e.props;if(typeof f=="function"){var _;if(f===V)_=b.children;else{_=f.prototype&&typeof f.prototype.render=="function"?function(m,$){var o=m.type,u=Z(o,$),c=new o(m.props,u);m.__c=c,c.__v=m,c.__d=!0,c.props=m.props,c.state==null&&(c.state={}),c.__s==null&&(c.__s=c.state),c.context=u,o.getDerivedStateFromProps?c.state=ge({},c.state,o.getDerivedStateFromProps(c.props,c.state)):c.componentWillMount&&(c.componentWillMount(),c.state=c.__s!==c.state?c.__s:c.state);var A=y.__r;return A&&A(m),c.render(c.props,c.state,c.context)}(e,t):function(m,$){var o,u=we(m,$),c=Z(m.type,$);m.__c=u;for(var A=y.__r,L=0;u.__d&&L++<25;)u.__d=!1,A&&A(m),o=m.type.call(u,m.props,c);return o}(e,t);var h=e.__c;h.getChildContext&&(t=ge({},t,h.getChildContext()))}var l=U(_=_!=null&&_.type===V&&_.key==null?_.props.children:_,t,r,n,e);return y.diffed&&y.diffed(e),e.__=void 0,y.unmount&&y.unmount(e),l}var a,O,w="<";if(w+=f,b)for(var v in a=b.children,b){var i=b[v];if(!(v==="key"||v==="ref"||v==="__self"||v==="__source"||v==="children"||v==="className"&&"class"in b||v==="htmlFor"&&"for"in b||K.test(v))){if(i=Qe(v=Je(v,r),i),v==="dangerouslySetInnerHTML")O=i&&i.__html;else if(f==="textarea"&&v==="value")a=i;else if((i||i===0||i==="")&&typeof i!="function"){if(i===!0||i===""){i=v,w=w+" "+v;continue}if(v==="value"){if(f==="select"){n=i;continue}f!=="option"||n!=i||"selected"in b||(w+=" selected")}w=w+" "+v+'="'+q(i)+'"'}}}var P=w;if(w+=">",K.test(f))throw new Error(f+" is not a valid HTML tag name in "+w);var E="",C=!1;if(O)E+=O,C=!0;else if(typeof a=="string")E+=q(a),C=!0;else if(_e(a)){e.__k=a;for(var T=0;T<a.length;T++){var x=a[T];if(a[T]=H(x),x!=null&&x!==!1){var j=U(x,t,f==="svg"||f!=="foreignObject"&&r,n,e);j&&(E+=j,C=!0)}}}else if(a!=null&&a!==!1&&a!==!0){e.__k=[H(a)];var p=U(a,t,f==="svg"||f!=="foreignObject"&&r,n,e);p&&(E+=p,C=!0)}if(y.diffed&&y.diffed(e),e.__=void 0,y.unmount&&y.unmount(e),C)w+=E;else if(he.test(f))return P+" />";return w+"</"+f+">"}k.shallowRender=Ye;const Re=Me(null);class ot{constructor(t){ie(this,"_provider");this._provider=t}render(t,r){return async n=>{var l;if(!t)throw new Error("Component is not defined");if(!n)throw new Error("Root element is not defined");const s=await((l=t.getInitialData)==null?void 0:l.call(t,r))??{},d=oe({...r}),g=oe(new Set),f=this._provider,b=({next:a})=>S(Re.Provider,{value:g,children:S(te,{node:f,...f.props,children:S(t,{...a.value,initialData:s})})});n.innerHTML="";const _=document.createElement("div");n.classList.add("dropin-design"),se(S(b,{next:d}),_);const h={remove:()=>{se(null,_)},setProps:a=>{const O=a(d.peek());d.value=O}};return new Promise(a=>{g.subscribe(O=>{if(O.size===0)return n.classList.add("dropin-design"),n.appendChild(_.firstChild??_),a(h)})})}}unmount(t){var r;if(!t)throw new Error("Root element is not defined");(r=t.firstChild)==null||r.remove()}async toString(t,r,n){var d;if(!t)throw new Error("Component is not defined");const s=await((d=t.getInitialData)==null?void 0:d.call(t,r))??{};return k(S(te,{node:this._provider,...this._provider.props,children:S(t,{...r,initialData:s})}),{},{...n})}}function te({node:e,...t}){return e?Array.isArray(e)?S(V,{children:e.map((r,n)=>S(te,{node:r,className:t.className,...t},n))}):(t.className=Se([e.props.className,t.className]),S(e.type,{ref:e.ref,...e.props,...t},e.key)):null}const at=e=>typeof e=="number",lt=()=>{const e=navigator.userAgent.toLowerCase(),t=/ipad|iphone|ipod/.test(e),r=e.includes("mac")&&"ontouchend"in document;return t||r};export{ot as R,Re as S,te as V,it as a,lt as b,Se as c,nt as d,st as g,at as i};
