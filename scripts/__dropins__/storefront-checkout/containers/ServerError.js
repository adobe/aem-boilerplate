/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as t,jsxs as l}from"@dropins/tools/preact-jsx-runtime.js";/* empty css                             */import{IllustratedMessage as p,Icon as f,Button as d}from"@dropins/tools/components.js";import"../chunks/TermsAndConditions.js";import{classes as a}from"@dropins/tools/lib.js";/* empty css                      */import"../chunks/errors.js";import"@dropins/tools/event-bus.js";import{s as h}from"../chunks/dom.js";import"@dropins/tools/preact-compat.js";/* empty css                  */import{S as v}from"../chunks/OrderError.js";import{useText as k}from"@dropins/tools/i18n.js";/* empty css                       */import{useRef as g,useEffect as m}from"@dropins/tools/preact-hooks.js";import{s as n}from"../chunks/ServerErrorSignal.js";import"@dropins/tools/signals.js";import"@dropins/tools/fetch-graphql.js";const C=({className:i,contactSupport:o,errorMessage:e,onClick:c,errorMessageRef:s})=>{const r=k({Title:"Checkout.ServerError.title",Message:"Checkout.ServerError.message",ContactSupport:"Checkout.ServerError.contactSupport",Button:"Checkout.ServerError.button"}),u=e!==""?e:r.Title;return t(p,{action:t(d,{className:a(["checkout-server-error__button"]),name:"server-error-button",onClick:c,children:r.Button}),"aria-describedby":"checkout-server-error__message","aria-invalid":"true","aria-live":"polite",className:a(["checkout-server-error",i]),"data-testid":"checkout-server-error",heading:u,icon:t(f,{className:a(["checkout-server-error__icon"]),source:v}),message:l("p",{ref:s,"data-testid":"checkout-server-error-message",id:a(["checkout-server-error__message"]),children:[r.Message,t("br",{}),t("span",{children:o??r.ContactSupport})]})})},F=({active:i=!0,onRetry:o,onServerError:e,autoScroll:c=!1})=>{const s=g(null),r=n.value,u=async()=>{o==null||o(),n.value=void 0};return m(()=>{r&&(e==null||e(r))},[r,e]),m(()=>{!c||!r||!s.current||h(s.current)},[r,c]),!i||!r?null:t(C,{errorMessage:r,errorMessageRef:s,onClick:u})};export{F as ServerError,F as default};
