/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as t,jsxs as g,Fragment as K}from"@dropins/tools/preact-jsx-runtime.js";import{classes as me,Slot as pe}from"@dropins/tools/lib.js";import{useState as V,useRef as J,useEffect as j,useCallback as U,useMemo as G}from"@dropins/tools/preact-hooks.js";import{events as ge}from"@dropins/tools/event-bus.js";import{p as he,E as fe}from"../chunks/acdl.js";import{u as ye}from"../chunks/useCompanyContextListener.js";import{g as ve,u as Ce}from"../chunks/updateCompany.js";import{g as ue,v as Ae}from"../chunks/validateCompanyEmail.js";import{useText as H}from"@dropins/tools/i18n.js";import{u as Ne}from"../chunks/useInLineAlert.js";import{c as Ie}from"../chunks/CompanyLoaders.js";import{Card as Q,IllustratedMessage as _e,Button as X,Field as R,Input as L,Picker as ce,Header as Ee,InLineAlert as be,ProgressSpinner as xe}from"@dropins/tools/components.js";import"../chunks/fetchUserPermissions.js";import"../chunks/company-permissions.js";import"../chunks/fetch-error.js";import"../chunks/network-error.js";import"@dropins/tools/fetch-graphql.js";import"@dropins/tools/preact-compat.js";const $e=({company:a,slots:e,showEditForm:u,handleShowEditForm:f})=>{const n=H({editButton:"Company.shared.buttons.edit",noDataMessage:"Company.CompanyProfile.companyProfileCard.noDataMessage",companyName:"Company.shared.fields.companyName",email:"Company.shared.fields.email",legalName:"Company.shared.fields.legalName",vatTaxId:"Company.shared.fields.vatTaxId",resellerId:"Company.shared.fields.resellerId",legalAddress:"Company.shared.fields.legalAddress",contacts:"Company.CompanyProfile.companyProfileCard.contacts",companyAdministrator:"Company.CompanyProfile.companyProfileCard.companyAdministrator",salesRepresentative:"Company.CompanyProfile.companyProfileCard.salesRepresentative",paymentInformation:"Company.CompanyProfile.companyProfileCard.paymentInformation",shippingInformation:"Company.CompanyProfile.companyProfileCard.shippingInformation",availablePaymentMethods:"Company.CompanyProfile.companyProfileCard.availablePaymentMethods",availableShippingMethods:"Company.CompanyProfile.companyProfileCard.availableShippingMethods",noPaymentMethods:"Company.CompanyProfile.companyProfileCard.noPaymentMethods",noShippingMethods:"Company.CompanyProfile.companyProfileCard.noShippingMethods"});if(!a)return t(Q,{variant:"secondary",className:"account-company-profile-card",children:t("div",{className:"account-company-profile-card__wrapper",children:t("div",{className:"account-company-profile-card__content",children:t("div",{className:"account-company-profile-card__no-data",children:t(_e,{message:t("p",{children:n.noDataMessage})})})})})});const o=a.permissionsFlags||{canViewAccount:!0,canViewAddress:!0,canViewContacts:!0,canViewPaymentInformation:!0,canViewShippingInformation:!0},r=[o.canViewAccount?{name:"name",label:n.companyName,value:a.name||"",legalName:a.legalName||""}:null,o.canViewAccount?{name:"email",label:n.email,value:a.email||""}:null,o.canViewAccount?{name:"vatTaxId",label:n.vatTaxId,value:a.vatTaxId||""}:null,o.canViewAccount?{name:"resellerId",label:n.resellerId,value:a.resellerId||""}:null].filter(Boolean);return t(Q,{variant:"secondary",className:me(["account-company-profile-card",["account-company-profile-card-short",u]]),children:g("div",{className:"account-company-profile-card__wrapper",children:[t("div",{className:"account-company-profile-card__actions",children:(a.canEditAccount||a.canEditAddress)&&t(X,{type:"button",variant:"tertiary",onClick:f,children:n.editButton})}),t("div",{className:"account-company-profile-card__content",children:(()=>{var y,p;const A=g(K,{children:[r.map((l,d)=>{if(!l.value)return null;let v;return l.name==="name"&&l.legalName?v=`${l.label}: ${l.value} (${l.legalName})`:v=l.label?`${l.label}: ${l.value}`:l.value,t("p",{"data-testid":`${l.name}_${d}`,children:v},`${l.name}_${d}`)}),o.canViewAddress&&a.legalAddress&&g("div",{className:"company-legal-address",children:[t("p",{children:g("strong",{children:[n.legalAddress,":"]})}),(y=a.legalAddress.street)==null?void 0:y.map((l,d)=>t("p",{children:l},d)),g("p",{children:[a.legalAddress.city,", ",(p=a.legalAddress.region)==null?void 0:p.region," ",a.legalAddress.postcode]}),t("p",{children:a.legalAddress.countryCode}),a.legalAddress.telephone&&g("p",{children:["Phone: ",a.legalAddress.telephone]})]}),o.canViewContacts&&(a.companyAdmin||a.salesRepresentative)&&g("div",{className:"company-contacts",children:[t("p",{children:g("strong",{children:[n.contacts,":"]})}),a.companyAdmin&&g("div",{className:"company-contact",children:[t("p",{children:g("strong",{children:[n.companyAdministrator,":"]})}),g("p",{children:[a.companyAdmin.firstname," ",a.companyAdmin.lastname]}),a.companyAdmin.jobTitle&&t("p",{children:a.companyAdmin.jobTitle}),t("p",{children:a.companyAdmin.email})]}),a.salesRepresentative&&g("div",{className:"company-contact",children:[t("p",{children:g("strong",{children:[n.salesRepresentative,":"]})}),g("p",{children:[a.salesRepresentative.firstname," ",a.salesRepresentative.lastname]}),t("p",{children:a.salesRepresentative.email})]})]}),o.canViewPaymentInformation&&g("div",{className:"company-payment-methods",children:[t("p",{children:g("strong",{children:[n.paymentInformation,":"]})}),a.availablePaymentMethods&&a.availablePaymentMethods.length>0?g(K,{children:[t("p",{children:g("strong",{children:[n.availablePaymentMethods,":"]})}),t("ul",{className:"payment-methods-list",children:a.availablePaymentMethods.map((l,d)=>t("li",{children:l.title},`payment_${d}`))})]}):t("div",{className:"message message-notice notice",children:t("div",{children:n.noPaymentMethods})})]}),o.canViewShippingInformation&&g("div",{className:"company-shipping-methods",children:[t("p",{children:g("strong",{children:[n.shippingInformation,":"]})}),a.availableShippingMethods&&a.availableShippingMethods.length>0?g(K,{children:[t("p",{children:g("strong",{children:[n.availableShippingMethods,":"]})}),t("ul",{className:"shipping-methods-list",children:a.availableShippingMethods.map((l,d)=>t("li",{children:l.title},`shipping_${d}`))})]}):t("div",{className:"message message-notice notice",children:t("div",{children:n.noShippingMethods})})]})]});return e!=null&&e.CompanyData?t(pe,{name:"CompanyData",slot:e.CompanyData,context:{companyData:r,Default:A}}):A})()})]})})},Te=({handleSetInLineAlert:a,editFormRef:e})=>{const u=H({companySuccess:"Company.CompanyProfile.editCompanyProfile.companySuccess",companyError:"Company.CompanyProfile.editCompanyProfile.companyError",loadError:"Company.CompanyProfile.messages.loadError",updateError:"Company.CompanyProfile.messages.updateError",noDataToUpdate:"Company.CompanyProfile.messages.noDataToUpdate"}),{companySuccess:f,companyError:n,loadError:o,updateError:r,noDataToUpdate:A}=u,[y,p]=V(null),[l,d]=V(!0),[v,N]=V(!1),[_,T]=V(!1),[m,k]=V([]),[D,C]=V({}),z=J(a),w=J(!1),P=J(!1);j(()=>{z.current=a},[a]);const O=U(h=>{C(h)},[]),F=U((h,B)=>{a&&(h==="success"?a({type:"success",text:B??f}):h==="error"?a({type:"error",text:B??n}):a(),N(!1))},[a,f,n]),S=U(async()=>{if(w.current)return null;w.current=!0,d(!0);try{const h=await ve();return h&&p(h),d(!1),h}catch(h){return console.error("Failed to load company:",h),d(!1),z.current&&z.current({type:"error",text:o}),null}finally{w.current=!1}},[o]);j(()=>{P.current||(P.current=!0,S())},[S]),ye(U(()=>{d(!0),T(!1),C({}),S()},[S])),j(()=>{ue().then(h=>{k(h.availableCountries)}).catch(h=>{console.error("Failed to load countries:",h)})},[]);const W=U(()=>{T(!0),F("success",""),C({})},[F]);j(()=>{_&&(e!=null&&e.current)&&setTimeout(()=>{var h;(h=e.current)==null||h.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[_,e]);const q=U(h=>{h==null||h(),T(!1),C({})},[]),Y=U(async h=>{try{if(N(!0),!h){F("error",A);return}const B=await Ce(h);p(B),T(!1),C({}),F("success"),he(fe.EDIT_COMPANY_EVENT,{...h,companyId:y==null?void 0:y.id}),ge.emit("company/updated",{company:B})}catch(B){console.error("Failed to update company:",B),F("error",B.message||r)}finally{N(!1)}},[y,F,r,A]);return{company:y,countries:m,loading:l,submitLoading:v,showEditForm:_,inputChange:D,handleShowEditForm:W,handleHideEditForm:q,handleUpdateCompany:Y,handleInputChange:O,renderAlertMessage:F,saving:v}},we=a=>{const[e,u]=V(null),[f,n]=V(!0);j(()=>{let p=!0;return ue().then(({availableCountries:l,countriesWithRequiredRegion:d,optionalZipCountries:v})=>{p&&(u({availableCountries:l,countriesWithRequiredRegion:d,optionalZipCountries:v}),n(!1))}).catch(()=>{p&&n(!1)}),()=>{p=!1}},[]);const o=G(()=>(e==null?void 0:e.availableCountries)||[],[e]),r=G(()=>{if(!a||!e)return[];const p=e.availableCountries.find(l=>l.value===a);return!(p!=null&&p.availableRegions)||p.availableRegions.length===0?[]:p.availableRegions.map(l=>({text:l.name,value:`${l.code},${l.id}`}))},[a,e]),A=G(()=>!a||!e?!1:e.countriesWithRequiredRegion.includes(a),[a,e]),y=G(()=>r.length>0,[r]);return{countryOptions:o,regionOptions:r,isRegionRequired:A,hasRegionOptions:y,loadingCountries:f}},Pe=({loading:a,value:e,errors:u,touched:f,onBlur:n,namePrefix:o="",fieldPathPrefix:r=""})=>{const A=H({accountInformation:"Company.shared.fields.accountInformation",companyName:"Company.shared.fields.companyName",email:"Company.shared.fields.email",legalName:"Company.shared.fields.legalName",vatTaxId:"Company.shared.fields.vatTaxId",resellerId:"Company.shared.fields.resellerId"}),y=o?`${o}_`:"",p=v=>r?`${r}.${v}`:v,l=v=>N=>{const _=N.target;n(p(v),_.value)},d={disabled:!!a,variant:"primary",size:"medium"};return g("div",{className:"account-edit-company-profile-form__group",children:[t("h3",{className:"account-edit-company-profile-form__section-title",children:A.accountInformation}),t(R,{label:A.companyName,required:!0,className:"account-edit-company-profile-form__field",error:f.name&&u.name?u.name:void 0,children:t(L,{name:`${y}name`,type:"text",value:e.name,onBlur:l("name"),...d,maxLength:40})}),t(R,{label:A.legalName,className:"account-edit-company-profile-form__field",children:t(L,{name:`${y}legalName`,type:"text",value:e.legalName,onBlur:l("legalName"),...d,maxLength:80})}),t(R,{label:A.email,required:!0,className:"account-edit-company-profile-form__field",error:f.email&&u.email?u.email:void 0,children:t(L,{name:`${y}email`,type:"email",value:e.email,onBlur:l("email"),...d})}),t(R,{label:A.vatTaxId,className:"account-edit-company-profile-form__field",children:t(L,{name:`${y}vatTaxId`,type:"text",value:e.vatTaxId,onBlur:l("vatTaxId"),...d,maxLength:40})}),t(R,{label:A.resellerId,className:"account-edit-company-profile-form__field",children:t(L,{name:`${y}resellerId`,type:"text",value:e.resellerId,onBlur:l("resellerId"),...d,maxLength:40})})]})},Fe=({loading:a,loadingCountries:e,value:u,errors:f,touched:n,onChange:o,onBlur:r,countryOptions:A,regionOptions:y,isRegionRequired:p,hasRegionOptions:l,namePrefix:d="legalAddress",fieldPathPrefix:v="legalAddress",requiredConfig:N})=>{var z;const _=H({legalAddress:"Company.shared.fields.legalAddress",streetAddress:"Company.shared.fields.streetAddress",city:"Company.shared.fields.city",country:"Company.shared.fields.country",stateProvince:"Company.shared.fields.stateProvince",zipPostalCode:"Company.shared.fields.zipPostalCode",phoneNumber:"Company.shared.fields.phoneNumber"}),T={street:`${d}_street`,street2:`${d}_street2`,city:`${d}_city`,countryCode:`${d}_countryCode`,region:`${d}_region`,postcode:`${d}_postcode`,telephone:`${d}_telephone`},m={street:`${v}.street`,street2:`${v}.street2`,city:`${v}.city`,countryCode:`${v}.countryCode`,region:`${v}.region`,regionCode:`${v}.regionCode`,postcode:`${v}.postcode`,telephone:`${v}.telephone`},k={street:(N==null?void 0:N.street)??!0,city:(N==null?void 0:N.city)??!0,postcode:(N==null?void 0:N.postcode)??!0,telephone:(N==null?void 0:N.telephone)??!0},D=w=>P=>{const O=P.target;r(w,O.value)},C={disabled:!!a,variant:"primary",size:"medium"};return g("div",{className:"account-edit-company-profile-form__section",children:[t("h3",{className:"account-edit-company-profile-form__section-title",children:_.legalAddress}),t(R,{label:_.streetAddress,required:k.street,className:"account-edit-company-profile-form__field",error:n[m.street]&&f[m.street]?f[m.street]:void 0,children:t(L,{name:T.street,type:"text",value:u.street,onBlur:D(m.street),...C})}),t(R,{label:`${_.streetAddress} 2`,className:"account-edit-company-profile-form__field",children:t(L,{name:T.street2,type:"text",value:u.street2,onBlur:D(m.street2),...C})}),t(R,{label:_.city,required:k.city,className:"account-edit-company-profile-form__field",error:n[m.city]&&f[m.city]?f[m.city]:void 0,children:t(L,{name:T.city,type:"text",value:u.city,onBlur:D(m.city),...C})}),t(R,{label:_.country,required:!0,className:"account-edit-company-profile-form__field",error:n[m.countryCode]&&f[m.countryCode]?f[m.countryCode]:void 0,children:t(ce,{name:T.countryCode,floatingLabel:`${_.country} *`,placeholder:_.country,options:A,value:u.countryCode,handleSelect:w=>{const P=w.target;o(m.countryCode)(P.value)},onBlur:()=>r(m.countryCode),disabled:!!a||e})}),t(R,{label:_.stateProvince,required:p,className:"account-edit-company-profile-form__field",error:n["legalAddress.region"]&&f["legalAddress.region"]?f["legalAddress.region"]:void 0,children:l?t(ce,{name:"legalAddress_region",floatingLabel:`${_.stateProvince} ${p?"*":""}`,placeholder:_.stateProvince,options:y,value:u.regionCode&&((z=y.find(w=>w.value.split(",")[0]===u.regionCode))==null?void 0:z.value)||"",handleSelect:w=>{var S;const P=w.target,[O]=P.value.split(","),F=((S=y.find(W=>W.value===P.value))==null?void 0:S.text)||"";o(m.region)(F),o(m.regionCode)(O)},onBlur:()=>r(m.region),disabled:!!a||e},`region_picker_${u.countryCode}`):t(L,{name:T.region,type:"text",value:u.region,onBlur:D(m.region),...C,disabled:!!a||e},`region_input_${u.countryCode}`)}),t(R,{label:_.zipPostalCode,required:k.postcode,className:"account-edit-company-profile-form__field",error:n[m.postcode]&&f[m.postcode]?f[m.postcode]:void 0,children:t(L,{name:T.postcode,type:"text",value:u.postcode,onBlur:D(m.postcode),...C})}),t(R,{label:_.phoneNumber,required:k.telephone,className:"account-edit-company-profile-form__field",error:n[m.telephone]&&f[m.telephone]?f[m.telephone]:void 0,children:t(L,{name:T.telephone,type:"tel",value:u.telephone,onBlur:D(m.telephone),...C})})]})},Me=({inLineAlertProps:a,company:e,loading:u=!1,onSubmit:f,onCancel:n})=>{var S,W,q,Y,h,B,Z,ee,te,ae,re,se,le,ne;const o=H({title:"Company.EditCompanyProfile.title",cancel:"Company.shared.buttons.cancel",save:"Company.shared.buttons.save",saving:"Company.shared.buttons.saving",required:"Company.shared.validation.required",invalidEmail:"Company.shared.validation.invalidEmail",companyNameRequired:"Company.shared.validation.companyNameRequired",emailRequired:"Company.shared.validation.emailRequired",emailNotAvailable:"Company.shared.validation.emailNotAvailable",companyNameLengthError:"Company.shared.validation.companyNameLengthError",legalNameLengthError:"Company.shared.validation.legalNameLengthError",vatTaxIdLengthError:"Company.shared.validation.vatTaxIdLengthError",resellerIdLengthError:"Company.shared.validation.resellerIdLengthError"}),[r,A]=V({name:(e==null?void 0:e.name)||"",email:(e==null?void 0:e.email)||"",legalName:(e==null?void 0:e.legalName)||"",vatTaxId:(e==null?void 0:e.vatTaxId)||"",resellerId:(e==null?void 0:e.resellerId)||"",legalAddress:{street:((W=(S=e==null?void 0:e.legalAddress)==null?void 0:S.street)==null?void 0:W[0])||"",street2:((Y=(q=e==null?void 0:e.legalAddress)==null?void 0:q.street)==null?void 0:Y[1])||"",city:((h=e==null?void 0:e.legalAddress)==null?void 0:h.city)||"",region:((Z=(B=e==null?void 0:e.legalAddress)==null?void 0:B.region)==null?void 0:Z.region)||"",regionCode:((te=(ee=e==null?void 0:e.legalAddress)==null?void 0:ee.region)==null?void 0:te.regionCode)||"",countryCode:((ae=e==null?void 0:e.legalAddress)==null?void 0:ae.countryCode)||"",postcode:((re=e==null?void 0:e.legalAddress)==null?void 0:re.postcode)||"",telephone:((se=e==null?void 0:e.legalAddress)==null?void 0:se.telephone)||""}}),[y,p]=V({}),[l,d]=V({}),v=((le=e==null?void 0:e.permissionsFlags)==null?void 0:le.canEditAccount)===!0,N=((ne=e==null?void 0:e.permissionsFlags)==null?void 0:ne.canEditAddress)===!0,{countryOptions:_,regionOptions:T,isRegionRequired:m,hasRegionOptions:k,loadingCountries:D}=we(r.legalAddress.countryCode),C=(s,i)=>s==="name"?i.trim()?i.length>40?o.companyNameLengthError:null:o.companyNameRequired:s==="email"?i.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)?null:o.invalidEmail:o.emailRequired:s==="legalName"?i.length>80?o.legalNameLengthError:null:s==="vatTaxId"?i.length>40?o.vatTaxIdLengthError:null:s==="resellerId"?i.length>40?o.resellerIdLengthError:null:s==="legalAddress.street"||s==="legalAddress.city"||s==="legalAddress.postcode"||s==="legalAddress.telephone"||s==="legalAddress.countryCode"?i.trim()?null:o.required:s==="legalAddress.region"&&m&&!i.trim()?o.required:null,z=()=>{var $,M;const s={};let i=!0;const x=(($=e==null?void 0:e.permissionsFlags)==null?void 0:$.canEditAccount)===!0,c=((M=e==null?void 0:e.permissionsFlags)==null?void 0:M.canEditAddress)===!0;if(x){const I=C("name",r.name);I&&(s.name=I,i=!1);const E=C("email",r.email);if(E&&(s.email=E,i=!1),r.legalName){const b=C("legalName",r.legalName);b&&(s.legalName=b,i=!1)}if(r.vatTaxId){const b=C("vatTaxId",r.vatTaxId);b&&(s.vatTaxId=b,i=!1)}if(r.resellerId){const b=C("resellerId",r.resellerId);b&&(s.resellerId=b,i=!1)}}if(c){const I=C("legalAddress.street",r.legalAddress.street);I&&(s["legalAddress.street"]=I,i=!1);const E=C("legalAddress.city",r.legalAddress.city);E&&(s["legalAddress.city"]=E,i=!1);const b=C("legalAddress.postcode",r.legalAddress.postcode);b&&(s["legalAddress.postcode"]=b,i=!1);const oe=C("legalAddress.telephone",r.legalAddress.telephone);oe&&(s["legalAddress.telephone"]=oe,i=!1);const ie=C("legalAddress.countryCode",r.legalAddress.countryCode);ie&&(s["legalAddress.countryCode"]=ie,i=!1);const de=C("legalAddress.region",r.legalAddress.region);de&&(s["legalAddress.region"]=de,i=!1)}return p(s),i},w=async s=>{var $,M;s.preventDefault();const i=(($=e==null?void 0:e.permissionsFlags)==null?void 0:$.canEditAccount)===!0,x=((M=e==null?void 0:e.permissionsFlags)==null?void 0:M.canEditAddress)===!0,c={};if(i&&(c.name=!0,c.email=!0,c.legalName=!0,c.vatTaxId=!0,c.resellerId=!0),x&&(c["legalAddress.street"]=!0,c["legalAddress.street2"]=!0,c["legalAddress.city"]=!0,c["legalAddress.region"]=!0,c["legalAddress.regionCode"]=!0,c["legalAddress.countryCode"]=!0,c["legalAddress.postcode"]=!0,c["legalAddress.telephone"]=!0),d(c),!!z()){if(i&&r.email!==(e==null?void 0:e.email)){const I=await Ae(r.email);if(!I.isValid){p(E=>({...E,email:I.error||o.emailNotAvailable}));return}}if(f){const I={};i&&(I.name=r.name,I.email=r.email,I.legalName=r.legalName,I.vatTaxId=r.vatTaxId,I.resellerId=r.resellerId),x&&(I.legalAddress={street:[r.legalAddress.street,r.legalAddress.street2].filter(Boolean),city:r.legalAddress.city,region:{region:r.legalAddress.region,regionCode:r.legalAddress.regionCode},countryCode:r.legalAddress.countryCode,postcode:r.legalAddress.postcode,telephone:r.legalAddress.telephone}),await f(I)}}},P=(s,i)=>{if(s.startsWith("legalAddress.")){const x=s.split(".")[1];x==="countryCode"?(A(c=>({...c,legalAddress:{...c.legalAddress,[x]:i,region:"",regionCode:""}})),p(c=>{const $={...c};return delete $["legalAddress.region"],delete $["legalAddress.regionCode"],$}),d(c=>{const $={...c};return delete $["legalAddress.region"],delete $["legalAddress.regionCode"],$})):A(x==="region"?c=>({...c,legalAddress:{...c.legalAddress,region:i,regionCode:k?c.legalAddress.regionCode:i}}):c=>({...c,legalAddress:{...c.legalAddress,[x]:i}}))}else A(x=>({...x,[s]:i}))},O=s=>i=>{const x=new Set(["name","email","legalName","vatTaxId","resellerId"]),c=s.startsWith("legalAddress.");x.has(s)&&!v||c&&!N||(P(s,i),y[s]&&p(M=>{const I={...M};return delete I[s],I}))},F=(s,i)=>{const x=new Set(["name","email","legalName","vatTaxId","resellerId"]),c=s.startsWith("legalAddress.");if(x.has(s)&&!v||c&&!N)return;i!==void 0&&P(s,i),d(E=>({...E,[s]:!0}));let M=i;if(M===void 0)if(s.startsWith("legalAddress.")){const E=s.split(".")[1],b=r.legalAddress[E];M=typeof b=="string"?b:""}else{const E=r[s];M=typeof E=="string"?E:""}const I=C(s,M);p(I?E=>({...E,[s]:I}):E=>{const b={...E};return delete b[s],b})};return g(Q,{variant:"secondary",className:"account-edit-company-profile",children:[t(Ee,{title:o.title,divider:!1,className:"account-edit-company-profile__title"}),a!=null&&a.text?t(be,{className:"account-edit-company-profile__notification",type:a.type,variant:"secondary",heading:a.text,icon:a.icon,"data-testid":"editCompanyInLineAlert"}):null,g("form",{className:"account-edit-company-profile-form",onSubmit:w,children:[v&&t(Pe,{loading:u,value:{name:r.name,email:r.email,legalName:r.legalName,vatTaxId:r.vatTaxId,resellerId:r.resellerId},errors:y,touched:l,onBlur:F}),N&&t(Fe,{loading:u,loadingCountries:D,value:r.legalAddress,errors:y,touched:l,onChange:O,onBlur:F,countryOptions:_,regionOptions:T,isRegionRequired:m,hasRegionOptions:k}),g("div",{className:"account-edit-company-profile__actions",children:[t(X,{disabled:u,type:"button",variant:"secondary",onClick:()=>n==null?void 0:n(),children:o.cancel}),t(X,{disabled:u||!v&&!N,type:"submit",variant:"primary",children:o.save})]})]}),u&&g("div",{className:"account-edit-company-profile__loading-overlay","data-testid":"editCompanyLoadingOverlay",children:[t(xe,{size:"large"}),t("div",{className:"account-edit-company-profile__loading-text",children:o.saving})]})]})},Qe=({className:a,slots:e})=>{const{inLineAlertProps:u,handleSetInLineAlert:f}=Ne(),n=J(null),{company:o,loading:r,saving:A,showEditForm:y,handleShowEditForm:p,handleHideEditForm:l,handleUpdateCompany:d}=Te({handleSetInLineAlert:f,editFormRef:n});return r?t("div",{"data-testid":"companyProfileLoader",children:t(Ie,{withCard:!0})}):g("div",{className:me(["account-company-profile",a]),children:[t($e,{company:o,slots:e,showEditForm:y,handleShowEditForm:p}),y?t("div",{ref:n,children:t(Me,{inLineAlertProps:u,company:o,loading:A,onSubmit:d,onCancel:l})}):null]})};export{Qe as CompanyProfile,Qe as default};
//# sourceMappingURL=CompanyProfile.js.map
