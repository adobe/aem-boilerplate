/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as n,jsxs as i}from"@dropins/tools/preact-jsx-runtime.js";import{useState as m,useEffect as l}from"@dropins/tools/preact-hooks.js";import{events as p}from"@dropins/tools/event-bus.js";import{g as u}from"../chunks/getCustomerCompany.js";import{Card as d,Skeleton as h,SkeletonRow as s}from"@dropins/tools/components.js";import{classes as f}from"@dropins/tools/lib.js";import{useText as y}from"@dropins/tools/i18n.js";import"../chunks/validateCompanyEmail.js";import"@dropins/tools/fetch-graphql.js";const g=({customerCompanyInfo:e,loading:r,className:t})=>{const a=y({companyName:"Company.shared.fields.companyName",jobTitle:"Company.shared.fields.jobTitle",workPhoneNumber:"Company.shared.fields.workPhoneNumber"});return r?n(d,{variant:"secondary",className:f(["customer-company-info-card",t]),children:n("div",{className:"customer-company-info-card__content",children:i(h,{"data-testid":"customerCompanyInfoSkeletonLoader",children:[n(s,{variant:"heading",size:"xlarge",fullWidth:!1,lines:1}),n(s,{variant:"heading",size:"xlarge",fullWidth:!0,lines:1}),n(s,{variant:"heading",size:"xlarge",fullWidth:!0,lines:1})]})})}):e?n(d,{variant:"secondary",className:f(["customer-company-info-card",t]),children:i("div",{className:"customer-company-info-card__content",children:[i("p",{children:[a.companyName,": ",e.companyName]}),e.jobTitle&&i("p",{children:[a.jobTitle,": ",e.jobTitle]}),e.workPhoneNumber&&i("p",{children:[a.workPhoneNumber,": ",e.workPhoneNumber]})]})}):null},C=()=>{const[e,r]=m(null),[t,a]=m(!0),c=async()=>{try{a(!0);const o=await u();r(o)}catch(o){console.error("Failed to fetch customer company info:",o),r(null)}finally{a(!1)}};return l(()=>{c()},[]),l(()=>{const o=p.on("companyContext/changed",c,{eager:!0});return()=>{o==null||o.off()}},[]),{companyInfo:e,loading:t}},I=({className:e})=>{const{companyInfo:r,loading:t}=C();return n(g,{customerCompanyInfo:r,loading:t,className:e})};export{I as CustomerCompanyInfo};
//# sourceMappingURL=CustomerCompanyInfo.js.map
