/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsxs as R,jsx as o}from"@dropins/tools/preact-jsx-runtime.js";import{useState as x,useEffect as j}from"@dropins/tools/preact-compat.js";import{classes as s,VComponent as D,toLanguageTag as L}from"@dropins/tools/lib.js";import"@dropins/tools/components.js";/* empty css             */import{P as h}from"../chunks/PriceRange.js";import"@dropins/tools/preact.js";import{useText as v}from"@dropins/tools/i18n.js";import"@dropins/tools/preact-hooks.js";/* empty css                       */import{events as S}from"@dropins/tools/event-bus.js";import{g as C}from"../chunks/getFetchedProductData.js";import{c as T}from"../chunks/fetchProductData.js";import"../fragments.js";import"@dropins/tools/fetch-graphql.js";import"../chunks/isProductConfigurationValid.js";const y=({className:t,price:r,specialPrice:a,children:n,...i})=>{const e=v("PDP.Product.RegularPrice.label").label,c=v("PDP.Product.SpecialPrice.label").label;return R("div",{...i,className:s(["pdp-price",t]),children:[a&&o(D,{node:a,className:s(["pdp-price__amount-special","pdp-price__amount"]),"aria-label":c,role:"text"}),r&&o(D,{node:r,className:s(["pdp-price__amount-regular","pdp-price__amount--grey"]),"aria-label":e,role:"text"})]})},F=({initialData:t=null,scope:r,children:a,...n})=>{var u,d,f,g,P,b,_;const{defaultLocale:i="en-US"}=T.getConfig(),[e,c]=x(t),[m,N]=x(i);return j(()=>{const l=S.on("pdp/data",c,{scope:r}),p=S.on("locale",N);return()=>{l==null||l.off(),p==null||p.off()}},[r]),!e||!e.prices?null:o(y,{...n,specialPrice:(u=e.prices)!=null&&u.visible?o(h,{...(d=e.prices)==null?void 0:d.final,locale:L(m)}):void 0,price:(f=e.prices)!=null&&f.visible&&((g=e.prices)!=null&&g.regular)&&((P=e.prices)==null?void 0:P.final.amount)!==((b=e.prices)==null?void 0:b.regular.amount)?o(h,{...(_=e.prices)==null?void 0:_.regular,locale:L(m)}):void 0})};F.getInitialData=C;export{F as ProductPrice,F as default};
//# sourceMappingURL=ProductPrice.js.map
