/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as t,jsxs as l}from"@dropins/tools/preact-jsx-runtime.js";import{useState as S,useEffect as G,useMemo as d,useCallback as $}from"@dropins/tools/preact-compat.js";import{classes as m,VComponent as o,Slot as u,getGlobalLocale as U}from"@dropins/tools/lib.js";import{Skeleton as V,SkeletonRow as f,InLineAlert as X,Button as L,TextArea as H}from"@dropins/tools/components.js";import{events as J}from"@dropins/tools/event-bus.js";import{S as K}from"../chunks/RequestNegotiableQuoteForm.js";import"@dropins/tools/preact.js";/* empty css                   */import{useText as Y}from"@dropins/tools/i18n.js";const Z=({className:h,loading:e,quoteName:i,quoteStatus:b,banner:g,details:a,actionBar:q,quoteContent:N,shippingInformationTitle:c,shippingInformation:n,quoteCommentsTitle:v,quoteComments:s,footer:x,...Q})=>e?t(C,{}):l("div",{...Q,className:m(["quote-management-manage-negotiable-quote",h]),children:[l("div",{className:m(["quote-management-manage-negotiable-quote__header"]),children:[i&&t(o,{node:i,className:m(["quote-management-manage-negotiable-quote__quote-name"])}),b&&t(o,{node:b,className:m(["quote-management-manage-negotiable-quote__quote-status"])})]}),g&&t(o,{node:g,className:m(["quote-management-manage-negotiable-quote__banner"])}),a&&t(o,{node:a,className:m(["quote-management-manage-negotiable-quote__details"])}),q&&t(o,{node:q,className:m(["quote-management-manage-negotiable-quote__action-bar"])}),N&&t(o,{node:N,className:m(["quote-management-manage-negotiable-quote__quote-content"])}),l("div",{"data-testid":"quote-shipping-information-container",className:m(["quote-management-manage-negotiable-quote__shipping-information-container"]),children:[c&&t(o,{node:c,className:m(["quote-management-manage-negotiable-quote__shipping-information-title"])}),n&&t(o,{node:n,className:m(["quote-management-manage-negotiable-quote__shipping-information"])})]}),l("div",{"data-testid":"quote-comments-container",className:m(["quote-management-manage-negotiable-quote__quote-comments-container"]),children:[v&&t(o,{node:v,className:m(["quote-management-manage-negotiable-quote__quote-comments-title"])}),s&&t(o,{node:s,className:m(["quote-management-manage-negotiable-quote__quote-comments"])})]}),t(o,{node:x,className:m(["quote-management-manage-negotiable-quote__footer"])})]}),C=()=>l(V,{"data-testid":"manage-negotiable-quote-skeleton",children:[t(f,{variant:"heading",fullWidth:!0,size:"large"}),t(f,{variant:"row",fullWidth:!1,size:"small"}),t(f,{variant:"row",fullWidth:!1,size:"small"}),t(f,{variant:"row",fullWidth:!0}),t(f,{variant:"row",fullWidth:!0,size:"xlarge",lines:2}),t(f,{variant:"row",fullWidth:!1,size:"small"})]}),D=({className:h,dropdownPlaceholder:e,dropdownOptions:i,handleDropdownChange:b,buttons:g,...a})=>{const q=i&&i.length>0,N=g&&g.length>0;return t("div",{className:"quote-management-actions-bar__container","data-testid":"actions-bar-container",children:l("div",{className:m(["quote-management-actions-bar",h]),"data-testid":"actions-bar",...a,children:[q&&l("select",{name:"dropdown",id:"dropdown",onInput:b,className:"quote-management-actions-bar__dropdown","data-testid":"dropdown",children:[t("option",{value:"",children:e}),i==null?void 0:i.map(c=>t("option",{value:c.value,children:c.label},c.value))]}),N&&t("div",{className:"quote-management-actions-bar__buttons","data-testid":"buttons-container",children:g==null?void 0:g.map((c,n)=>t(o,{node:c,className:m(["quote-management-actions-bar__button"])},n))})]})})},re=({onActionsDropdownChange:h,slots:e,onActionsButtonClick:i,onSendForReview:b,...g})=>{const[a,q]=S(void 0),[N,c]=S(!0),n=Y({createdLabel:"NegotiableQuote.Manage.createdLabel",salesRepLabel:"NegotiableQuote.Manage.salesRepLabel",expiresLabel:"NegotiableQuote.Manage.expiresLabel",actionsLabel:"NegotiableQuote.Manage.actionsLabel",remove:"NegotiableQuote.Manage.actions.remove",close:"NegotiableQuote.Manage.actionButtons.close",delete:"NegotiableQuote.Manage.actionButtons.delete",print:"NegotiableQuote.Manage.actionButtons.print",createTemplate:"NegotiableQuote.Manage.actionButtons.createTemplate",createCopy:"NegotiableQuote.Manage.actionButtons.createCopy",shippingInformationTitle:"NegotiableQuote.Manage.shippingInformation.title",quoteCommentsTitle:"NegotiableQuote.Manage.quoteComments.title",quoteCommentsPlaceholder:"NegotiableQuote.Manage.quoteComments.placeholder",sendForReview:"NegotiableQuote.Manage.actionButtons.sendForReview",bannerTitle:"NegotiableQuote.Manage.bannerTitle",statusPending:"NegotiableQuote.Manage.bannerStatusMessages.pending",statusExpired:"NegotiableQuote.Manage.bannerStatusMessages.expired"});G(()=>{const p=J.on("quote-management/quote-data",_=>{const{quote:r}=_;r&&(q(r),c(!1))},{eager:!0});return()=>p==null?void 0:p.off()},[]);const v=d(()=>t(u,{name:"QuoteName",slot:e==null?void 0:e.QuoteName,context:{quoteName:a==null?void 0:a.name,quoteData:a},children:t("h1",{"data-testid":"quote-name",children:a==null?void 0:a.name})}),[e==null?void 0:e.QuoteName,a]),s=d(()=>t(u,{name:"QuoteStatus",slot:e==null?void 0:e.QuoteStatus,context:{quoteStatus:a==null?void 0:a.status,quoteData:a},children:t("div",{"data-testid":"quote-status",children:a==null?void 0:a.status})}),[e==null?void 0:e.QuoteStatus,a]),Q=$(p=>{switch(p){case"PENDING":return n.statusPending;case"EXPIRED":return n.statusExpired;default:return null}},[n])(a==null?void 0:a.status),M=Q&&t(X,{type:"warning",variant:"secondary",icon:t(K,{}),heading:n.bannerTitle,description:Q}),y=M&&t(u,{name:"Banner","data-testid":"banner",slot:e==null?void 0:e.Banner,context:{quoteData:a},children:M}),I=d(()=>{if(!a)return null;const p=U()||"en-US",_=new Intl.DateTimeFormat(p,{year:"numeric",month:"long",day:"numeric"});return l(u,{name:"Details",slot:e==null?void 0:e.Details,context:{quoteData:a},children:[l("div",{className:"quote-management-manage-negotiable-quote__detail",children:[t("span",{className:"quote-management-manage-negotiable-quote__detail-title","data-testid":"created-label",children:n.createdLabel}),l("span",{className:"quote-management-manage-negotiable-quote__detail-content","data-testid":"created-value",children:[_.format(new Date(a.createdAt))," (",a.buyer.firstname," ",a.buyer.lastname,")"]})]}),l("div",{className:"quote-management-manage-negotiable-quote__detail",children:[t("span",{className:"quote-management-manage-negotiable-quote__detail-title","data-testid":"sales-rep-label",children:n.salesRepLabel}),t("span",{className:"quote-management-manage-negotiable-quote__detail-content","data-testid":"sales-rep-value",children:a.salesRepName})]}),l("div",{className:"quote-management-manage-negotiable-quote__detail",children:[t("span",{className:"quote-management-manage-negotiable-quote__detail-title","data-testid":"expires-label",children:n.expiresLabel}),t("span",{className:"quote-management-manage-negotiable-quote__detail-content","data-testid":"expires-value",children:_.format(new Date(a.expirationDate))})]})]})},[e==null?void 0:e.Details,n,a]),T=d(()=>[{label:n.close,value:"close"},{label:n.delete,value:"delete"},{label:n.print,value:"print"},{label:n.createTemplate,value:"createTemplate"},{label:n.createCopy,value:"createCopy"}],[n]),w=d(()=>{const p=r=>{h==null||h(r)},_=r=>{switch(r){case"close":i==null||i(r);break;case"delete":i==null||i(r);break;case"print":i==null||i(r);break;case"createTemplate":i==null||i(r);break;case"createCopy":i==null||i(r);break}};return t(u,{name:"ActionBar",slot:e==null?void 0:e.ActionBar,context:{quoteData:a},children:t(D,{dropdownPlaceholder:n.actionsLabel,dropdownOptions:[{label:n.remove,value:"remove"}],handleDropdownChange:p,buttons:T.map(r=>t(L,{variant:"tertiary",onClick:()=>_(r.value),"data-testid":`actions-bar-${r.value}-button`,"data-action":r.value,disabled:r.disabled,children:r.label},r.value))})})},[T,n,e==null?void 0:e.ActionBar,a,h,i]),P=d(()=>t(u,{name:"QuoteContent",slot:e==null?void 0:e.QuoteContent,context:{quoteData:a}}),[e==null?void 0:e.QuoteContent,a]),W=d(()=>t(u,{name:"ShippingInformationTitle",slot:e==null?void 0:e.ShippingInformationTitle,context:{quoteData:a},children:t("h2",{children:n.shippingInformationTitle})}),[e==null?void 0:e.ShippingInformationTitle,a,n]),z=d(()=>t(u,{name:"ShippingInformation",slot:e==null?void 0:e.ShippingInformation,context:{quoteData:a},children:t("div",{children:"TBD"})}),[e==null?void 0:e.ShippingInformation,a]),E=d(()=>t(u,{name:"QuoteCommentsTitle",slot:e==null?void 0:e.QuoteCommentsTitle,context:{quoteData:a},children:t("h2",{children:n.quoteCommentsTitle})}),[e==null?void 0:e.QuoteCommentsTitle,n,a]),F=d(()=>t(u,{name:"QuoteComments",slot:e==null?void 0:e.QuoteComments,context:{quoteData:a},children:t(H,{name:"quoteComments",placeholder:n.quoteCommentsPlaceholder,rows:3})}),[e==null?void 0:e.QuoteComments,n,a]),R=d(()=>t(u,{name:"Footer",slot:e==null?void 0:e.Footer,context:{quoteData:a},children:t(L,{variant:"primary",onClick:()=>b==null?void 0:b(a),"data-testid":"send-for-review-button",disabled:!(a!=null&&a.canSendForReview),children:n.sendForReview})}),[e==null?void 0:e.Footer,n,a,b]),j={...g,loading:N,quoteName:v,quoteStatus:s,banner:y||void 0,details:I,actionBar:w,quoteContent:P,shippingInformationTitle:W,shippingInformation:z,quoteCommentsTitle:E,quoteComments:F,footer:R};return t(Z,{...j})};export{re as ManageNegotiableQuote,re as default};
//# sourceMappingURL=ManageNegotiableQuote.js.map
